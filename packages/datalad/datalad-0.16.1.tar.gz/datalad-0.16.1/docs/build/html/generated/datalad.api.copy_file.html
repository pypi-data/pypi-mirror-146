<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>datalad.api.copy_file &mdash; DataLad 0.15.3+529.gc81453444.dirty documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="datalad.api.create_test_dataset" href="datalad.api.create_test_dataset.html" />
    <link rel="prev" title="datalad.api.clone" href="datalad.api.clone.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> DataLad
            <img src="../_static/datalad_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.15
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Change log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acknowledgements.html">Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications.html">Publications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../background.html">Background and motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../related.html">Delineation from related solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics.html">Basic principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credentials.html">Credentials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metadata.html">Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../customization.html">Customization and extension of functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/index.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../cmdline.html">Command line reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../modref.html">Python module reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../modref.html#high-level-user-interface">High-level user interface</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../modref.html#dataset-operations">Dataset operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modref.html#metadata-handling">Metadata handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modref.html#reproducible-execution">Reproducible execution</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../modref.html#plumbing-commands">Plumbing commands</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="datalad.api.clean.html">datalad.api.clean</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.clone.html">datalad.api.clone</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">datalad.api.copy_file</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.create_test_dataset.html">datalad.api.create_test_dataset</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.diff.html">datalad.api.diff</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.download_url.html">datalad.api.download_url</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.sshrun.html">datalad.api.sshrun</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.siblings.html">datalad.api.siblings</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.subdatasets.html">datalad.api.subdatasets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../modref.html#miscellaneous-commands">Miscellaneous commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../modref.html#support-functionality">Support functionality</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modref.html#configuration-management">Configuration management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modref.html#test-infrastructure">Test infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modref.html#command-line-interface-infrastructure">Command line interface infrastructure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../config.html">Configuration</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DataLad</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../modref.html">Python module reference</a> &raquo;</li>
      <li>datalad.api.copy_file</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="datalad-api-copy-file">
<h1>datalad.api.copy_file<a class="headerlink" href="#datalad-api-copy-file" title="Permalink to this headline"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="datalad.api.copy_file">
<span class="sig-prename descclassname"><span class="pre">datalad.api.</span></span><span class="sig-name descname"><span class="pre">copy_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">specs_from</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#datalad.api.copy_file" title="Permalink to this definition"></a></dt>
<dd><p>Copy files and their availability metadata from one dataset to another.</p>
<p>The difference to a system copy command is that here additional content
availability information, such as registered URLs, is also copied to the
target dataset. Moreover, potentially required git-annex special remote
configurations are detected in a source dataset and are applied to a target
dataset in an analogous fashion. It is possible to copy a file for which no
content is available locally, by just copying the required metadata on
content identity and availability.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>At the moment, only URLs for the special remotes ‘web’ (git-annex built-in)
and ‘datalad’ are recognized and transferred.</p>
</div>
<p>The interface is modeled after the POSIX ‘cp’ command, but with one
additional way to specify what to copy where: <cite>specs_from</cite> allows the
caller to flexibly input source-destination path pairs.</p>
<p>This command can copy files out of and into a hierarchy of nested
datasets. Unlike with other DataLad command, the <cite>recursive</cite> switch
does not enable recursion into subdatasets, but is analogous to the
POSIX ‘cp’ command switch and enables subdirectory recursion,
regardless of dataset boundaries. It is not necessary to enable
recursion in order to save changes made to nested target subdatasets.</p>
<p class="rubric">Examples</p>
<p>Copy a file into a dataset ‘myds’ using a path and a target directory
specification, and save its addition to ‘myds’:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">copy_file</span><span class="p">(</span><span class="s1">&#39;path/to/myfile&#39;</span><span class="p">,</span> <span class="n">dataset</span><span class="o">=</span><span class="s1">&#39;path/to/myds&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Copy a file to a dataset ‘myds’ and save it under a new name by
providing two paths:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">copy_file</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;path/to/myfile&#39;</span><span class="p">,</span> <span class="s1">&#39;path/to/myds/newname&#39;</span><span class="p">],</span>
            <span class="n">dataset</span><span class="o">=</span><span class="s1">&#39;path/to/myds&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Copy a file into a dataset without saving it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">copy_file</span><span class="p">(</span><span class="s1">&#39;path/to/myfile&#39;</span><span class="p">,</span> <span class="n">target_dir</span><span class="o">=</span><span class="s1">&#39;path/to/myds/&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Copy a directory and its subdirectories into a dataset ‘myds’ and save
the addition in ‘myds’:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">copy_file</span><span class="p">(</span><span class="s1">&#39;path/to/dir/&#39;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dataset</span><span class="o">=</span><span class="s1">&#39;path/to/myds&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Copy files using a path and optionally target specification from a
file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">copy_file</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="s1">&#39;path/to/myds&#39;</span><span class="p">,</span> <span class="n">specs_from</span><span class="o">=</span><span class="s1">&#39;path/to/specfile&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>sequence of str</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – paths to copy (and possibly a target path to copy to). [Default:
None]</p></li>
<li><p><strong>dataset</strong> (<a class="reference internal" href="datalad.api.Dataset.html#datalad.api.Dataset" title="datalad.api.Dataset"><em>Dataset</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – root dataset to save after copy operations are completed. All
destination paths must be within this dataset, or its subdatasets.
If no dataset is given, dataset modifications will be left unsaved.
[Default: None]</p></li>
<li><p><strong>recursive</strong> (<em>bool</em><em>, </em><em>optional</em>) – copy directories recursively. [Default: False]</p></li>
<li><p><strong>target_dir</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – copy all source files into this DIRECTORY. This value is overridden
by any explicit destination path provided via ‘specs_from’. When not
given, this defaults to the path of the dataset specified via
‘dataset’. [Default: None]</p></li>
<li><p><strong>specs_from</strong> – read list of source (and destination) path names from a given file,
or stdin (with ‘-‘). Each line defines either a source path, or a
source/destination path pair (separated by a null byte character).
Alternatively, a list of 2-tuples with source/destination pairs can
be given. [Default: None]</p></li>
<li><p><strong>message</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – a description of the state or the changes made to a dataset.
[Default: None]</p></li>
<li><p><strong>on_failure</strong> (<em>{'ignore'</em><em>, </em><em>'continue'</em><em>, </em><em>'stop'}</em><em>, </em><em>optional</em>) – behavior to perform on failure: ‘ignore’ any failure is reported,
but does not cause an exception; ‘continue’ if any failure occurs an
exception will be raised at the end, but processing other actions
will continue for as long as possible; ‘stop’: processing will stop
on first failure and an exception is raised. A failure is any result
with status ‘impossible’ or ‘error’. Raised exception is an
IncompleteResultsError that carries the result dictionaries of the
failures in its <cite>failed</cite> attribute. [Default: ‘continue’]</p></li>
<li><p><strong>result_filter</strong> (<em>callable</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – if given, each to-be-returned status dictionary is passed to this
callable, and is only returned if the callable’s return value does
not evaluate to False or a ValueError exception is raised. If the
given callable supports <cite>**kwargs</cite> it will additionally be passed
the keyword arguments of the original API call. [Default: None]</p></li>
<li><p><strong>result_renderer</strong> – select rendering mode command results. ‘tailored’ enables a command-
specific rendering style that is typically tailored to human
consumption, if there is one for a specific command, or otherwise
falls back on the the ‘generic’ result renderer; ‘generic’ renders
each result in one line  with key info like action, status, path,
and an optional message); ‘json’ a complete JSON line serialization
of the full result record; ‘json_pp’ like ‘json’, but pretty-printed
spanning multiple lines; ‘disabled’ turns off result rendering
entirely; ‘&lt;template&gt;’ reports any value(s) of any result properties
in any format indicated by the template (e.g. ‘{path}’, compare with
JSON output for all key-value choices). The template syntax follows
the Python “format() language”. It is possible to report individual
dictionary values, e.g. ‘{metadata[name]}’. If a 2nd-level key
contains a colon, e.g. ‘music:Genre’, ‘:’ must be substituted by ‘#’
in the template, like so: ‘{metadata[music#Genre]}’. [Default:
‘tailored’]</p></li>
<li><p><strong>result_xfm</strong> (<em>{'datasets'</em><em>, </em><em>'successdatasets-or-none'</em><em>, </em><em>'paths'</em><em>, </em><em>'relpaths'</em><em>, </em><em>'metadata'}</em><em> or </em><em>callable</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – if given, each to-be-returned result status dictionary is passed to
this callable, and its return value becomes the result instead. This
is different from <cite>result_filter</cite>, as it can perform arbitrary
transformation of the result value. This is mostly useful for top-
level command invocations that need to provide the results in a
particular format. Instead of a callable, a label for a pre-crafted
result transformation can be given. [Default: None]</p></li>
<li><p><strong>return_type</strong> (<em>{'generator'</em><em>, </em><em>'list'</em><em>, </em><em>'item-or-list'}</em><em>, </em><em>optional</em>) – return value behavior switch. If ‘item-or-list’ a single value is
returned instead of a one-item return value list, or a list in case
of multiple return values. <cite>None</cite> is return in case of an empty
list. [Default: ‘list’]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="datalad.api.clone.html" class="btn btn-neutral float-left" title="datalad.api.clone" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="datalad.api.create_test_dataset.html" class="btn btn-neutral float-right" title="datalad.api.create_test_dataset" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2022, DataLad team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>