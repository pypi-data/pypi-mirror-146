<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>datalad.api.clone &mdash; DataLad 0.15.3+529.gc81453444.dirty documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="datalad.api.copy_file" href="datalad.api.copy_file.html" />
    <link rel="prev" title="datalad.api.clean" href="datalad.api.clean.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> DataLad
            <img src="../_static/datalad_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.15
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Change log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acknowledgements.html">Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications.html">Publications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../background.html">Background and motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../related.html">Delineation from related solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics.html">Basic principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credentials.html">Credentials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metadata.html">Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../customization.html">Customization and extension of functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/index.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../cmdline.html">Command line reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../modref.html">Python module reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../modref.html#high-level-user-interface">High-level user interface</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../modref.html#dataset-operations">Dataset operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modref.html#metadata-handling">Metadata handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modref.html#reproducible-execution">Reproducible execution</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../modref.html#plumbing-commands">Plumbing commands</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="datalad.api.clean.html">datalad.api.clean</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">datalad.api.clone</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.copy_file.html">datalad.api.copy_file</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.create_test_dataset.html">datalad.api.create_test_dataset</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.diff.html">datalad.api.diff</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.download_url.html">datalad.api.download_url</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.sshrun.html">datalad.api.sshrun</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.siblings.html">datalad.api.siblings</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.subdatasets.html">datalad.api.subdatasets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../modref.html#miscellaneous-commands">Miscellaneous commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../modref.html#support-functionality">Support functionality</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modref.html#configuration-management">Configuration management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modref.html#test-infrastructure">Test infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modref.html#command-line-interface-infrastructure">Command line interface infrastructure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../config.html">Configuration</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DataLad</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../modref.html">Python module reference</a> &raquo;</li>
      <li>datalad.api.clone</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="datalad-api-clone">
<h1>datalad.api.clone<a class="headerlink" href="#datalad-api-clone" title="Permalink to this headline"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="datalad.api.clone">
<span class="sig-prename descclassname"><span class="pre">datalad.api.</span></span><span class="sig-name descname"><span class="pre">clone</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">git_clone_opts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reckless</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#datalad.api.clone" title="Permalink to this definition"></a></dt>
<dd><p>Obtain a dataset (copy) from a URL or local directory</p>
<p>The purpose of this command is to obtain a new clone (copy) of a dataset
and place it into a not-yet-existing or empty directory. As such <cite>clone</cite>
provides a strict subset of the functionality offered by <cite>install</cite>. Only a
single dataset can be obtained, and immediate recursive installation of
subdatasets is not supported. However, once a (super)dataset is installed
via <cite>clone</cite>, any content, including subdatasets can be obtained by a
subsequent <cite>get</cite> command.</p>
<p>Primary differences over a direct <cite>git clone</cite> call are 1) the automatic
initialization of a dataset annex (pure Git repositories are equally
supported); 2) automatic registration of the newly obtained dataset as a
subdataset (submodule), if a parent dataset is specified; 3) support
for additional resource identifiers (DataLad resource identifiers as used
on datasets.datalad.org, and RIA store URLs as used for store.datalad.org
- optionally in specific versions as identified by a branch or a tag; see
examples); and 4) automatic configurable generation of alternative access
URL for common cases (such as appending ‘.git’ to the URL in case the
accessing the base URL failed).</p>
<p>In case the clone is registered as a subdataset, the original URL passed to
<cite>clone</cite> is recorded in <cite>.gitmodules</cite> of the parent dataset in addition
to the resolved URL used internally for git-clone. This allows to preserve
datalad specific URLs like ria+ssh://… for subsequent calls to <cite>get</cite> if
the subdataset was locally removed later on.</p>
<p>By default, the command returns a single Dataset instance for
an installed dataset, regardless of whether it was newly installed (‘ok’
result), or found already installed from the specified source (‘notneeded’
result).</p>
<p>URL mapping configuration</p>
<p>‘clone’ supports the transformation of URLs via (multi-part) substitution
specifications. A substitution specification is defined as a configuration
setting ‘datalad.clone.url-substition.&lt;seriesID&gt;’ with a string containing
a match and substitution expression, each following Python’s regular
expression syntax. Both expressions are concatenated to a single string
with an arbitrary delimiter character. The delimiter is defined by
prefixing the string with the delimiter. Prefix and delimiter are stripped
from the expressions (Example: “,^http://(.*)$,https://1”).  This setting
can be defined multiple times, using the same ‘&lt;seriesID&gt;’.  Substitutions
in a series will be applied incrementally, in order of their definition.
The first substitution in such a series must match, otherwise no further
substitutions in a series will be considered. However, following the first
match all further substitutions in a series are processed, regardless
whether intermediate expressions match or not. Substitution series themselves
have no particular order, each matching series will result in a candidate
clone URL. Consequently, the initial match specification in a series should
be as precise as possible to prevent inflation of candidate URLs.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference external" href="http://handbook.datalad.org/en/latest/usecases/datastorage_for_institutions.html#id1" title="(in datalad-handbook vv0.15+122.ge8d6f035.dirty)"><span>Building a scalable data storage for scientific computing</span></a></dt><dd><p>More information on Remote Indexed Archive (RIA) stores</p>
</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<p>Install a dataset from Github into the current directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">clone</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s1">&#39;https://github.com/datalad-datasets/longnow-podcasts.git&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Install a dataset into a specific directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">clone</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s1">&#39;https://github.com/datalad-datasets/longnow-podcasts.git&#39;</span><span class="p">,</span>
        <span class="n">path</span><span class="o">=</span><span class="s1">&#39;myfavpodcasts&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Install a dataset as a subdataset into the current dataset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">clone</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span>
        <span class="n">source</span><span class="o">=</span><span class="s1">&#39;https://github.com/datalad-datasets/longnow-podcasts.git&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Install the main superdataset from datasets.datalad.org:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">clone</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s1">&#39;///&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Install a dataset identified by a literal alias from store.datalad.org:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">clone</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s1">&#39;ria+http://store.datalad.org#~hcp-openaccess&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Install a dataset in a specific version as identified by a branch or
tag name from store.datalad.org:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">clone</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s1">&#39;ria+http://store.datalad.org#76b6ca66-36b1-11ea-a2e6-f0d5bf7b5561@myidentifier&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Install a dataset with group-write access permissions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">clone</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s1">&#39;http://example.com/dataset&#39;</span><span class="p">,</span> <span class="n">reckless</span><span class="o">=</span><span class="s1">&#39;shared-group&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<em>str</em>) – URL, DataLad resource identifier, local path or instance of dataset
to be cloned.</p></li>
<li><p><strong>path</strong> – path to clone into.  If no <cite>path</cite> is provided a destination path
will be derived from a source URL similar to <strong class="command">git clone</strong>.
[Default: None]</p></li>
<li><p><strong>git_clone_opts</strong> – A list of command line arguments to pass to <strong class="command">git clone</strong>.
Note that not all options will lead to viable results. For example ‘
–single-branch’ will not result in a functional annex repository
because both a regular branch and the git-annex branch are required.
Note that a version in a RIA URL takes precedence over ‘–branch’.
[Default: None]</p></li>
<li><p><strong>dataset</strong> (<a class="reference internal" href="datalad.api.Dataset.html#datalad.api.Dataset" title="datalad.api.Dataset"><em>Dataset</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – (parent) dataset to clone into. If given, the newly cloned dataset
is registered as a subdataset of the parent. Also, if given,
relative paths are interpreted as being relative to the parent
dataset, and not relative to the working directory. [Default: None]</p></li>
<li><p><strong>description</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – short description to use for a dataset location. Its primary purpose
is to help humans to identify a dataset copy (e.g., “mike’s dataset
on lab server”). Note that when a dataset is published, this
information becomes available on the remote side. [Default: None]</p></li>
<li><p><strong>reckless</strong> (<em>{None</em><em>, </em><em>True</em><em>, </em><em>False</em><em>, </em><em>'auto'</em><em>, </em><em>'ephemeral'}</em><em> or </em><em>shared-</em><em>...</em><em>, </em><em>optional</em>) – Obtain a dataset or subdatset and set it up in a potentially  unsafe
way for performance, or access reasons.  Use with care, any dataset
is marked as ‘untrusted’. The reckless mode is stored in a dataset’s
local configuration under ‘datalad.clone.reckless’, and will be
inherited to any of its subdatasets. Supported modes are: [‘auto’]:
hard-link files between local clones. In-place modification in any
clone will alter original annex content. [‘ephemeral’]: symlink
annex to origin’s annex and discard local availability info via git-
annex-dead ‘here’. Shares an annex between origin and clone w/o git-
annex being aware of it. In case of a change in origin you need to
update the clone before you’re able to save new content on your end.
Alternative to ‘auto’ when hardlinks are not an option, or number of
consumed inodes needs to be minimized. Note that this mode can only
be used with clones from non-bare repositories or a RIA store!
Otherwise two different annex object tree structures (dirhashmixed
vs dirhashlower) will be used simultaneously, and annex keys using
the respective other structure will be inaccessible.
[‘shared-&lt;mode&gt;’]: set up repository and annex permission to enable
multi-user access. This disables the standard write protection of
annex’ed files. &lt;mode&gt; can be any value support by ‘git init
–shared=’, such as ‘group’, or ‘all’. [Default: None]</p></li>
<li><p><strong>on_failure</strong> (<em>{'ignore'</em><em>, </em><em>'continue'</em><em>, </em><em>'stop'}</em><em>, </em><em>optional</em>) – behavior to perform on failure: ‘ignore’ any failure is reported,
but does not cause an exception; ‘continue’ if any failure occurs an
exception will be raised at the end, but processing other actions
will continue for as long as possible; ‘stop’: processing will stop
on first failure and an exception is raised. A failure is any result
with status ‘impossible’ or ‘error’. Raised exception is an
IncompleteResultsError that carries the result dictionaries of the
failures in its <cite>failed</cite> attribute. [Default: ‘continue’]</p></li>
<li><p><strong>result_filter</strong> (<em>callable</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – if given, each to-be-returned status dictionary is passed to this
callable, and is only returned if the callable’s return value does
not evaluate to False or a ValueError exception is raised. If the
given callable supports <cite>**kwargs</cite> it will additionally be passed
the keyword arguments of the original API call. [Default:
constraint:action:{install}]</p></li>
<li><p><strong>result_renderer</strong> – select rendering mode command results. ‘tailored’ enables a command-
specific rendering style that is typically tailored to human
consumption, if there is one for a specific command, or otherwise
falls back on the the ‘generic’ result renderer; ‘generic’ renders
each result in one line  with key info like action, status, path,
and an optional message); ‘json’ a complete JSON line serialization
of the full result record; ‘json_pp’ like ‘json’, but pretty-printed
spanning multiple lines; ‘disabled’ turns off result rendering
entirely; ‘&lt;template&gt;’ reports any value(s) of any result properties
in any format indicated by the template (e.g. ‘{path}’, compare with
JSON output for all key-value choices). The template syntax follows
the Python “format() language”. It is possible to report individual
dictionary values, e.g. ‘{metadata[name]}’. If a 2nd-level key
contains a colon, e.g. ‘music:Genre’, ‘:’ must be substituted by ‘#’
in the template, like so: ‘{metadata[music#Genre]}’. [Default:
‘tailored’]</p></li>
<li><p><strong>result_xfm</strong> (<em>{'datasets'</em><em>, </em><em>'successdatasets-or-none'</em><em>, </em><em>'paths'</em><em>, </em><em>'relpaths'</em><em>, </em><em>'metadata'}</em><em> or </em><em>callable</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – if given, each to-be-returned result status dictionary is passed to
this callable, and its return value becomes the result instead. This
is different from <cite>result_filter</cite>, as it can perform arbitrary
transformation of the result value. This is mostly useful for top-
level command invocations that need to provide the results in a
particular format. Instead of a callable, a label for a pre-crafted
result transformation can be given. [Default: ‘successdatasets-or-
none’]</p></li>
<li><p><strong>return_type</strong> (<em>{'generator'</em><em>, </em><em>'list'</em><em>, </em><em>'item-or-list'}</em><em>, </em><em>optional</em>) – return value behavior switch. If ‘item-or-list’ a single value is
returned instead of a one-item return value list, or a list in case
of multiple return values. <cite>None</cite> is return in case of an empty
list. [Default: ‘item-or-list’]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="datalad.api.clean.html" class="btn btn-neutral float-left" title="datalad.api.clean" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="datalad.api.copy_file.html" class="btn btn-neutral float-right" title="datalad.api.copy_file" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2022, DataLad team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>