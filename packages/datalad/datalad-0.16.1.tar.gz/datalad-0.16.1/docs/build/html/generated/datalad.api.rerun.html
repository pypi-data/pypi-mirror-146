<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>datalad.api.rerun &mdash; DataLad 0.15.3+529.gc81453444.dirty documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="datalad.api.run_procedure" href="datalad.api.run_procedure.html" />
    <link rel="prev" title="datalad.api.run" href="datalad.api.run.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> DataLad
            <img src="../_static/datalad_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.15
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Change log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acknowledgements.html">Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications.html">Publications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../background.html">Background and motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../related.html">Delineation from related solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics.html">Basic principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credentials.html">Credentials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metadata.html">Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../customization.html">Customization and extension of functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/index.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../cmdline.html">Command line reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../modref.html">Python module reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../modref.html#high-level-user-interface">High-level user interface</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../modref.html#dataset-operations">Dataset operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modref.html#metadata-handling">Metadata handling</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../modref.html#reproducible-execution">Reproducible execution</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="datalad.api.run.html">datalad.api.run</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">datalad.api.rerun</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.run_procedure.html">datalad.api.run_procedure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../modref.html#plumbing-commands">Plumbing commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modref.html#miscellaneous-commands">Miscellaneous commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../modref.html#support-functionality">Support functionality</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modref.html#configuration-management">Configuration management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modref.html#test-infrastructure">Test infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modref.html#command-line-interface-infrastructure">Command line interface infrastructure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../config.html">Configuration</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DataLad</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../modref.html">Python module reference</a> &raquo;</li>
      <li>datalad.api.rerun</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="datalad-api-rerun">
<h1>datalad.api.rerun<a class="headerlink" href="#datalad-api-rerun" title="Permalink to this headline"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="datalad.api.rerun">
<span class="sig-prename descclassname"><span class="pre">datalad.api.</span></span><span class="sig-name descname"><span class="pre">rerun</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">revision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">since</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onto</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">script</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">report</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assume_ready</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">explicit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">jobs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#datalad.api.rerun" title="Permalink to this definition"></a></dt>
<dd><p>Re-execute previous <cite>datalad run</cite> commands.</p>
<p>This will unlock any dataset content that is on record to have
been modified by the command in the specified revision.  It will
then re-execute the command in the recorded path (if it was inside
the dataset). Afterwards, all modifications will be saved.</p>
<p><em>Report mode</em></p>
<p>When called with report=True, this command reports information about
what would be re-executed as a series of records. There will be a
record for each revision in the specified revision range. Each of
these will have one of the following “rerun_action” values:</p>
<blockquote>
<div><ul class="simple">
<li><p>run: the revision has a recorded command that would be re-executed</p></li>
<li><p>skip-or-pick: the revision does not have a recorded command and would
be either skipped or cherry picked</p></li>
<li><p>merge: the revision is a merge commit and a corresponding merge would
be made</p></li>
</ul>
</div></blockquote>
<p>The decision to skip rather than cherry pick a revision is based on whether
the revision would be reachable from HEAD at the time of execution.</p>
<p>In addition, when a starting point other than HEAD is specified, there is a
rerun_action value “checkout”, in which case the record includes
information about the revision the would be checked out before rerunning
any commands.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently the “onto” feature only sets the working tree of the current
dataset to a previous state. The working trees of any subdatasets remain
unchanged.</p>
</div>
<p class="rubric">Examples</p>
<p>Re-execute the command from the previous commit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">rerun</span><span class="p">()</span>
</pre></div>
</div>
<p>Re-execute any commands in the last five commits:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">rerun</span><span class="p">(</span><span class="n">since</span><span class="o">=</span><span class="s1">&#39;HEAD~5&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Do the same as above, but re-execute the commands on top of HEAD~5 in
a detached state:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">rerun</span><span class="p">(</span><span class="n">onto</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">since</span><span class="o">=</span><span class="s1">&#39;HEAD~5&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>revision</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – rerun command(s) in <cite>revision</cite>. By default, the command from this
commit will be executed, but <cite>since</cite> can be used to construct a
revision range. The default value is like “HEAD” but resolves to the
main branch when on an adjusted branch. [Default: None]</p></li>
<li><p><strong>since</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – If <cite>since</cite> is a commit-ish, the commands from all commits that are
reachable from <cite>revision</cite> but not <cite>since</cite> will be re-executed (in
other words, the commands in <strong class="command">git log SINCE..REVISION</strong>). If
SINCE is an empty string, it is set to the parent of the first
commit that contains a recorded command (i.e., all commands in
<strong class="command">git log REVISION</strong> will be re-executed). [Default: None]</p></li>
<li><p><strong>dataset</strong> (<a class="reference internal" href="datalad.api.Dataset.html#datalad.api.Dataset" title="datalad.api.Dataset"><em>Dataset</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – specify the dataset from which to rerun a recorded command. If no
dataset is given, an attempt is made to identify the dataset based
on the current working directory. If a dataset is given, the command
will be executed in the root directory of this dataset. [Default:
None]</p></li>
<li><p><strong>branch</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – create and checkout this branch before rerunning the commands.
[Default: None]</p></li>
<li><p><strong>message</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – use MESSAGE for the reran commit rather than the recorded commit
message.  In the case of a multi-commit rerun, all the reran commits
will have this message. [Default: None]</p></li>
<li><p><strong>onto</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – start point for rerunning the commands. If not specified, commands
are executed at HEAD. This option can be used to specify an
alternative start point, which will be checked out with the branch
name specified by <cite>branch</cite> or in a detached state otherwise. As a
special case, an empty value for this option means the parent of the
first run commit in the specified revision list. [Default: None]</p></li>
<li><p><strong>script</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – extract the commands into this file rather than rerunning. Use - to
write to stdout instead. [Default: None]</p></li>
<li><p><strong>report</strong> (<em>bool</em><em>, </em><em>optional</em>) – Don’t actually re-execute anything, just display what would be done.
[Default: False]</p></li>
<li><p><strong>assume_ready</strong> (<em>{None</em><em>, </em><em>'inputs'</em><em>, </em><em>'outputs'</em><em>, </em><em>'both'}</em><em>, </em><em>optional</em>) – Assume that inputs do not need to be retrieved and/or outputs do not
need to unlocked or removed before running the command. This option
allows you to avoid the expense of these preparation steps if you
know that they are unnecessary. Note that this option also affects
any additional outputs that are automatically inferred based on
inspecting changed files in the run commit. [Default: None]</p></li>
<li><p><strong>explicit</strong> (<em>bool</em><em>, </em><em>optional</em>) – Consider the specification of inputs and outputs in the run record
to be explicit. Don’t warn if the repository is dirty, and only save
modifications to the outputs from the original record. Note that
when several run commits are specified, this applies to every one.
Care should also be taken when using <cite>onto</cite> because checking out a
new HEAD can easily fail when the working tree has modifications.
[Default: False]</p></li>
<li><p><strong>jobs</strong> (<em>int</em><em> or </em><em>None</em><em> or </em><em>{'auto'}</em><em>, </em><em>optional</em>) – how many parallel jobs (where possible) to use. “auto” corresponds
to the number defined by ‘datalad.runtime.max-annex-jobs’
configuration item        NOTE: This option can only parallelize
input retrieval (get) and output recording (save). DataLad does NOT
parallelize your scripts for you. [Default: None]</p></li>
<li><p><strong>on_failure</strong> (<em>{'ignore'</em><em>, </em><em>'continue'</em><em>, </em><em>'stop'}</em><em>, </em><em>optional</em>) – behavior to perform on failure: ‘ignore’ any failure is reported,
but does not cause an exception; ‘continue’ if any failure occurs an
exception will be raised at the end, but processing other actions
will continue for as long as possible; ‘stop’: processing will stop
on first failure and an exception is raised. A failure is any result
with status ‘impossible’ or ‘error’. Raised exception is an
IncompleteResultsError that carries the result dictionaries of the
failures in its <cite>failed</cite> attribute. [Default: ‘continue’]</p></li>
<li><p><strong>result_filter</strong> (<em>callable</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – if given, each to-be-returned status dictionary is passed to this
callable, and is only returned if the callable’s return value does
not evaluate to False or a ValueError exception is raised. If the
given callable supports <cite>**kwargs</cite> it will additionally be passed
the keyword arguments of the original API call. [Default: None]</p></li>
<li><p><strong>result_renderer</strong> – select rendering mode command results. ‘tailored’ enables a command-
specific rendering style that is typically tailored to human
consumption, if there is one for a specific command, or otherwise
falls back on the the ‘generic’ result renderer; ‘generic’ renders
each result in one line  with key info like action, status, path,
and an optional message); ‘json’ a complete JSON line serialization
of the full result record; ‘json_pp’ like ‘json’, but pretty-printed
spanning multiple lines; ‘disabled’ turns off result rendering
entirely; ‘&lt;template&gt;’ reports any value(s) of any result properties
in any format indicated by the template (e.g. ‘{path}’, compare with
JSON output for all key-value choices). The template syntax follows
the Python “format() language”. It is possible to report individual
dictionary values, e.g. ‘{metadata[name]}’. If a 2nd-level key
contains a colon, e.g. ‘music:Genre’, ‘:’ must be substituted by ‘#’
in the template, like so: ‘{metadata[music#Genre]}’. [Default:
‘tailored’]</p></li>
<li><p><strong>result_xfm</strong> (<em>{'datasets'</em><em>, </em><em>'successdatasets-or-none'</em><em>, </em><em>'paths'</em><em>, </em><em>'relpaths'</em><em>, </em><em>'metadata'}</em><em> or </em><em>callable</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – if given, each to-be-returned result status dictionary is passed to
this callable, and its return value becomes the result instead. This
is different from <cite>result_filter</cite>, as it can perform arbitrary
transformation of the result value. This is mostly useful for top-
level command invocations that need to provide the results in a
particular format. Instead of a callable, a label for a pre-crafted
result transformation can be given. [Default: None]</p></li>
<li><p><strong>return_type</strong> (<em>{'generator'</em><em>, </em><em>'list'</em><em>, </em><em>'item-or-list'}</em><em>, </em><em>optional</em>) – return value behavior switch. If ‘item-or-list’ a single value is
returned instead of a one-item return value list, or a list in case
of multiple return values. <cite>None</cite> is return in case of an empty
list. [Default: ‘list’]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="datalad.api.run.html" class="btn btn-neutral float-left" title="datalad.api.run" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="datalad.api.run_procedure.html" class="btn btn-neutral float-right" title="datalad.api.run_procedure" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2022, DataLad team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>