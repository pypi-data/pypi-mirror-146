var I=Object.defineProperty,q=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var g=(t,e,s)=>e in t?I(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,v=(t,e)=>{for(var s in e||(e={}))N.call(e,s)&&g(t,s,e[s]);if(D)for(var s of D(e))F.call(e,s)&&g(t,s,e[s]);return t},C=(t,e)=>q(t,A(e));var m=(t,e,s)=>(g(t,typeof e!="symbol"?e+"":e,s),s);import{_ as P,o as a,h as r,p as o,U as p,i as y,F as w,au as S,l as B,w as k,H as V,aE as E,O,P as x,as as U,aF as M,z as T,A as z,X as u,y as R}from"./index.af9a7d5e.js";var H=Object.defineProperty,L=Object.getOwnPropertyDescriptor,X=(t,e,s,n)=>{for(var i=n>1?void 0:n?L(e,s):e,l=t.length-1,h;l>=0;l--)(h=t[l])&&(i=(n?h(e,s,i):h(i))||i);return n&&i&&H(e,s,i),i};let j=class extends E{constructor(){super(...arguments);m(this,"queries",{settings:O.query({endpoint:x.settings}),version:O.query({endpoint:x.version})});m(this,"resetDatabaseConfirmation","");m(this,"showResetSection",!1)}get settings(){return this.queries.settings.response}get version(){return this.queries.version.response}get settingsSections(){if(!this.settings)return[];const e=C(v({},this.settings),{base:{}});return Object.entries(e).forEach(([s,n])=>{this.objectCheck(n)?e[s]=n:(e.base[s]=n,delete e[s])}),this.flatten(Object.entries(e)).sort((s,n)=>s.key.toUpperCase().localeCompare(n.key.toUpperCase()))}async resetDatabase(){const e=await O.query({endpoint:x.database_clear,body:{confirm:!0}}).fetch();this.showToast({type:e.error?"error":"success",message:e.error?e.error:"Database reset"})}showToast(e){this.$toast(C(v({},e),{timeout:5e3}))}objectCheck(e){return e&&typeof e=="object"&&!Array.isArray(e)}flatten(e){return e.reduce((s,[n,i])=>{const l={key:n,content:void 0};return this.objectCheck(i)?l.content=this.flatten(Object.entries(i)):l.content=i,s.push(l),s},[])}};j=X([U({components:{ColorSchemeSelect:M}})],j);const G=j,d=t=>(T("data-v-f9b51eba"),t=t(),z(),t),J={class:"d-flex align-center justify-space-between mt-2"},K=d(()=>o("span",{class:"d-flex align-center"},[o("i",{class:"pi pi-settings-3-line pi-2x text--grey-40"}),o("h1",{class:"ml-1"},"Settings")],-1)),Q={class:"font-weight-semibold"},W=d(()=>o("span",{class:"text--grey-40"},"Orion Version:",-1)),Y={class:"ml-1"},Z={class:"mt-4"},ee=d(()=>o("h3",{class:"font-weight-semibold my-1"}," Color theme ",-1)),te={class:"font-weight-semibold setting--section-title my-1"},se={class:"setting--section-content font--secondary caption"},oe={class:"pa-2"},ne={key:0},ie={class:"ml-1"},ae={key:1},re={class:"ml-1"},le={class:"my-4"},ce=d(()=>o("h3",{class:"font-weight-semibold"}," Reset database ",-1)),de=d(()=>o("div",{class:"d-flex align-end my-1 text--error"},[o("i",{class:"pi pi-error-warning-line pi-lg"}),o("span",{class:"ml-1"}," Resetting the database will permanently delete all data stored in Orion ")],-1)),pe=u(" Reset "),he={key:1},_e=d(()=>o("div",null," Are you sure you want to permanently delete your data? ",-1)),ue=d(()=>o("div",null,[u(" If so, type the word "),o("span",{class:"text--error"},"CONFIRM"),u(" to proceed. ")],-1)),me=u(" Reset Database "),ye=u(" Cancel ");function fe(t,e,s,n,i,l){const h=R("ColorSchemeSelect"),f=R("m-button"),$=R("m-input");return a(),r("div",null,[o("header",J,[K,o("span",Q,[W,o("span",Y,p(t.version),1)])]),o("section",Z,[ee,y(h)]),(a(!0),r(w,null,S(t.settingsSections,c=>(a(),r("section",{key:c.label,class:"mt-4 setting--section my-2"},[o("h3",te,p(c.key),1),o("section",se,[o("div",oe,[(a(!0),r(w,null,S(c.content,_=>(a(),r("div",{key:_.key},[Array.isArray(_.content)?(a(),r("div",ne,[(a(!0),r(w,null,S(_.content,b=>(a(),r("section",{key:b.key,class:"setting--section-subsection"},[o("span",null,p(b.key)+":",1),o("span",ie,p(b.content),1)]))),128))])):(a(),r("div",ae,[o("span",null,p(_.key)+":",1),o("span",re,p(_.content),1)]))]))),128))])])]))),128)),o("section",le,[ce,de,t.showResetSection?V("",!0):(a(),B(f,{key:0,color:"delete",height:"36px",width:"100px",class:"mt-1",miter:"",onClick:e[0]||(e[0]=c=>t.showResetSection=!0)},{default:k(()=>[pe]),_:1})),t.showResetSection?(a(),r("section",he,[_e,ue,y($,{modelValue:t.resetDatabaseConfirmation,"onUpdate:modelValue":e[1]||(e[1]=c=>t.resetDatabaseConfirmation=c),placeholder:"CONFIRM",class:"my-2",style:{"max-width":"400px"}},null,8,["modelValue"]),o("div",null,[y(f,{color:"delete",height:"36px",disabled:t.resetDatabaseConfirmation!=="CONFIRM",miter:"",onClick:t.resetDatabase},{default:k(()=>[me]),_:1},8,["disabled","onClick"]),y(f,{color:"secondary",height:"36px",width:"100px",class:"ml-2",miter:"",onClick:e[2]||(e[2]=c=>t.showResetSection=!1)},{default:k(()=>[ye]),_:1})])])):V("",!0)])])}var ve=P(G,[["render",fe],["__scopeId","data-v-f9b51eba"]]);export{ve as default};
