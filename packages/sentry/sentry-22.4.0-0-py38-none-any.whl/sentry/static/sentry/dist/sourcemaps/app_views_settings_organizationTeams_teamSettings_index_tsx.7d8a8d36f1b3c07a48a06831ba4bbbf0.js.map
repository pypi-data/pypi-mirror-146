{"version":3,"file":"chunks/app_views_settings_organizationTeams_teamSettings_index_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/data/forms/teamSettingsFields.tsx","webpack:///./app/utils/slugify.tsx","webpack:///./app/views/asyncView.tsx","webpack:///./app/views/settings/organizationTeams/teamSettings/model.tsx","webpack:///./app/views/settings/organizationTeams/teamSettings/index.tsx"],"sourcesContent":["import {JsonFormObject} from 'sentry/components/forms/type';\nimport {t} from 'sentry/locale';\nimport slugify from 'sentry/utils/slugify';\n\n// Export route to make these forms searchable by label/help\nexport const route = '/settings/:orgId/teams/:teamId/settings/';\n\nconst formGroups: JsonFormObject[] = [\n  {\n    // Form \"section\"/\"panel\"\n    title: 'Team Settings',\n    fields: [\n      {\n        name: 'slug',\n        type: 'string',\n        required: true,\n        label: t('Name'),\n        placeholder: 'e.g. api-team',\n        help: t('A unique ID used to identify the team'),\n        disabled: ({access}) => !access.has('team:write'),\n        transformInput: slugify,\n\n        saveOnBlur: false,\n        saveMessageAlertType: 'info',\n        saveMessage: t('You will be redirected to the new team slug after saving'),\n      },\n    ],\n  },\n];\n\nexport default formGroups;\n","// XXX: This is NOT an exhaustive slugify function\n// Only forces lowercase and replaces spaces with hyphens\nexport default function slugify(str: any): string {\n  return typeof str === 'string' ? str.toLowerCase().replace(' ', '-') : '';\n}\n","import * as React from 'react';\n\nimport AsyncComponent from 'sentry/components/asyncComponent';\nimport SentryDocumentTitle from 'sentry/components/sentryDocumentTitle';\n\ntype AsyncViewState = AsyncComponent['state'];\ntype AsyncViewProps = AsyncComponent['props'];\n\nexport default class AsyncView<\n  P extends AsyncViewProps = AsyncViewProps,\n  S extends AsyncViewState = AsyncViewState\n> extends AsyncComponent<P, S> {\n  getTitle() {\n    return '';\n  }\n\n  render() {\n    return (\n      <SentryDocumentTitle title={this.getTitle()}>\n        {this.renderComponent() as React.ReactChild}\n      </SentryDocumentTitle>\n    );\n  }\n}\n","import {updateTeam} from 'sentry/actionCreators/teams';\nimport FormModel from 'sentry/components/forms/model';\n\nclass TeamFormModel extends FormModel {\n  public orgId: string;\n  public teamId: string;\n\n  constructor(orgId: string, teamId: string) {\n    super();\n    this.orgId = orgId;\n    this.teamId = teamId;\n  }\n\n  doApiRequest({data}) {\n    return new Promise((resolve, reject) =>\n      updateTeam(\n        this.api,\n        {\n          orgId: this.orgId,\n          teamId: this.teamId,\n          data,\n        },\n        {\n          success: resolve,\n          error: reject,\n        }\n      )\n    );\n  }\n}\n\nexport default TeamFormModel;\n","import {Fragment} from 'react';\nimport {browserHistory, RouteComponentProps} from 'react-router';\n\nimport {addErrorMessage, addSuccessMessage} from 'sentry/actionCreators/indicator';\nimport {removeTeam, updateTeamSuccess} from 'sentry/actionCreators/teams';\nimport Button from 'sentry/components/button';\nimport Confirm from 'sentry/components/confirm';\nimport Field from 'sentry/components/forms/field';\nimport Form from 'sentry/components/forms/form';\nimport JsonForm from 'sentry/components/forms/jsonForm';\nimport FormModel from 'sentry/components/forms/model';\nimport {Panel, PanelHeader} from 'sentry/components/panels';\nimport teamSettingsFields from 'sentry/data/forms/teamSettingsFields';\nimport {IconDelete} from 'sentry/icons';\nimport {t, tct} from 'sentry/locale';\nimport {Organization, Scope, Team} from 'sentry/types';\nimport withOrganization from 'sentry/utils/withOrganization';\nimport AsyncView from 'sentry/views/asyncView';\n\nimport TeamModel from './model';\n\ntype Props = RouteComponentProps<{orgId: string; teamId: string}, {}> & {\n  organization: Organization;\n  team: Team;\n};\n\ntype State = AsyncView['state'];\n\nclass TeamSettings extends AsyncView<Props, State> {\n  model = new TeamModel(this.props.params.orgId, this.props.params.teamId);\n\n  getTitle() {\n    return 'Team Settings';\n  }\n\n  getEndpoints() {\n    return [];\n  }\n\n  handleSubmitSuccess = (resp: any, model: FormModel, id?: string) => {\n    updateTeamSuccess(resp.slug, resp);\n    if (id === 'slug') {\n      addSuccessMessage(t('Team name changed'));\n      browserHistory.replace(\n        `/settings/${this.props.params.orgId}/teams/${model.getValue(id)}/settings/`\n      );\n      this.setState({loading: true});\n    }\n  };\n\n  handleRemoveTeam = async () => {\n    await removeTeam(this.api, this.props.params);\n    browserHistory.replace(`/settings/${this.props.params.orgId}/teams/`);\n  };\n\n  renderBody() {\n    const {organization, team} = this.props;\n\n    const access = new Set<Scope>(organization.access);\n\n    return (\n      <Fragment>\n        <Form\n          model={this.model}\n          apiMethod=\"PUT\"\n          saveOnBlur\n          allowUndo\n          onSubmitSuccess={this.handleSubmitSuccess}\n          onSubmitError={() => addErrorMessage(t('Unable to save change'))}\n          initialData={{\n            name: team.name,\n            slug: team.slug,\n          }}\n        >\n          <JsonForm access={access} forms={teamSettingsFields} />\n        </Form>\n\n        <Panel>\n          <PanelHeader>{t('Remove Team')}</PanelHeader>\n          <Field\n            help={t(\n              \"This may affect team members' access to projects and associated alert delivery.\"\n            )}\n          >\n            <div>\n              <Confirm\n                disabled={!access.has('team:admin')}\n                onConfirm={this.handleRemoveTeam}\n                priority=\"danger\"\n                message={tct('Are you sure you want to remove the team [team]?', {\n                  team: `#${team.slug}`,\n                })}\n              >\n                <Button\n                  icon={<IconDelete />}\n                  priority=\"danger\"\n                  disabled={!access.has('team:admin')}\n                >\n                  {t('Remove Team')}\n                </Button>\n              </Confirm>\n            </div>\n          </Field>\n        </Panel>\n      </Fragment>\n    );\n  }\n}\nexport default withOrganization(TeamSettings);\n"],"names":["route","title","fields","name","type","required","label","t","placeholder","help","disabled","access","has","transformInput","slugify","saveOnBlur","saveMessageAlertType","saveMessage","str","toLowerCase","replace","AsyncView","AsyncComponent","getTitle","render","this","renderComponent","TeamFormModel","FormModel","constructor","orgId","teamId","super","doApiRequest","data","Promise","resolve","reject","updateTeam","api","success","error","TeamSettings","TeamModel","props","params","resp","model","id","updateTeamSuccess","slug","addSuccessMessage","browserHistory","getValue","setState","loading","async","removeTeam","getEndpoints","renderBody","organization","team","Set","Fragment","apiMethod","allowUndo","onSubmitSuccess","handleSubmitSuccess","onSubmitError","addErrorMessage","initialData","forms","teamSettingsFields","onConfirm","handleRemoveTeam","priority","message","tct","icon","withOrganization"],"sourceRoot":""}