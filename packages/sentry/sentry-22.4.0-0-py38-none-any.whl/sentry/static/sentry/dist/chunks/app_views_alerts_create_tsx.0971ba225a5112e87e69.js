"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_alerts_create_tsx"],{"./app/views/alerts/create.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js")),i=s("./app/components/layouts/thirds.tsx"),n=s("./app/components/loadingIndicator.tsx"),l=s("./app/components/sentryDocumentTitle.tsx"),p=s("./app/locale.tsx"),d=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),u=s("./app/utils/discover/eventView.tsx"),c=s("./app/utils/guid.tsx"),m=s("./app/utils/teams.tsx"),g=s("./app/views/alerts/builder/builderBreadCrumbs.tsx"),v=s("./app/utils/analytics.tsx"),h=s("./app/views/alerts/incidentRules/constants.tsx"),w=s("./app/views/alerts/incidentRules/ruleForm/index.tsx"),y=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function x(e){var t;const{project:s,eventView:r,wizardTemplate:a,sessionId:o,userTeamIds:i,...n}=e,l=r?(0,h.H9)(r):a?(0,h.Q6)(a):(0,h.ep)(),p=new Set(s.teams.map((e=>{let{id:t}=e;return t}))),d=null!==(t=i.find((e=>p.has(e))))&&void 0!==t?t:null;return l.owner=d&&`team:${d}`,(0,y.tZ)(w.Z,{onSubmitSuccess:function(t){const{router:s,project:r}=e,{orgId:a}=e.params,o=t?t.id:void 0;v.oF.endTransaction({name:"saveAlertRule"}),s.push(o?{pathname:`/organizations/${a}/alerts/rules/details/${o}/`}:{pathname:`/organizations/${a}/alerts/rules/`,query:{project:r.id}})},rule:{...l,projects:[s.slug]},sessionId:o,project:s,userTeamIds:i,...n})}x.displayName="IncidentRulesCreate";const T=x;var j=s("./app/views/alerts/issueRuleEditor/index.tsx"),I=s("./app/views/alerts/types.tsx"),Z=s("./app/views/alerts/wizard/options.tsx"),b=s("./app/views/alerts/wizard/utils.tsx");class z extends o.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",this.getInitialState()),(0,r.Z)(this,"sessionId",(0,c.E)())}getInitialState(){var e;const{organization:t,location:s,project:r,params:a,router:o}=this.props,{createFromDiscover:i,createFromWizard:n,aggregate:l,dataset:p,eventTypes:d,createFromV3:u}=null!==(e=null==s?void 0:s.query)&&void 0!==e?e:{};let c=I.ok.ISSUE;return t.features.includes("alert-wizard-v3")&&u?(c=a.alertType||I.ok.METRIC,c!==I.ok.METRIC||l&&p&&d||o.replace({...s,pathname:`/organizations/${t.slug}/alerts/new/${c}`,query:{...s.query,...Z.F4,project:r.slug}})):i?c=I.ok.METRIC:n?c=l&&p&&d?I.ok.METRIC:I.ok.ISSUE:o.replace(`/organizations/${t.slug}/alerts/${r.slug}/wizard`),{alertType:c}}componentDidMount(){const{organization:e,project:t}=this.props;(0,d.Z)("new_alert_rule.viewed",{organization:e,project_id:t.id,session_id:this.sessionId,alert_type:this.state.alertType})}render(){var e;const{hasMetricAlerts:t,organization:s,project:r,location:a,routes:d}=this.props,{alertType:c}=this.state,{aggregate:v,dataset:h,eventTypes:w,createFromWizard:x,createFromDiscover:z}=null!==(e=null==a?void 0:a.query)&&void 0!==e?e:{},k={aggregate:null!=v?v:Z.F4.aggregate,dataset:null!=h?h:Z.F4.dataset,eventTypes:null!=w?w:Z.F4.eventTypes},S=z?u.ZP.fromLocation(a):void 0;let F;x&&c===I.ok.METRIC&&(F=k?(0,b.k)(k):"issues");const R=(0,p.t)("New Alert Rule");return(0,y.BX)(o.Fragment,{children:[(0,y.tZ)(l.Z,{title:R,projectSlug:r.slug}),(0,y.tZ)(i.h4,{children:(0,y.BX)(_,{children:[(0,y.tZ)(g.Z,{organization:s,alertName:(0,p.t)("Set Conditions"),title:F?(0,p.t)("Select Alert"):R,projectSlug:r.slug,alertType:c,routes:d,location:a,canChangeProject:!0}),(0,y.tZ)(i.Dx,{children:F?`${(0,p.t)("Set Conditions for")} ${Z.gb[F]}`:R})]})}),(0,y.tZ)(i.uT,{children:(0,y.tZ)(C,{fullWidth:!0,children:(0,y.tZ)(m.Z,{provideUserTeams:!0,children:e=>{let{teams:s,initiallyLoaded:a}=e;return a?(0,y.BX)(o.Fragment,{children:[(!t||"issue"===c)&&(0,y.tZ)(j.Z,{...this.props,project:r,userTeamIds:s.map((e=>{let{id:t}=e;return t}))}),t&&c===I.ok.METRIC&&(0,y.tZ)(T,{...this.props,eventView:S,wizardTemplate:k,sessionId:this.sessionId,project:r,isCustomMetric:"custom"===F,userTeamIds:s.map((e=>{let{id:t}=e;return t}))})]}):(0,y.tZ)(n.Z,{})}})})})]})}}z.displayName="Create";const C=(0,a.Z)(i.or,{target:"ew02uqt1"})({name:"1rxb0gn",styles:"max-width:1000px"}),_=(0,a.Z)(i.oB,{target:"ew02uqt0"})({name:"1h8nup8",styles:"overflow:visible"}),k=z}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_create_tsx.07131e42cd20609b7976dfeb6a22e3cf.js.map