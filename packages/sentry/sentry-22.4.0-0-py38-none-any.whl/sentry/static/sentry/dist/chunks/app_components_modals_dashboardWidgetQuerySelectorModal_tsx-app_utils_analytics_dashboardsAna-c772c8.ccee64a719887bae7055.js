"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_modals_dashboardWidgetQuerySelectorModal_tsx-app_utils_analytics_dashboardsAna-c772c8"],{"./app/actions/organizationActions.tsx":(e,t,r)=>{r.d(t,{Z:()=>s});const s=(0,r("../node_modules/reflux/src/index.js").createActions)(["reset","fetchOrgError","update"])},"./app/actions/projectActions.tsx":(e,t,r)=>{r.d(t,{Z:()=>s});const s=(0,r("../node_modules/reflux/src/index.js").createActions)(["addTeam","addTeamError","addTeamSuccess","changeSlug","createSuccess","loadProjects","loadStats","loadStatsError","loadStatsForProjectSuccess","loadStatsSuccess","removeProject","removeProjectError","removeProjectSuccess","removeTeam","removeTeamError","removeTeamSuccess","reset","setActive","update","updateError","updateSuccess"])},"./app/components/arithmeticInput/parser.tsx":(e,t,r)=>{r.d(t,{W9:()=>h});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=r("./app/locale.tsx"),o=r("./app/components/arithmeticInput/grammar.pegjs"),n=r.n(o);const a=(0,i.t)("Maximum operators exceeded");class d{constructor(e){let{operator:t,lhs:r=null,rhs:i}=e;(0,s.Z)(this,"operator",void 0),(0,s.Z)(this,"lhs",void 0),(0,s.Z)(this,"rhs",void 0),this.operator=t,this.lhs=r,this.rhs=i}}class c{constructor(e){let{term:t,location:r}=e;(0,s.Z)(this,"term",void 0),(0,s.Z)(this,"location",void 0),this.term=t,this.location=r}}class l{constructor(){(0,s.Z)(this,"numOperations",void 0),(0,s.Z)(this,"errors",void 0),(0,s.Z)(this,"fields",void 0),(0,s.Z)(this,"functions",void 0),(0,s.Z)(this,"tokenTerm",((e,t)=>t.length>0?(t[0].lhs=e,u(t)):e)),(0,s.Z)(this,"tokenOperation",((e,t)=>(this.numOperations+=1,this.numOperations>10&&!this.errors.includes(a)&&this.errors.push(a),"divide"===e&&"0"===t&&this.errors.push((0,i.t)("Division by 0 is not allowed")),new d({operator:e,rhs:t})))),(0,s.Z)(this,"tokenFactor",((e,t)=>(t[0].lhs=e,u(t)))),(0,s.Z)(this,"tokenField",((e,t)=>{const r=new c({term:e,location:t});return this.fields.push(r),e})),(0,s.Z)(this,"tokenFunction",((e,t)=>{const r=new c({term:e,location:t});return this.functions.push(r),e})),this.numOperations=0,this.errors=[],this.fields=[],this.functions=[]}}function u(e){let t=e.shift();for(;e.length>0;){const r=e.shift();r&&t&&null===r.lhs&&(r.lhs=t),t=r}if(void 0===t)throw new Error("Unable to parse arithmetic");return t}function h(e){const t=new l;try{return{result:n().parse(e,{tc:t}),error:t.errors[0],tc:t}}catch(e){return{result:null,error:e.message,tc:t}}}},"./app/components/modals/dashboardWidgetQuerySelectorModal.tsx":(e,t,r)=>{r.r(t),r.d(t,{modalCss:()=>A,default:()=>k});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),o=r("../node_modules/react-router/es/index.js"),n=r("./app/components/button.tsx"),a=r("./app/components/forms/controls/input.tsx"),d=r("./app/icons/index.tsx"),c=r("./app/locale.tsx"),l=r("./app/styles/space.tsx"),u=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),h=r("./app/utils/discover/types.tsx"),p=r("./app/utils/withApi.tsx"),g=r("./app/utils/withPageFilters.tsx"),m=r("./app/views/dashboardsV2/types.tsx"),_=r("./app/views/dashboardsV2/utils.tsx"),v=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class w extends i.Component{renderQueries(){const{organization:e,widget:t,selection:r}=this.props;return t.queries.map(((s,n)=>{const a=(0,_.tT)(t.title,s,r,t.displayType),l=a.getResultsViewUrlTarget(e.slug),p=a.getYAxisOptions().map((e=>{let{value:t}=e;return t}));return l.query.yAxis=[...new Set(s.aggregates.filter((e=>p.includes(e))))].slice(0,3),t.displayType===m.FO.BAR&&(l.query.display=h.DC.BAR),(0,v.tZ)(i.Fragment,{children:(0,v.BX)(b,{children:[(0,v.BX)(S,{children:[(0,v.tZ)(x,{htmlFor:"smart-search-input","aria-label":(0,c.t)("Search events"),children:(0,v.tZ)(d.jV,{})}),(0,v.tZ)(f,{value:s.conditions,disabled:!0})]}),(0,v.tZ)(o.Link,{to:l,children:(0,v.tZ)(y,{priority:"primary",icon:(0,v.tZ)(d.g6,{size:"xs",direction:"right"}),onClick:()=>{(0,u.Z)("dashboards_views.query_selector.selected",{organization:e,widget_type:t.displayType})},"aria-label":(0,c.t)("Open in Discover")})})]})},n)}))}render(){const{Body:e,Header:t,widget:r}=this.props;return(0,v.BX)(i.Fragment,{children:[(0,v.tZ)(t,{closeButton:!0,children:(0,v.tZ)("h4",{children:r.title})}),(0,v.BX)(e,{children:[(0,v.tZ)("p",{children:(0,c.t)("Multiple queries were used to create this widget visualization. Which query would you like to view in Discover?")}),this.renderQueries()]})]})}}w.displayName="DashboardWidgetQuerySelectorModal";const f=(0,s.Z)(a.Z,{target:"e10oo76w4"})({name:"97snz3",styles:"text-overflow:ellipsis;padding:0px;box-shadow:none;height:auto;&:disabled{border:none;cursor:default;}"}),b=(0,s.Z)("div",{target:"e10oo76w3"})("display:flex;margin-bottom:",(0,l.Z)(1),";"),y=(0,s.Z)(n.ZP,{target:"e10oo76w2"})("margin-left:",(0,l.Z)(1),";"),S=(0,s.Z)("div",{target:"e10oo76w1"})("border:1px solid ",(e=>e.theme.border),";box-shadow:inset ",(e=>e.theme.dropShadowLight),";background:",(e=>e.theme.backgroundSecondary),";padding:7px ",(0,l.Z)(1),";position:relative;display:grid;grid-template-columns:max-content 1fr max-content;gap:",(0,l.Z)(1),";align-items:start;flex-grow:1;border-radius:",(e=>e.theme.borderRadius),";"),x=(0,s.Z)("label",{target:"e10oo76w0"})("display:flex;padding:",(0,l.Z)(.5)," 0;margin:0;color:",(e=>e.theme.gray300),";"),A={name:"l07bt5",styles:"width:100%;max-width:700px;margin:70px auto"},k=(0,p.Z)((0,g.Z)(w))},"./app/stores/organizationStore.tsx":(e,t,r)=>{r.d(t,{Z:()=>d}),r("../node_modules/core-js/modules/es.string.replace.js");var s=r("../node_modules/reflux/src/index.js"),i=r("./app/actions/organizationActions.tsx"),o=r("./app/constants/index.tsx"),n=r("./app/utils/makeSafeRefluxStore.ts");const a={unsubscribeListeners:[],init(){this.reset(),this.unsubscribeListeners.push(this.listenTo(i.Z.update,this.onUpdate)),this.unsubscribeListeners.push(this.listenTo(i.Z.reset,this.reset)),this.unsubscribeListeners.push(this.listenTo(i.Z.fetchOrgError,this.onFetchOrgError))},reset(){this.loading=!0,this.error=null,this.errorType=null,this.organization=null,this.dirty=!1,this.trigger(this.get())},onUpdate(e){let{replace:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!1,this.error=null,this.errorType=null,this.organization=t?e:{...this.organization,...e},this.dirty=!1,this.trigger(this.get())},onFetchOrgError(e){switch(this.organization=null,this.errorType=null,null==e?void 0:e.status){case 401:this.errorType=o.Yc.ORG_NO_ACCESS;break;case 404:this.errorType=o.Yc.ORG_NOT_FOUND}this.loading=!1,this.error=e,this.dirty=!1,this.trigger(this.get())},get(){return{organization:this.organization,error:this.error,loading:this.loading,errorType:this.errorType,dirty:this.dirty}},getState(){return this.get()}},d=(0,s.createStore)((0,n.Y)(a))},"./app/stores/projectsStore.tsx":(e,t,r)=>{r.d(t,{Z:()=>d}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var s=r("../node_modules/reflux/src/index.js"),i=r("./app/actions/projectActions.tsx"),o=r("./app/actions/teamActions.tsx"),n=r("./app/utils/makeSafeRefluxStore.ts");const a={itemsById:{},loading:!0,unsubscribeListeners:[],init(){this.reset(),this.unsubscribeListeners.push(this.listenTo(i.Z.addTeamSuccess,this.onAddTeam)),this.unsubscribeListeners.push(this.listenTo(i.Z.changeSlug,this.onChangeSlug)),this.unsubscribeListeners.push(this.listenTo(i.Z.createSuccess,this.onCreateSuccess)),this.unsubscribeListeners.push(this.listenTo(i.Z.loadProjects,this.loadInitialData)),this.unsubscribeListeners.push(this.listenTo(i.Z.loadStatsSuccess,this.onStatsLoadSuccess)),this.unsubscribeListeners.push(this.listenTo(i.Z.removeTeamSuccess,this.onRemoveTeam)),this.unsubscribeListeners.push(this.listenTo(i.Z.reset,this.reset)),this.unsubscribeListeners.push(this.listenTo(i.Z.updateSuccess,this.onUpdateSuccess)),this.unsubscribeListeners.push(this.listenTo(o.Z.removeTeamSuccess,this.onDeleteTeam))},reset(){this.itemsById={},this.loading=!0},loadInitialData(e){const t=e.map((e=>[e.id,e]));this.itemsById=Object.fromEntries(t),this.loading=!1,this.trigger(new Set(Object.keys(this.itemsById)))},onChangeSlug(e,t){const r=this.getBySlug(e);if(!r)return;const s={...r,slug:t};this.itemsById={...this.itemsById,[s.id]:s},this.trigger(new Set([r.id]))},onCreateSuccess(e){this.itemsById={...this.itemsById,[e.id]:e},this.trigger(new Set([e.id]))},onUpdateSuccess(e){const t=this.getById(e.id);if(!t)return;const r={...t,...e};this.itemsById={...this.itemsById,[t.id]:r},this.trigger(new Set([e.id]))},onStatsLoadSuccess(e){const t=Object.entries(e||{}).filter((e=>{let[t]=e;return t in this.itemsById}));t.forEach((e=>{let[t,r]=e;this.itemsById[t].stats=r}));const r=t.map((e=>{let[t]=e;return t}));this.trigger(new Set(r))},onDeleteTeam(e){const t=this.getAll().filter((t=>{let{teams:r}=t;return r.find((t=>{let{slug:r}=t;return r===e}))}));t.forEach((t=>this.removeTeamFromProject(e,t)));const r=t.map((e=>e.id));this.trigger(new Set(r))},onRemoveTeam(e,t){const r=this.getBySlug(t);r&&(this.removeTeamFromProject(e,r),this.trigger(new Set([r.id])))},onAddTeam(e,t){const r=this.getBySlug(t);if(!r)return;const s={...r,teams:[...r.teams,e]};this.itemsById={...this.itemsById,[r.id]:s},this.trigger(new Set([r.id]))},removeTeamFromProject(e,t){const r=t.teams.filter((t=>{let{slug:r}=t;return r!==e})),s={...t,teams:r};this.itemsById={...this.itemsById,[t.id]:s}},isLoading(){return this.loading},getAll(){return Object.values(this.itemsById).sort(((e,t)=>e.slug.localeCompare(t.slug)))},getById(e){return this.getAll().find((t=>t.id===e))},getBySlug(e){return this.getAll().find((t=>t.slug===e))},getState(){return{projects:this.getAll(),loading:this.loading}}},d=(0,s.createStore)((0,n.Y)(a))},"./app/utils/analytics/dashboardsAnalyticsEvents.tsx":(e,t,r)=>{r.d(t,{Q:()=>s});const s={"dashboards_views.query_selector.opened":"Dashboards2: Query Selector opened for Widget","dashboards_views.query_selector.selected":"Dashboards2: Query selected in Query Selector","dashboards_views.open_in_discover.opened":"Dashboards2: Widget Opened In Discover","dashboards_views.widget_library.add":"Dashboards2: Number of prebuilt widgets added","dashboards_views.widget_library.add_widget":"Dashboards2: Title of prebuilt widget added","dashboards_views.widget_library.switch_tab":"Dashboards2: Widget Library tab switched","dashboards_views.widget_library.opened":"Dashboards2: Add Widget Library opened","dashboards_manage.search":"Dashboards Manager: Search","dashboards_manage.change_sort":"Dashboards Manager: Sort By Changed","dashboards_manage.create.start":"Dashboards Manager: Dashboard Create Started","dashboards_manage.templates.toggle":"Dashboards Manager: Template Toggle Changed","dashboards_manage.templates.add":"Dashboards Manager: Template Added","dashboards_manage.templates.preview":"Dashboards Manager: Template Previewed","dashboards_views.widget_viewer.edit":"Widget Viewer: Edit Widget Modal Opened","dashboards_views.widget_viewer.open":"Widget Viewer: Opened","dashboards_views.widget_viewer.open_source":"Widget Viewer: Opened in Discover/Issues","dashboards_views.widget_viewer.paginate":"Widget Viewer: Paginate","dashboards_views.widget_viewer.select_query":"Widget Viewer: Query Selected","dashboards_views.widget_viewer.sort":"Widget Viewer: Table Sorted","dashboards_views.widget_viewer.toggle_legend":"Widget Viewer: Legend Toggled","dashboards_views.widget_viewer.zoom":"Widget Viewer: Chart zoomed","dashboards_views.edit_widget_modal.confirm":"Dashboards2: Edit Dashboard Widget modal form submitted","dashboards_views.edit_widget_modal.opened":"Dashboards2: Edit Widget Modal Opened","dashboards_views.add_widget_modal.opened":"Dashboards2: Add Widget Modal opened","dashboards_views.add_widget_modal.change":"Dashboards2: Field changed in Add Widget Modal","dashboards_views.add_widget_modal.confirm":"Dashboards2: Add Widget to Dashboard modal form submitted","dashboards_views.add_widget_modal.save":"Dashboards2: Widget saved directly to Dashboard from Add Widget to Dashboard modal","dashboards_views.widget_builder.change":"Widget Builder: Field changed","dashboards_views.widget_builder.save":"Widget Builder: Form submitted","dashboards_views.widget_builder.opened":"Widget Builder: Page opened"}},"./app/utils/analytics/discoverAnalyticsEvents.tsx":(e,t,r)=>{r.d(t,{J:()=>s});const s={"discover_views.add_to_dashboard.modal_open":"Discover2: Add to Dashboard modal opened","discover_views.add_to_dashboard.confirm":"Discover2: Add to Dashboard modal form submitted"}},"./app/utils/analytics/growthAnalyticsEvents.tsx":(e,t,r)=>{r.d(t,{Y:()=>s});const s={"growth.clicked_mobile_prompt_setup_project":"Growth: Clicked Mobile Prompt Setup Project","growth.clicked_mobile_prompt_ask_teammate":"Growth: Clicked Mobile Prompt Ask Teammate","growth.submitted_mobile_prompt_ask_teammate":"Growth: Submitted Mobile Prompt Ask Teammate","growth.demo_click_get_started":"Growth: Demo Click Get Started","growth.demo_click_docs":"Growth: Demo Click Docs","growth.demo_click_request_demo":"Growth: Demo Click Request Demo","growth.onboarding_load_choose_platform":"Growth: Onboarding Load Choose Platform Page","growth.onboarding_set_up_your_project":"Growth: Onboarding Click Set Up Your Project","growth.onboarding_set_up_your_projects":"Growth: Onboarding Click Set Up Your Projects","growth.select_platform":"Growth: Onboarding Choose Platform","growth.platformpicker_category":"Growth: Onboarding Platform Category","growth.platformpicker_search":"Growth: Onboarding Platform Search","growth.onboarding_start_onboarding":"Growth: Onboarding Start Onboarding","growth.onboarding_clicked_skip":"Growth: Onboarding Clicked Skip","growth.onboarding_take_to_error":"Growth: Onboarding Take to Error","growth.onboarding_view_full_docs":"Growth: Onboarding View Full Docs","growth.onboarding_view_sample_event":"Growth: Onboarding View Sample Event","growth.onboarding_clicked_instrument_app":"Growth: Onboarding Clicked Instrument App","growth.onboarding_clicked_setup_platform_later":"Growth: Onboarding Clicked Setup Platform Later","invite_request.approved":"Invite Request Approved","invite_request.denied":"Invite Request Denied","growth.demo_modal_clicked_signup":"Growth: Demo Modal Clicked Signup","growth.demo_modal_clicked_continue":"Growth: Demo Modal Clicked Continue","growth.clicked_enter_sandbox":"Growth: Clicked Enter Sandbox","growth.onboarding_clicked_project_in_sidebar":"Growth: Clicked Project Sidebar","growth.sample_transaction_docs_link_clicked":"Growth: Sample Transaction Docs Link Clicked","growth.sample_error_onboarding_link_clicked":"Growth: Sample Error Onboarding Link Clicked","growth.issue_open_in_discover_btn_clicked":"Growth: Open in Discover Button in Issue Details clicked","member_settings_page.loaded":"Member Settings Page Loaded","invite_modal.opened":"Invite Modal: Opened","invite_modal.closed":"Invite Modal: Closed","invite_modal.add_more":"Invite Modal: Add More","invite_modal.invites_sent":"Invite Modal: Invites Sent","invite_modal.requests_sent":"Invite Modal: Requests Sent","sdk_updates.seen":"SDK Updates: Seen","sdk_updates.snoozed":"SDK Updates: Snoozed","sdk_updates.clicked":"SDK Updates: Clicked"}},"./app/utils/analytics/issueAnalyticsEvents.tsx":(e,t,r)=>{r.d(t,{d:()=>s});const s={"event_cause.viewed":null,"event_cause.docs_clicked":"Event Cause Docs Clicked","event_cause.snoozed":"Event Cause Snoozed","event_cause.dismissed":"Event Cause Dismissed","issue_error_banner.viewed":"Issue Error Banner Viewed","issues_tab.viewed":"Viewed Issues Tab","issue_search.failed":"Issue Search: Failed","issue.search_sidebar_clicked":"Issue Search Sidebar Clicked","inbox_tab.issue_clicked":"Clicked Issue from Inbox Tab","issues_stream.issue_clicked":"Clicked Issue from Issues Stream","issues_stream.issue_assigned":"Assigned Issue from Issues Stream","issue.shared_publicly":"Issue Shared Publicly",resolve_issue:"Resolve Issue","tag.clicked":"Tag: Clicked"}},"./app/utils/analytics/performanceAnalyticsEvents.tsx":(e,t,r)=>{r.d(t,{K:()=>s});const s={"performance_views.create_sample_transaction":"Growth: Performance Sample Transaction","performance_views.tour.start":"Performance Views: Tour Start","performance_views.tour.advance":"Performance Views: Tour Advance","performance_views.tour.close":"Performance Views: Tour Close","performance_views.landingv2.transactions.sort":"Performance Views: Landing Transactions Sorted","performance_views.overview.navigate.summary":"Performance Views: Overview view summary","performance_views.overview.cellaction":"Performance Views: Cell Action Clicked","performance_views.landingv3.widget.interaction":"Performance Views: Landing Widget Interaction","performance_views.landingv3.widget.switch":"Performance Views: Landing Widget Switched","performance_views.landingv3.batch_queries":"Performance Views: Landing Query Batching","performance_views.landingv3.display_change":"Performance Views: Switch Landing Tabs","performance_views.span_summary.change_chart":"Performance Views: Span Summary displayed chart changed","performance_views.spans.change_op":"Performance Views: Change span operation name","performance_views.spans.change_sort":"Performance Views: Change span sort column","performance_views.overview.view":"Performance Views: Transaction overview view","performance_views.overview.search":"Performance Views: Transaction overview search"}},"./app/utils/analytics/searchAnalyticsEvents.tsx":(e,t,r)=>{r.d(t,{Y:()=>s});const s={"search.searched":"Search: Performed search","search.operator_autocompleted":"Search: Operator Autocompleted","organization_saved_search.selected":"Organization Saved Search: Selected saved search","settings_search.open":"settings_search Open","command_palette.open":"command_palette Open","sidebar_help.open":"sidebar_help Open","settings_search.select":"settings_search Select","command_palette.select":"command_palette Select","sidebar_help.select":"sidebar_help Select","settings_search.query":"settings_search Query","command_palette.query":"command_palette Query","sidebar_help.query":"sidebar_help Query","projectselector.direct_selection":"Project Selector: Direct Selection","projectselector.update":"Project Selector: Update","projectselector.clear":"Project Selector: Clear","projectselector.toggle":"Project Selector: Toggle","projectselector.multi_button_clicked":"Project Selector: Multi Button Clicked"}},"./app/utils/analytics/settingsAnalyticsEvents.tsx":(e,t,r)=>{r.d(t,{$:()=>s});const s={"notification_settings.index_page_viewed":"Notification Settings: Index Page Viewed","notification_settings.tuning_page_viewed":"Notification Settings: Tuning Page Viewed","notification_settings.updated_tuning_setting":"Notification Settings: Updated Tuning Setting"}},"./app/utils/analytics/workflowAnalyticsEvents.tsx":(e,t,r)=>{r.d(t,{H:()=>s});const s={"alert_builder.filter":"Alert Builder: Filter","alert_details.viewed":"Alert Details: Viewed","alert_rule_details.viewed":"Alert Rule Details: Viewed","alert_rules.viewed":"Alert Rules: Viewed","alert_stream.viewed":"Alert Stream: Viewed","alert_wizard.option_selected":"Alert Wizard: Option Selected","alert_wizard.option_viewed":"Alert Wizard: Option Viewed","edit_alert_rule.add_row":"Edit Alert Rule: Add Row","edit_alert_rule.viewed":"Edit Alert Rule: Viewed","issue_alert_rule_details.edit_clicked":"Issue Alert Rule Details: Edit Clicked","issue_alert_rule_details.viewed":"Issue Alert Rule Details: Viewed","issue_details.viewed":"Issue Details: Viewed","issue_details.action_clicked":"Issue Details: Action Clicked","new_alert_rule.viewed":"New Alert Rule: Viewed","team_insights.viewed":"Team Insights: Viewed"}},"./app/utils/parseLinkHeader.tsx":(e,t,r)=>{function s(e){if(null===e||""===e)return{};const t=e.split(","),r={};return t.forEach((e=>{const t=/<([^>]+)>; rel="([^"]+)"(?:; results="([^"]+)")?(?:; cursor="([^"]+)")?/g.exec(e),s="true"===t[3]||"false"!==t[3]&&null;r[t[2]]={href:t[1],results:s,cursor:t[4]}})),r}r.d(t,{Z:()=>s})},"./app/utils/useApi.tsx":(e,t,r)=>{r.d(t,{Z:()=>o});var s=r("../node_modules/react/index.js"),i=r("./app/api.tsx");const o=function(){let{persistInFlight:e,api:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=(0,s.useRef)();void 0===r.current&&void 0===t&&(r.current=new i.KU);const o=null!=t?t:r.current;function n(){!e&&o.clear()}return(0,s.useEffect)((()=>n),[]),o}},"./app/utils/useProjects.tsx":(e,t,r)=>{r.d(t,{Z:()=>p}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var s=r("../node_modules/react/index.js"),i=r("../node_modules/lodash/uniqBy.js"),o=r.n(i),n=r("./app/actions/projectActions.tsx"),a=r("./app/stores/organizationStore.tsx"),d=r("./app/stores/projectsStore.tsx"),c=r("./app/stores/useLegacyStore.tsx"),l=r("./app/utils/parseLinkHeader.tsx"),u=r("./app/utils/useApi.tsx");async function h(e,t){let{slugs:r,search:s,limit:i,lastSearch:o,cursor:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a={collapse:["latestDeploys"]};var d;void 0!==r&&r.length>0&&(a.query=r.map((e=>`slug:${e}`)).join(" ")),s&&(a.query=`${null!==(d=a.query)&&void 0!==d?d:""}${s}`.trim());const c=!o&&!s||o===s;c&&n&&(a.cursor=n),void 0!==i&&(a.per_page=i);let u=!1,h=null;const[p,,g]=await e.requestPromise(`/organizations/${t}/projects/`,{includeAllArgs:!0,query:a}),m=null==g?void 0:g.getResponseHeader("Link");if(m){var _,v,w;const e=(0,l.Z)(m);u=(null==e||null===(_=e.next)||void 0===_?void 0:_.results)||(null==e||null===(v=e.previous)||void 0===v?void 0:v.results),h=null==e||null===(w=e.next)||void 0===w?void 0:w.cursor}return{results:p,hasMore:u,nextCursor:h}}const p=function(){var e;let{limit:t,slugs:r,orgId:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const l=(0,u.Z)(),{organization:p}=(0,c.X)(a.Z),g=(0,c.X)(d.Z),m=null!=i?i:null==p?void 0:p.slug,_=new Set(g.projects.map((e=>e.slug))),v=null!==(e=null==r?void 0:r.filter((e=>!_.has(e))))&&void 0!==e?e:[],w=v.length>0,[f,b]=(0,s.useState)({initiallyLoaded:!g.loading&&!w,fetching:w,hasMore:null,lastSearch:null,nextCursor:null,fetchError:null}),y=(0,s.useRef)(null);async function S(){if(void 0!==m){b({...f,fetching:!0});try{const{results:e,hasMore:r,nextCursor:s}=await h(l,m,{slugs:v,limit:t}),i=o()([...g.projects,...e],(e=>{let{slug:t}=e;return t}));n.Z.loadProjects(i),b({...f,hasMore:r,fetching:!1,initiallyLoaded:!0,nextCursor:s})}catch(e){console.error(e),b({...f,fetching:!1,initiallyLoaded:!g.loading,fetchError:e})}}else console.error("Cannot use useProjects({slugs}) without an organization in context")}async function x(e){const{lastSearch:r}=f,s=f.nextCursor;if(""!==e)if(void 0!==m){b({...f,fetching:!0});try{l.clear();const{results:i,hasMore:a,nextCursor:d}=await h(l,m,{search:e,limit:t,lastSearch:r,cursor:s}),c=o()([...g.projects,...i],(e=>{let{slug:t}=e;return t}));c.length>g.projects.length&&n.Z.loadProjects(c),b({...f,hasMore:a,fetching:!1,lastSearch:e,nextCursor:d})}catch(e){console.error(e),b({...f,fetching:!1,fetchError:e})}}else console.error("Cannot use useProjects.onSearch without an organization in context")}void 0!==r&&(null===y.current&&(y.current=new Set(r)),(r.length!==y.current.size||r.some((e=>{var t;return!(null!==(t=y.current)&&void 0!==t&&t.has(e))})))&&(y.current=new Set(r))),(0,s.useEffect)((()=>{w&&S()}),[y.current]),(0,s.useEffect)((()=>{const e=!g.loading;f.initiallyLoaded!==e&&(w||b({...f,initiallyLoaded:e}))}),[g.loading]);const{initiallyLoaded:A,fetching:k,fetchError:j,hasMore:T}=f,C=r?g.projects.filter((e=>r.includes(e.slug))):g.projects,Z=v.map((e=>({slug:e}))),D={projects:C,placeholders:Z,fetching:k||g.loading,initiallyLoaded:A,fetchError:j,hasMore:T,onSearch:x};return D}},"./app/utils/withApi.tsx":(e,t,r)=>{r.d(t,{Z:()=>n});var s=r("./app/utils/getDisplayName.tsx"),i=r("./app/utils/useApi.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=r=>{let{api:s,...n}=r;const a=(0,i.Z)({api:s,...t});return(0,o.tZ)(e,{...n,api:a})};return r.displayName=`withApi(${(0,s.Z)(e)})`,r}},"./app/utils/withProjects.tsx":(e,t,r)=>{r.d(t,{Z:()=>n}),r("../node_modules/react/index.js");var s=r("./app/utils/getDisplayName.tsx"),i=r("./app/utils/useProjects.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const n=function(e){const t=t=>{const{projects:r,initiallyLoaded:s}=(0,i.Z)(),n=!s;return(0,o.tZ)(e,{...t,projects:r,loadingProjects:n})};return t.displayName=`withProjects(${(0,s.Z)(e)})`,t}},"./app/views/dashboardsV2/utils.tsx":(e,t,r)=>{r.d(t,{qk:()=>S,tT:()=>x,y1:()=>k,DW:()=>j,s:()=>T,Mf:()=>C,z1:()=>Z,hS:()=>D,Tk:()=>O}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var s=r("../node_modules/lodash/cloneDeep.js"),i=r.n(s),o=r("../node_modules/lodash/pick.js"),n=r.n(o),a=r("../node_modules/query-string/index.js"),d=r("./images/dashboard/widget-area.svg"),c=r("./images/dashboard/widget-bar.svg"),l=r("./images/dashboard/widget-big-number.svg"),u=r("./images/dashboard/widget-line-1.svg"),h=r("./images/dashboard/widget-table.svg"),p=r("./images/dashboard/widget-world-map.svg"),g=r("./app/components/arithmeticInput/parser.tsx"),m=r("./app/components/charts/utils.tsx"),_=r("./app/utils.tsx"),v=r("./app/utils/dates.tsx"),w=r("./app/utils/discover/eventView.tsx"),f=r("./app/utils/discover/fields.tsx"),b=r("./app/utils/discover/types.tsx"),y=r("./app/views/dashboardsV2/types.tsx");function S(e){return i()(e)}function x(e,t,r,s){const{start:i,end:o,period:n}=r.datetime,{projects:a,environments:d}=r,c=s!==y.FO.WORLD_MAP||t.columns.includes("geo.country_code")?[...t.columns,...t.aggregates]:["geo.country_code",...t.columns,...t.aggregates],l=s!==y.FO.WORLD_MAP||t.conditions.includes("has:geo.country_code")?t.conditions:`${t.conditions} has:geo.country_code`.trim();return w.ZP.fromSavedQuery({id:void 0,name:e,version:2,fields:c,query:l,orderby:t.orderby,projects:a,range:null!=n?n:void 0,start:i?(0,v.v5)(i):void 0,end:o?(0,v.v5)(o):void 0,environment:d})}function A(e){return"string"==typeof e?[e]:e}function k(e){if(e){const t=A(e.queryNames),r=A(e.queryConditions),s=A(e.queryFields),i=[];if(r&&t&&s&&"string"==typeof e.queryOrderby){const{columns:o,aggregates:n}=(0,f.n0)(s);r.forEach(((r,a)=>{i.push({name:t[a],conditions:r,fields:s,columns:o,aggregates:n,orderby:e.queryOrderby})}))}if(e.title&&e.displayType&&e.interval&&i.length>0)return{...n()(e,["title","displayType","interval"]),widgetType:y.l9.DISCOVER,queries:i}}}function j(e){switch(e){case y.FO.BAR:return c;case y.FO.AREA:case y.FO.TOP_N:return d;case y.FO.BIG_NUMBER:return l;case y.FO.TABLE:return h;case y.FO.WORLD_MAP:return p;case y.FO.LINE:default:return u}}function T(e,t){let r="bar"===e.displayType?"1d":e.interval;r||(r="5m");const s=(0,v.YJ)(r),i=(0,m.Nm)(t);if(e.widgetType===y.l9.METRICS)return r=(0,m.ZS)(t,"medium"),i>m.aC&&i<=m.w3&&(r="1h"),"bar"===e.displayType?"1d":r;if(i/(60*s)>66){const e=(0,m.ZS)(t,"high");if(s<(0,v.YJ)(e))return e}return r}function C(e){const t=new Set;return e.filter(f.GO).forEach((e=>{const r=(0,g.W9)((0,f.bQ)(e)).tc;r.fields.forEach((e=>{let{term:r}=e;return t.add(r)})),r.functions.forEach((e=>{let{term:r}=e;return t.add(r)}))})),Array.from(t)}function Z(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=x(e.title,e.queries[s],t,e.displayType),o=i.getResultsViewUrlTarget(r.slug),n=i.getYAxisOptions().map((e=>{let{value:t}=e;return t}));switch(o.query.yAxis=[...new Set(e.queries[0].aggregates.filter((e=>n.includes(e))))].slice(0,3),e.displayType){case y.FO.WORLD_MAP:o.query.display=b.DC.WORLDMAP;break;case y.FO.BAR:o.query.display=b.DC.BAR;break;case y.FO.TOP_N:o.query.display=b.DC.TOP5;const t=e.queries[0].aggregates;o.query.yAxis=t[t.length-1],t.slice(0,-1).includes(t[t.length-1])&&(o.query.field=t.slice(0,-1))}const d=o.query.field,c=e.queries[0],l=(0,_.ri)(c.fields)?c.fields:[...c.columns,...c.aggregates],u=C(l);u.forEach((e=>{Array.isArray(d)&&!d.includes(e)&&d.unshift(e)}));const h=`${o.pathname}?${a.stringify({...o.query})}`;return h}function D(e,t,r){var s,i,o,n;const{start:d,end:c,utc:l,period:u}=t.datetime,h=d&&c?{start:(0,v.v5)(d),end:(0,v.v5)(c),utc:l}:{statsPeriod:u};return`/organizations/${r.slug}/issues/?${a.stringify({query:null===(s=e.queries)||void 0===s||null===(i=s[0])||void 0===i?void 0:i.conditions,sort:null===(o=e.queries)||void 0===o||null===(n=o[0])||void 0===n?void 0:n.orderby,...h})}`}function O(e,t){return Object.keys(e).forEach((r=>{const s=e[r];"string"!=typeof s?Array.isArray(s)&&"string"==typeof s[0]?t[r]=s[0]:Array.isArray(s)&&"object"==typeof s[0]?s.map((e=>O(e,t))):O(s,t):t[r]=s})),t}},"./app/components/arithmeticInput/grammar.pegjs":e=>{function t(e,r,s,i){this.message=e,this.expected=r,this.found=s,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}!function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(t,Error),t.buildMessage=function(e,t){var r={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?o(e.parts[t][0])+"-"+o(e.parts[t][1]):o(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function s(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+s(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+s(e)}))}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+s(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+s(e)}))}return"Expected "+function(e){var t,s,i,o=new Array(e.length);for(t=0;t<e.length;t++)o[t]=(i=e[t],r[i.type](i));if(o.sort(),o.length>0){for(t=1,s=1;t<o.length;t++)o[t-1]!==o[t]&&(o[s]=o[t],s++);o.length=s}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:t,parse:function(e,r){r=void 0!==r?r:{};var s,i={},o={term:X},n=X,a=function(e,t){return ne.tokenOperation(e,t)},d=G("+",!1),c=G("-",!1),l=G("*",!1),u=/^[\/\xF7]/,h=N(["/","÷"],!1,!1),p=U("function"),g=U("number"),m=/^[+\-]/,_=N(["+","-"],!1,!1),v=/^[0-9]/,w=N([["0","9"]],!1,!1),f=G(".",!1),b=U("field"),y=/^[a-zA-Z_.]/,S=N([["a","z"],["A","Z"],"_","."],!1,!1),x=/^[^()\t\n, "]/,A=N(["(",")","\t","\n",","," ",'"'],!0,!1),k=G('"',!1),j='\\"',T=G('\\"',!1),C=/^[^\t\n"]/,Z=N(["\t","\n",'"'],!0,!1),D=/^[a-zA-Z_0-9]/,O=N([["a","z"],["A","Z"],"_",["0","9"]],!1,!1),P=G(",",!1),E=G("(",!1),I=G(")",!1),q=G(" ",!1),L=0,V=0,B=[{line:1,column:1}],F=0,M=[],R=0;if("startRule"in r){if(!(r.startRule in o))throw new Error("Can't start parsing from rule \""+r.startRule+'".');n=o[r.startRule]}function W(){return e.substring(V,L)}function z(){return Y(V,L)}function G(e,t){return{type:"literal",text:e,ignoreCase:t}}function N(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function U(e){return{type:"other",description:e}}function Q(t){var r,s=B[t];if(s)return s;for(r=t-1;!B[r];)r--;for(s={line:(s=B[r]).line,column:s.column};r<t;)10===e.charCodeAt(r)?(s.line++,s.column=1):s.column++,r++;return B[t]=s,s}function Y(e,t){var r=Q(e),s=Q(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:s.line,column:s.column}}}function $(e){L<F||(L>F&&(F=L,M=[]),M.push(e))}function X(){var e,t,r,s,o;return e=L,(t=K())!==i?(r=function(){var e,t;for(e=[],t=H();t!==i;)e.push(t),t=H();return e}(),r!==i?(V=e,s=t,o=r,e=t=ne.tokenTerm(s,o)):(L=e,e=i)):(L=e,e=i),e}function H(){var t,r,s;return t=L,r=function(){var t,r;return t=L,oe()!==i?(r=function(){var t,r;return t=L,43===e.charCodeAt(L)?(r="+",L++):(r=i,0===R&&$(d)),r!==i&&(V=t,r="plus"),r}(),r===i&&(r=function(){var t,r;return t=L,45===e.charCodeAt(L)?(r="-",L++):(r=i,0===R&&$(c)),r!==i&&(V=t,r="minus"),r}()),r!==i&&oe()!==i?(V=t,t=r):(L=t,t=i)):(L=t,t=i),t}(),r!==i&&(s=K())!==i?(V=t,t=r=a(r,s)):(L=t,t=i),t}function K(){var e,t;return e=L,oe()!==i?(t=function(){var e,t,r,s,o;return e=L,(t=ee())!==i?(r=function(){var e,t;if(e=[],(t=J())!==i)for(;t!==i;)e.push(t),t=J();else e=i;return e}(),r!==i?(V=e,s=t,o=r,e=t=ne.tokenFactor(s,o)):(L=e,e=i)):(L=e,e=i),e}(),t===i&&(t=ee()),t!==i&&oe()!==i?(V=e,e=t):(L=e,e=i)):(L=e,e=i),e}function J(){var t,r,s;return t=L,r=function(){var t,r;return t=L,oe()!==i?(r=function(){var t,r;return t=L,42===e.charCodeAt(L)?(r="*",L++):(r=i,0===R&&$(l)),r!==i&&(V=t,r="multiply"),r}(),r===i&&(r=function(){var t,r;return t=L,u.test(e.charAt(L))?(r=e.charAt(L),L++):(r=i,0===R&&$(h)),r!==i&&(V=t,r="divide"),r}()),r!==i&&oe()!==i?(V=t,t=r):(L=t,t=i)):(L=t,t=i),t}(),r!==i&&(s=ee())!==i?(V=t,t=r=a(r,s)):(L=t,t=i),t}function ee(){var t,r;return t=L,oe()!==i?(r=function(){var e,t;return e=L,se()!==i&&(t=X())!==i&&ie()!==i?(V=e,e=t):(L=e,e=i),e}(),r===i&&(r=function(){var t,r,s,o,n,a,d;if(R++,t=L,m.test(e.charAt(L))?(r=e.charAt(L),L++):(r=i,0===R&&$(_)),r===i&&(r=null),r!==i){if(s=[],v.test(e.charAt(L))?(o=e.charAt(L),L++):(o=i,0===R&&$(w)),o!==i)for(;o!==i;)s.push(o),v.test(e.charAt(L))?(o=e.charAt(L),L++):(o=i,0===R&&$(w));else s=i;if(s!==i){if(o=L,46===e.charCodeAt(L)?(n=".",L++):(n=i,0===R&&$(f)),n!==i){for(a=[],v.test(e.charAt(L))?(d=e.charAt(L),L++):(d=i,0===R&&$(w));d!==i;)a.push(d),v.test(e.charAt(L))?(d=e.charAt(L),L++):(d=i,0===R&&$(w));a!==i?o=n=[n,a]:(L=o,o=i)}else L=o,o=i;o===i&&(o=null),o!==i?(V=t,t=r=W()):(L=t,t=i)}else L=t,t=i}else L=t,t=i;return R--,t===i&&(r=i,0===R&&$(g)),t}(),r===i&&(r=function(){var t,r,s;return R++,t=L,r=function(){var t,r;if(t=[],D.test(e.charAt(L))?(r=e.charAt(L),L++):(r=i,0===R&&$(O)),r!==i)for(;r!==i;)t.push(r),D.test(e.charAt(L))?(r=e.charAt(L),L++):(r=i,0===R&&$(O));else t=i;return t}(),r!==i&&se()!==i&&oe()!==i?(s=function(){var e,t,r,s,o,n,a,d;if(e=L,(t=te())!==i){for(r=[],s=L,(o=oe())!==i&&(n=re())!==i&&(a=oe())!==i&&(d=te())!==i?s=o=[o,n,a,d]:(L=s,s=i);s!==i;)r.push(s),s=L,(o=oe())!==i&&(n=re())!==i&&(a=oe())!==i&&(d=te())!==i?s=o=[o,n,a,d]:(L=s,s=i);r!==i?e=t=[t,r]:(L=e,e=i)}else L=e,e=i;return e}(),s===i&&(s=null),s!==i&&oe()!==i&&ie()!==i?(V=t,t=r=ne.tokenFunction(W(),z())):(L=t,t=i)):(L=t,t=i),R--,t===i&&(r=i,0===R&&$(p)),t}(),r===i&&(r=function(){var t,r,s;if(R++,t=L,r=[],y.test(e.charAt(L))?(s=e.charAt(L),L++):(s=i,0===R&&$(S)),s!==i)for(;s!==i;)r.push(s),y.test(e.charAt(L))?(s=e.charAt(L),L++):(s=i,0===R&&$(S));else r=i;return r!==i&&(V=t,r=ne.tokenField(W(),z())),R--,(t=r)===i&&(r=i,0===R&&$(b)),t}()))),r!==i&&oe()!==i?(V=t,t=r):(L=t,t=i)):(L=t,t=i),t}function te(){var t;return(t=function(){var t,r,s,o;if(t=L,34===e.charCodeAt(L)?(r='"',L++):(r=i,0===R&&$(k)),r!==i){for(s=[],e.substr(L,2)===j?(o=j,L+=2):(o=i,0===R&&$(T)),o===i&&(C.test(e.charAt(L))?(o=e.charAt(L),L++):(o=i,0===R&&$(Z)));o!==i;)s.push(o),e.substr(L,2)===j?(o=j,L+=2):(o=i,0===R&&$(T)),o===i&&(C.test(e.charAt(L))?(o=e.charAt(L),L++):(o=i,0===R&&$(Z)));s!==i?(34===e.charCodeAt(L)?(o='"',L++):(o=i,0===R&&$(k)),o!==i?t=r=[r,s,o]:(L=t,t=i)):(L=t,t=i)}else L=t,t=i;return t}())===i&&(t=function(){var t,r;if(t=[],x.test(e.charAt(L))?(r=e.charAt(L),L++):(r=i,0===R&&$(A)),r!==i)for(;r!==i;)t.push(r),x.test(e.charAt(L))?(r=e.charAt(L),L++):(r=i,0===R&&$(A));else t=i;return t}()),t}function re(){var t;return 44===e.charCodeAt(L)?(t=",",L++):(t=i,0===R&&$(P)),t}function se(){var t;return 40===e.charCodeAt(L)?(t="(",L++):(t=i,0===R&&$(E)),t}function ie(){var t;return 41===e.charCodeAt(L)?(t=")",L++):(t=i,0===R&&$(I)),t}function oe(){var t,r;for(t=[],32===e.charCodeAt(L)?(r=" ",L++):(r=i,0===R&&$(q));r!==i;)t.push(r),32===e.charCodeAt(L)?(r=" ",L++):(r=i,0===R&&$(q));return t}const{tc:ne,term:ae}=r;if((s=n())!==i&&L===e.length)return s;throw s!==i&&L<e.length&&$({type:"end"}),function(e,r,s){return new t(t.buildMessage(e,r),e,r,s)}(M,F<e.length?e.charAt(F):null,F<e.length?Y(F,F+1):Y(F,F))}}}}]);
//# sourceMappingURL=../sourcemaps/app_components_modals_dashboardWidgetQuerySelectorModal_tsx-app_utils_analytics_dashboardsAna-c772c8.0d1df40ab07f874bd6ee4d86c409b440.js.map