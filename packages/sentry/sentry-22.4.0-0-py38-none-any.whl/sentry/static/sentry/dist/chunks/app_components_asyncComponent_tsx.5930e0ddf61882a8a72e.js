"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_asyncComponent_tsx"],{"./app/components/asyncComponent.tsx":(e,t,s)=>{s.d(t,{Z:()=>L});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),n=s("../node_modules/@sentry/minimal/esm/index.js"),i=s("../node_modules/@sentry/types/esm/severity.js"),a=s("../node_modules/lodash/isEqual.js"),l=s.n(a),d=s("../node_modules/prop-types/index.js"),u=s("./app/api.tsx"),p=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),c=s("../node_modules/react-router/es/index.js"),h=s("../node_modules/lodash/debounce.js"),m=s.n(h),g=s("./app/components/forms/controls/input.tsx"),y=s("./app/components/loadingIndicator.tsx"),x=s("./app/locale.tsx"),Z=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class b extends o.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{query:"",busy:!1}),(0,r.Z)(this,"immediateQuery",(async e=>{const{location:t,api:s}=this.props;this.setState({busy:!0});try{const[r,,o]=await s.requestPromise(`${this.props.url}`,{includeAllArgs:!0,method:"GET",query:{...t.query,query:e}});this.state.query===e&&this.props.onSuccess(r,o)}catch{this.props.onError()}this.setState({busy:!1})})),(0,r.Z)(this,"query",m()(this.immediateQuery,this.props.debounceWait)),(0,r.Z)(this,"handleChange",(e=>{this.query(e),this.setState({query:e})})),(0,r.Z)(this,"handleInputChange",(e=>this.handleChange(e.target.value))),(0,r.Z)(this,"handleSearch",(e=>{const{updateRoute:t,onSearchSubmit:s}=this.props;if(e.preventDefault(),t){const{router:e,location:t}=this.props;e.push({pathname:t.pathname,query:{query:this.state.query}})}"function"==typeof s&&s(this.state.query,e)}))}render(){const{placeholder:e,children:t,className:s}=this.props,{busy:r,query:o}=this.state,n=(0,Z.BX)(w,{onSubmit:this.handleSearch,children:[(0,Z.tZ)(g.Z,{value:o,onChange:this.handleInputChange,className:s,placeholder:e}),r&&(0,Z.tZ)(f,{size:18,hideMessage:!0,mini:!0})]});return void 0===t?n:t({defaultSearchBar:n,busy:r,value:o,handleChange:this.handleChange})}}b.displayName="AsyncComponentSearchInput",(0,r.Z)(b,"defaultProps",{placeholder:(0,x.t)("Search..."),debounceWait:200});const f=(0,p.Z)(y.Z,{target:"eup3waa1"})({name:"1jyfazj",styles:"position:absolute;right:25px;top:50%;transform:translateY(-13px)"}),w=(0,p.Z)("form",{target:"eup3waa0"})({name:"bjn8wh",styles:"position:relative"}),j=(0,c.withRouter)(b);var S=s("./app/components/loadingError.tsx"),_=s("./app/utils/analytics.tsx"),v=s("./app/utils/getRouteStringFromRoutes.tsx"),R=s("./app/components/links/externalLink.tsx"),E=s("./app/components/sentryDocumentTitle.tsx"),q=s("./app/styles/organization.tsx"),k=s("./app/utils/withOrganization.tsx"),C=s("./app/utils/withProject.tsx");const D="Permission Denied";class T extends o.Component{componentDidMount(){const{organization:e,project:t,routes:s}=this.props,r=(0,v.Z)(s);n.$e((s=>{s.setFingerprint([D,r]),s.setExtra("route",r),s.setExtra("orgFeatures",e&&e.features||[]),s.setExtra("orgAccess",e&&e.access||[]),s.setExtra("projectFeatures",t&&t.features||[]),n.Tb(new Error(`${D}${r?` : ${r}`:""}`))}))}render(){return(0,Z.tZ)(E.Z,{title:(0,x.t)("Permission Denied"),children:(0,Z.tZ)(q.JH,{children:(0,Z.tZ)(S.Z,{message:(0,x._N)("Your role does not have the necessary permissions to access this\n               resource, please read more about [link:organizational roles]",{link:(0,Z.tZ)(R.Z,{href:"https://docs.sentry.io/product/accounts/membership/"})})})})})}}T.displayName="PermissionDenied";const $=(0,c.withRouter)((0,k.Z)((0,C.Z)(T)));var N=s("./app/views/routeError.tsx");function P(e,t){return function(){try{return t(...arguments)}catch(t){return console.error(t),window.setTimeout((()=>{throw t})),e.setState({error:t}),null}}}class z extends o.Component{constructor(e,t){var s;super(e,t),s=this,(0,r.Z)(this,"reloadOnVisible",!1),(0,r.Z)(this,"shouldReloadOnVisible",!1),(0,r.Z)(this,"shouldReload",!1),(0,r.Z)(this,"shouldRenderBadRequests",!1),(0,r.Z)(this,"disableErrorReport",!0),(0,r.Z)(this,"api",new u.KU),(0,r.Z)(this,"_measurement",void 0),(0,r.Z)(this,"markShouldMeasure",(function(){let{remainingRequests:e,error:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s._measurement.hasMeasured||(s._measurement.finished=0===e,s._measurement.error=t||s._measurement.error)})),(0,r.Z)(this,"remountComponent",(()=>{this.shouldReload?this.reloadData():this.setState(this.getDefaultState(),this.fetchData)})),(0,r.Z)(this,"visibilityReloader",(()=>this.shouldReloadOnVisible&&!this.state.loading&&!document.hidden&&this.reloadData())),(0,r.Z)(this,"fetchData",(e=>{const t=this.getEndpoints();t.length?(this.api.clear(),this.setState({loading:!0,error:!1,remainingRequests:t.length,...e}),t.forEach((e=>{let[t,s,r,o]=e;o=o||{};const n=this.props.location&&this.props.location.query||{};let i=r&&r.query||{};!o.paginate&&!n.cursor||o.disableEntireQuery||(i={...n,...i}),this.api.request(s,{method:"GET",...r,query:i,success:(e,s,r)=>{this.handleRequestSuccess({stateKey:t,data:e,resp:r},!0)},error:e=>{o.allowError&&o.allowError(e)&&(e=null),this.handleError(e,[t,s,r,o])}})}))):this.setState({loading:!1,error:!1})})),this.fetchData=P(this,this.fetchData.bind(this)),this.render=P(this,this.render.bind(this)),this.state=this.getDefaultState(),this._measurement={hasMeasured:!1},e.routes&&e.routes&&_.oF.mark({name:`async-component-${(0,v.Z)(e.routes)}`})}UNSAFE_componentWillMount(){this.api=new u.KU,this.fetchData(),this.reloadOnVisible&&document.addEventListener("visibilitychange",this.visibilityReloader)}componentDidUpdate(e,t){const s=!!t.router,r=void 0!==e.location,o=r?this.props.location:s?this.context.router.location:null,n=r?e.location:s?t.router.location:null;if(o&&n){if(!this._measurement.hasMeasured&&this._measurement.finished&&this.props.routes){const e=(0,v.Z)(this.props.routes);_.oF.measure({name:"app.component.async-component",start:`async-component-${e}`,data:{route:e,error:this._measurement.error}}),this._measurement.hasMeasured=!0}l()(this.props.params,e.params)&&o.search===n.search&&o.state===n.state||this.remountComponent()}}componentWillUnmount(){this.api.clear(),document.removeEventListener("visibilitychange",this.visibilityReloader)}getDefaultState(){const e=this.getEndpoints(),t={loading:!0,reloading:!1,error:!1,errors:{}};return e.forEach((e=>{let[s,r]=e;t[s]=null})),t}reloadData(){this.fetchData({reloading:!0})}onRequestSuccess(e){}onRequestError(e,t){}onLoadAllEndpointsSuccess(){}handleRequestSuccess(e,t){let{stateKey:s,data:r,resp:o}=e;this.setState((e=>{const n={[s]:r,[`${s}PageLinks`]:null==o?void 0:o.getResponseHeader("Link")};return t&&(n.remainingRequests=e.remainingRequests-1,n.loading=e.remainingRequests>1,n.reloading=e.reloading&&n.loading,this.markShouldMeasure({remainingRequests:n.remainingRequests})),n}),(()=>{0!==this.state.remainingRequests||this.state.error||this.onLoadAllEndpointsSuccess()})),this.onRequestSuccess({stateKey:s,data:r,resp:o})}handleError(e,t){const[s]=t;e&&e.responseText&&n.n_({message:e.responseText,category:"xhr",level:i.z.Error}),this.setState((t=>{const r=t.remainingRequests>1,o={[s]:null,errors:{...t.errors,[s]:e},error:t.error||!!e,remainingRequests:t.remainingRequests-1,loading:r,reloading:t.reloading&&r};return this.markShouldMeasure({remainingRequests:o.remainingRequests,error:!0}),o})),this.onRequestError(e,t)}getEndpoints(){return[]}renderSearchInput(e){let{stateKey:t,url:s,...r}=e;const[o]=this.getEndpoints()||[null],n=t||o&&o[0],i=s||o&&o[1];return(0,Z.tZ)(j,{url:i,...r,api:this.api,onSuccess:(e,t)=>{this.handleRequestSuccess({stateKey:n,data:e,resp:t})},onError:()=>{this.renderError(new Error("Error with AsyncComponentSearchInput"))}})}renderLoading(){return(0,Z.tZ)(y.Z,{})}renderError(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{errors:s}=this.state,r=Object.values(s).find((e=>401===(null==e?void 0:e.status))),o=Object.values(s).find((e=>403===(null==e?void 0:e.status))),n=!!Object.values(s).find((e=>0!==(null==e?void 0:e.status)))||t;if(r)return(0,Z.tZ)(S.Z,{message:(0,x.t)("You are not authorized to access this resource.")});if(o)return(0,Z.tZ)($,{});if(this.shouldRenderBadRequests){const e=Object.values(s).filter((e=>{var t;return 400===(null==e?void 0:e.status)&&(null==e||null===(t=e.responseJSON)||void 0===t?void 0:t.detail)})).map((e=>e.responseJSON.detail));if(e.length)return(0,Z.tZ)(S.Z,{message:[...new Set(e)].join("\n")})}return(0,Z.tZ)(N.Z,{error:e,disableLogSentry:!n,disableReport:this.disableErrorReport})}get shouldRenderLoading(){return this.state.loading&&(!this.shouldReload||!this.state.reloading)}renderComponent(){return this.shouldRenderLoading?this.renderLoading():this.state.error?this.renderError(new Error("Unable to load all required endpoints")):this.renderBody()}renderBody(){throw new Error("Not implemented")}render(){return this.renderComponent()}}z.displayName="AsyncComponent",(0,r.Z)(z,"contextTypes",{router:d.object});const L=z},"./app/components/loadingError.tsx":(e,t,s)=>{s.d(t,{Z:()=>c});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=s("../node_modules/react/index.js"),i=s("./app/components/alert.tsx"),a=s("./app/components/button.tsx"),l=s("./app/components/panels/index.tsx"),d=s("./app/locale.tsx"),u=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class p extends n.Component{shouldComponentUpdate(){return!1}render(){const{message:e,onRetry:t,className:s}=this.props;return(0,u.tZ)(h,{type:"error",showIcon:!0,className:s,trailingItems:t&&(0,u.tZ)(a.ZP,{onClick:t,type:"button",priority:"default",size:"small",children:(0,d.t)("Retry")}),children:e})}}p.displayName="LoadingError",(0,r.Z)(p,"defaultProps",{message:(0,d.t)("There was an error loading data.")});const c=p,h=(0,o.Z)(i.Z,{target:"e1aoltpz0"})(l.s_," &{border-radius:0;border-width:1px 0;}")},"./app/components/sentryDocumentTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>a}),s("../node_modules/react/index.js");var r=s("../node_modules/react-document-title/index.js"),o=s.n(r),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{title:t="",orgSlug:s,projectSlug:r,noSuffix:i,children:a}=e;const l=s&&r?`${t} - ${s} - ${r}`:s?`${t} - ${s}`:r?`${t} - ${r}`:t,d=i?l:""!==l?`${l} - Sentry`:"Sentry";return(0,n.tZ)(o(),{title:d,children:a})}i.displayName="SentryDocumentTitle";const a=i},"./app/styles/organization.tsx":(e,t,s)=>{s.d(t,{JH:()=>n,mr:()=>i,Gh:()=>a});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("./app/styles/space.tsx");const n=(0,r.Z)("div",{target:"e12cn1y22"})("display:flex;flex-direction:column;flex:1;padding:",(0,o.Z)(3)," ",(0,o.Z)(4),";"),i=(0,r.Z)("div",{target:"e12cn1y21"})("display:flex;justify-content:space-between;align-items:center;margin-bottom:",(0,o.Z)(2),";min-height:32px;"),a=(0,r.Z)("h4",{target:"e12cn1y20"})((e=>e.theme.text.pageTitle),";color:",(e=>e.theme.headingColor),";flex:1;margin:0;")},"./app/utils/getRouteStringFromRoutes.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("../node_modules/lodash/findLastIndex.js"),o=s.n(r);function n(e){if(!Array.isArray(e))return"";const t=e.filter((e=>!!e.path)),s=o()(t,(e=>{let{path:t}=e;return t.startsWith("/")}));return t.slice(s).filter((e=>{let{path:t}=e;return!!t})).map((e=>{let{path:t}=e;return t})).join("")}},"./app/utils/withProject.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/react/index.js"),n=s("./app/sentryTypes.tsx"),i=s("./app/utils/getDisplayName.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=e=>{var t;return t=class extends o.Component{render(){const{project:t,...s}=this.props;return(0,a.tZ)(e,{project:null!=t?t:this.context.project,...s})}},(0,r.Z)(t,"displayName",`withProject(${(0,i.Z)(e)})`),(0,r.Z)(t,"contextTypes",{project:n.Z.Project}),t}},"./app/views/routeError.tsx":(e,t,s)=>{s.d(t,{Z:()=>f});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("../node_modules/react-router/es/index.js"),a=s("../node_modules/@sentry/minimal/esm/index.js"),l=s("../node_modules/@sentry/browser/esm/sdk.js"),d=s("./app/components/alert.tsx"),u=s("./app/components/list/index.tsx"),p=s("./app/components/list/listItem.tsx"),c=s("./app/locale.tsx"),h=s("./app/styles/space.tsx"),m=s("./app/utils/getRouteStringFromRoutes.tsx"),g=s("./app/utils/withOrganization.tsx"),y=s("./app/utils/withProject.tsx"),x=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class Z extends n.Component{constructor(){super(...arguments),(0,r.Z)(this,"_timeout",void 0)}UNSAFE_componentWillMount(){const{error:e}=this.props,{disableLogSentry:t,disableReport:s,organization:r,project:o,routes:n}=this.props;if(t)return;if(!e)return;const i=(0,m.Z)(n),d=e=>(e.setExtra("route",i),e.setExtra("orgFeatures",r&&r.features||[]),e.setExtra("orgAccess",r&&r.access||[]),e.setExtra("projectFeatures",o&&o.features||[]),e);if(i)try{e.message=`${e.message}: ${i}`}catch(e){a.$e((t=>{d(t),a.Tb(e)}))}this._timeout=window.setTimeout((()=>{a.$e((t=>{d(t),a.Tb(e)})),s||l.jp()}))}componentWillUnmount(){var e;this._timeout&&window.clearTimeout(this._timeout),null===(e=document.querySelector(".sentry-error-embed-wrapper"))||void 0===e||e.remove()}render(){return(0,x.BX)(d.Z,{type:"error",children:[(0,x.tZ)(b,{children:(0,x.tZ)("span",{children:(0,c.t)("Oops! Something went wrong")})}),(0,x.tZ)("p",{children:(0,c.t)("\n          It looks like you've hit an issue in our client application. Don't worry though!\n          We use Sentry to monitor Sentry and it's likely we're already looking into this!\n          ")}),(0,x.tZ)("p",{children:(0,c.t)("If you're daring, you may want to try the following:")}),(0,x.BX)(u.Z,{symbol:"bullet",children:[window&&window.adblockSuspected&&(0,x.tZ)(p.Z,{children:(0,c.t)("We detected something AdBlock-like. Try disabling it, as it's known to cause issues.")}),(0,x.tZ)(p.Z,{children:(0,c._N)("Give it a few seconds and [link:reload the page].",{link:(0,x.tZ)("a",{onClick:()=>{window.location.href=window.location.href}})})}),(0,x.tZ)(p.Z,{children:(0,c._N)("If all else fails, [link:contact us] with more details.",{link:(0,x.tZ)("a",{href:"https://github.com/getsentry/sentry/issues/new/choose"})})})]})]})}}Z.displayName="RouteError";const b=(0,o.Z)("h3",{target:"e1isf1bc0"})("display:flex;align-items:center;font-size:",(e=>e.theme.headerFontSize),";font-weight:normal;margin-bottom:",(0,h.Z)(1.5),";"),f=(0,i.withRouter)((0,g.Z)((0,y.Z)(Z)))}}]);
//# sourceMappingURL=../sourcemaps/app_components_asyncComponent_tsx.d7b44e2b2de13af706877c71f93022d2.js.map