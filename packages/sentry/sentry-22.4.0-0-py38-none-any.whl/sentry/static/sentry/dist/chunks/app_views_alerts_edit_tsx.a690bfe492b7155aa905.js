"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_alerts_edit_tsx"],{"./app/views/alerts/edit.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),n=s("./app/components/layouts/thirds.tsx"),o=s("./app/components/loadingIndicator.tsx"),l=s("./app/components/sentryDocumentTitle.tsx"),p=s("./app/locale.tsx"),u=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),d=s("./app/utils/teams.tsx"),c=s("./app/views/alerts/builder/builderBreadCrumbs.tsx"),h=s("./app/actionCreators/indicator.tsx"),m=s("./app/utils/analytics.tsx"),g=s("./app/views/alerts/incidentRules/ruleForm/index.tsx"),x=s("./app/views/asyncView.tsx"),Z=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class T extends x.Z{constructor(){super(...arguments),(0,r.Z)(this,"handleSubmitSuccess",(()=>{const{router:e,project:t}=this.props,{orgId:s}=this.props.params;m.oF.endTransaction({name:"saveAlertRule"}),e.push({pathname:`/organizations/${s}/alerts/rules/`,query:{project:t.id}})}))}getDefaultState(){return{...super.getDefaultState(),actions:new Map}}getEndpoints(){const{orgId:e,ruleId:t}=this.props.params;return[["rule",`/organizations/${e}/alert-rules/${t}/`]]}onRequestSuccess(e){let{stateKey:t,data:s}=e;"rule"===t&&s.name&&this.props.onChangeTitle(s.name)}onLoadAllEndpointsSuccess(){const{rule:e}=this.state;null!=e&&e.errors&&((null==e?void 0:e.errors)||[]).map((e=>{let{detail:t}=e;return(0,h.Iw)(t,{append:!0})}))}renderBody(){const{ruleId:e}=this.props.params,{rule:t}=this.state;return(0,Z.tZ)(g.Z,{...this.props,ruleId:e,rule:t,onSubmitSuccess:this.handleSubmitSuccess})}}const y=T;var j=s("./app/views/alerts/issueRuleEditor/index.tsx"),w=s("./app/views/alerts/types.tsx");class b extends i.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{ruleName:""}),(0,r.Z)(this,"handleChangeTitle",(e=>{this.setState({ruleName:e})}))}componentDidMount(){const{organization:e,project:t}=this.props;(0,u.Z)("edit_alert_rule.viewed",{organization:e,project_id:t.id,alert_type:this.getAlertType()})}getTitle(){const{ruleName:e}=this.state;return`${e}`}getAlertType(){return location.pathname.includes("/alerts/metric-rules/")?w.ok.METRIC:w.ok.ISSUE}render(){const{hasMetricAlerts:e,location:t,organization:s,project:r,routes:a}=this.props,u=this.getAlertType();return(0,Z.BX)(i.Fragment,{children:[(0,Z.tZ)(l.Z,{title:this.getTitle(),orgSlug:s.slug,projectSlug:r.slug}),(0,Z.tZ)(n.h4,{children:(0,Z.BX)(n.oB,{children:[(0,Z.tZ)(c.Z,{organization:s,title:(0,p.t)("Edit Alert Rule"),projectSlug:r.slug,routes:a,location:t}),(0,Z.tZ)(n.Dx,{children:this.getTitle()})]})}),(0,Z.tZ)(S,{children:(0,Z.tZ)(n.or,{fullWidth:!0,children:(0,Z.tZ)(d.Z,{provideUserTeams:!0,children:t=>{let{teams:s,initiallyLoaded:a}=t;return a?(0,Z.BX)(i.Fragment,{children:[(!e||"issue"===u)&&(0,Z.tZ)(j.Z,{...this.props,project:r,onChangeTitle:this.handleChangeTitle,userTeamIds:s.map((e=>{let{id:t}=e;return t}))}),e&&u===w.ok.METRIC&&(0,Z.tZ)(y,{...this.props,project:r,onChangeTitle:this.handleChangeTitle,userTeamIds:s.map((e=>{let{id:t}=e;return t}))})]}):(0,Z.tZ)(o.Z,{})}})})})]})}}b.displayName="ProjectAlertsEditor";const S=(0,a.Z)(n.uT,{target:"eqr07hw0"})({name:"9ap5cm",styles:"*:not(img){max-width:1000px;}"}),v=b}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_edit_tsx.791f5a5b4471d3a4a6df2eb5a167cf71.js.map