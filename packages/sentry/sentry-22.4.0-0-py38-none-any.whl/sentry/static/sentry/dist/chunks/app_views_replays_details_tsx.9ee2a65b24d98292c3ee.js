"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_replays_details_tsx"],{"./app/components/events/errorLevel.tsx":(e,t,r)=>{r.d(t,{Z:()=>a});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");const s="13px",a=(0,n.Z)("span",{target:"e145dcfe0"})("padding:0;position:relative;width:",(e=>e.size||s),";height:",(e=>e.size||s),";text-indent:-9999em;display:inline-block;border-radius:50%;flex-shrink:0;background-color:",(e=>e.level?e.theme.level[e.level]:e.theme.level.error),";")},"./app/components/events/eventMessage.tsx":(e,t,r)=>{r.d(t,{Z:()=>u});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(r("../node_modules/react/index.js"),r("./app/components/events/errorLevel.tsx")),a=r("./app/styles/overflowEllipsis.tsx"),i=r("./app/styles/space.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=e=>{let{className:t,level:r,levelIndicatorSize:n,message:s,annotations:a}=e;return(0,o.BX)("div",{className:t,children:[r&&(0,o.tZ)(c,{size:n,level:r,children:r}),s&&(0,o.tZ)(p,{children:s}),a]})};l.displayName="BaseEventMessage";const d=(0,n.Z)(l,{target:"e1rp796r2"})({name:"1go2o7p",styles:"display:flex;align-items:center;position:relative;line-height:1.2;overflow:hidden"}),c=(0,n.Z)(s.Z,{target:"e1rp796r1"})("margin-right:",(0,i.Z)(1),";"),p=(0,n.Z)("span",{target:"e1rp796r0"})(a.Z," width:auto;max-height:38px;"),u=d},"./app/components/keyValueTable.tsx":(e,t,r)=>{r.d(t,{v:()=>l,G:()=>d});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=r("../node_modules/react/index.js"),a=r("./app/styles/overflowEllipsis.tsx"),i=r("./app/styles/space.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=(0,n.Z)("dl",{target:"e13z4zle2"})({name:"u4s7v9",styles:"display:grid;grid-template-columns:50% 50%"}),d=e=>{let{keyName:t,value:r}=e;return(0,o.BX)(s.Fragment,{children:[(0,o.tZ)(p,{children:t}),(0,o.tZ)(u,{children:r})]})};d.displayName="KeyValueTableRow";const c=e=>{let{theme:t}=e;return`\nfont-size: ${t.fontSizeMedium};\npadding: ${(0,i.Z)(.5)} ${(0,i.Z)(1)};\nfont-weight: normal;\nline-height: inherit;\n${a.Z};\n&:nth-of-type(2n-1) {\n  background-color: ${t.backgroundSecondary};\n}\n`},p=(0,n.Z)("dt",{target:"e13z4zle1"})(c,";color:",(e=>e.theme.textColor),";"),u=(0,n.Z)("dd",{target:"e13z4zle0"})(c,";color:",(e=>e.theme.subText),";text-align:right;")},"./app/components/tagsTable.tsx":(e,t,r)=>{r.d(t,{Z:()=>v});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(r("../node_modules/core-js/modules/es.string.replace.js"),r("../node_modules/react/index.js"),r("../node_modules/lodash/capitalize.js")),a=r.n(s),i=r("./app/components/charts/styles.tsx"),o=r("./app/components/events/meta/metaProxy.tsx"),l=r("./app/components/keyValueTable.tsx"),d=r("./app/components/links/link.tsx"),c=r("./app/components/tooltip.tsx"),p=r("./app/components/version.tsx"),u=r("./app/locale.tsx"),m=r("./app/styles/overflowEllipsis.tsx"),g=r("./app/styles/space.tsx"),h=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const y=e=>{let{event:t,query:r,generateUrl:n,title:s=(0,u.t)("Tag Details")}=e;const m=(0,o.xN)(t).tags,g=e=>a()(e.replace(/_/g," ")),y=e=>{return(0,h.tZ)(b,{children:(t=e[0],Array.isArray(t)?null!==(r=t[1])&&void 0!==r&&r.reason?g(t[1].reason):g(t[0]):g(t))});var t,r};return(0,h.BX)(x,{children:[(0,h.tZ)(i.OT,{children:s}),(0,h.tZ)(l.v,{children:m.map((e=>{var t,s,a;const i=r.includes(`${e.key}:`),m=i?void 0:n(e),g=(0,o.xZ)(e,"key"),v=(0,o.xZ)(e,"value"),x=()=>"release"===e.key?(0,h.tZ)(p.Z,{version:e.value,anchor:!1,withPackage:!0}):e.value;return(0,h.tZ)(l.G,{keyName:null!=g&&null!==(t=g.err)&&void 0!==t&&t.length?(0,h.tZ)(c.ZP,{title:y(g.err),children:(0,h.tZ)("i",{children:`<${(0,u.t)("invalid")}>`})}):(0,h.tZ)(Z,{title:e.key,children:e.key}),value:null!=v&&null!==(s=v.err)&&void 0!==s&&s.length?(0,h.tZ)(c.ZP,{title:y(v.err),children:(0,h.tZ)("i",{children:`<${(0,u.t)("invalid")}>`})}):null!=g&&null!==(a=g.err)&&void 0!==a&&a.length?(0,h.tZ)("span",{children:x()}):i?(0,h.tZ)(c.ZP,{title:(0,u.t)("This tag is in the current filter conditions"),children:(0,h.tZ)("span",{children:x()})}):(0,h.tZ)(Z,{title:x(),children:(0,h.tZ)(d.Z,{to:m||"",children:x()})})},e.key)}))})]})};y.displayName="TagsTable";const v=y,Z=(0,n.Z)(c.ZP,{target:"eaaaj7z2"})(m.Z,";"),x=(0,n.Z)("div",{target:"eaaaj7z1"})("margin-bottom:",(0,g.Z)(3),";"),b=(0,n.Z)("div",{target:"eaaaj7z0"})({name:"1flj9lk",styles:"text-align:left"})},"./app/utils/usePrevious.tsx":(e,t,r)=>{r.d(t,{Z:()=>s});var n=r("../node_modules/react/index.js");const s=function(e){const t=(0,n.useRef)(e);return(0,n.useEffect)((()=>{t.current=e}),[e]),t.current}},"./app/views/asyncView.tsx":(e,t,r)=>{r.d(t,{Z:()=>i}),r("../node_modules/react/index.js");var n=r("./app/components/asyncComponent.tsx"),s=r("./app/components/sentryDocumentTitle.tsx"),a=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends n.Z{getTitle(){return""}render(){return(0,a.tZ)(s.Z,{title:this.getTitle(),children:this.renderComponent()})}}i.displayName="AsyncView"},"./app/views/replays/details.tsx":(e,t,r)=>{r.r(t),r.d(t,{default:()=>fe});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),i=r("./app/components/breadcrumbs.tsx"),o=r("./app/components/errors/detailedError.tsx"),l=r("./app/components/errors/notFound.tsx"),d=r("./app/components/eventOrGroupTitle.tsx"),c=r("./app/components/events/eventEntry.tsx"),p=r("./app/components/events/eventMessage.tsx"),u=r("./app/components/featureBadge.tsx"),m=r("./app/components/layouts/thirds.tsx"),g=r("./app/components/loadingIndicator.tsx"),h=r("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),y=r("../node_modules/rrweb/es/rrweb/packages/rrweb/src/replay/index.js"),v=r("../node_modules/rrweb/es/rrweb/packages/rrweb/src/types.js"),Z=r("./app/utils/usePrevious.tsx"),x=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const b=a.createContext({currentTime:0,dimensions:{height:0,width:0},duration:void 0,events:[],initRoot:e=>{},isPlaying:!1,setCurrentTime:()=>{},setSpeed:()=>{},skipInactive:!1,speed:1,togglePlayPause:()=>{},toggleSkipInactive:()=>{}});function f(e){var t;let{children:r,events:n}=e;const s=(0,h.u)(),i=(0,Z.Z)(n),o=(0,a.useRef)(null),[l,d]=(0,a.useState)({height:0,width:0}),[c,p]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),[g,f]=(0,a.useState)(1),w=e=>{d(e)},k=()=>{p(!1)},E=e=>{if(void 0===n)return;if(null===e)return;if(o.current){if(n===i)return;for(;e.firstChild;)e.removeChild(e.firstChild)}const t=new y.x(n,{root:e,mouseTail:{duration:750,lineCap:"round",lineWidth:2,strokeStyle:s.purple200}});t.on(v.SA.Resize,w),t.on(v.SA.Finish,k),o.current=t};(0,a.useEffect)((()=>{o.current&&n&&E(o.current.wrapper.parentElement)}),[o.current,n]);const S=(0,a.useCallback)((()=>o.current?Math.max(o.current.getCurrentTime(),0):0),[o.current]),j=(0,a.useCallback)((e=>{const t=o.current;t&&(c?(t.play(e),p(!0)):(t.pause(e),p(!1)))}),[o.current,c]),P=(0,a.useCallback)((e=>{const t=o.current;t&&(c?(t.pause(),t.setConfig({speed:e}),t.play(S())):t.setConfig({speed:e}),f(e))}),[o.current,c]),I=(0,a.useCallback)((e=>{const t=o.current;t&&(e?t.play(S()):t.pause(S()),p(e))}),[o.current]),T=(0,a.useCallback)((e=>{const t=o.current;t&&(e!==t.config.skipInactive&&t.setConfig({skipInactive:e}),m(e))}),[o.current]),z=function(e){const[t,r]=(0,a.useState)(0);return function(e){(0,a.useEffect)((()=>{const t=window.requestAnimationFrame(e);return()=>window.cancelAnimationFrame(t)}),[e])}((()=>r(e))),t}(S);return(0,x.tZ)(b.Provider,{value:{currentTime:z,dimensions:l,duration:null===(t=o.current)||void 0===t?void 0:t.getMetaData().totalTime,events:n,initRoot:E,isPlaying:c,setCurrentTime:j,setSpeed:P,skipInactive:u,speed:g,togglePlayPause:I,toggleSkipInactive:T},children:r})}f.displayName="Provider";const w=b.Consumer;var k=r("./app/components/button.tsx"),E=r("./app/components/buttonBar.tsx"),S=r("./app/components/forms/booleanField.tsx"),j=r("./app/components/forms/controls/rangeSlider/index.tsx"),P=r("./app/components/panels/index.tsx"),I=r("../node_modules/screenfull/index.js");function T(){const e=(0,a.useRef)(null),[t,r]=(0,a.useState)(!1),n=(0,a.useCallback)((async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{navigationUI:"auto"};I.Z.isEnabled&&e.current&&await I.Z.request(e.current,t)}),[e.current]),s=(0,a.useCallback)((async()=>{I.Z.isEnabled&&await I.Z.exit()}),[]),i=(0,a.useCallback)((()=>t?s():n()),[n,s,t]),o=()=>{r(I.Z.isFullscreen)};return(0,a.useEffect)((()=>(I.Z.on("change",o),()=>I.Z.off("change",o)))),{enter:n,exit:s,isEnabled:I.Z.isEnabled,isFullscreen:t,ref:e,toggle:i}}var z=r("./app/icons/index.tsx"),C=r("./app/locale.tsx"),R=r("./app/styles/space.tsx");function M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=String(e);const n=Math.pow(10,t-1);if(e<n)for(;String(n).length>r.length;)r="0"+e;return r}const N=36e5;function F(e){if(e<=0)return"0:00";const t=Math.floor(e/N);e%=N;const r=Math.floor(e/6e4);e%=6e4;const n=Math.floor(e/1e3);return t?`${t}:${M(r)}:${M(n)}`:`${r}:${M(n)}`}const B=e=>{let{currentTime:t,duration:r,isFullscreen:n,isPlaying:s,isSkippingInactive:i,setCurrentTime:o,setSpeed:l,speed:d,speedOptions:c,toggleFullscreen:p,togglePlayPause:u,toggleSkipInactive:m}=e;return(0,x.BX)(a.Fragment,{children:[(0,x.tZ)(O,{"data-test-id":"replay-timeline-range",name:"replay-timeline",min:0,max:r,value:Math.round(t),onChange:e=>o(e||0),showLabel:!1}),(0,x.BX)(D,{children:[(0,x.BX)(E.ZP,{merged:!0,children:[(0,x.tZ)(k.ZP,{"data-test-id":"replay-back-10s",size:"xsmall",title:(0,C.t)("Go back 10 seconds"),icon:(0,x.tZ)(z.tr,{color:"gray500",size:"sm"}),onClick:()=>o(t-1e4),"aria-label":(0,C.t)("Go back 10 seconds")}),(0,x.tZ)(k.ZP,{"data-test-id":"replay-play-pause",size:"xsmall",title:s?(0,C.t)("Pause the Replay"):(0,C.t)("Play the Replay"),icon:s?(0,x.tZ)(z.ky,{size:"sm"}):(0,x.tZ)(z.JF,{size:"sm"}),onClick:()=>u(!s),"aria-label":s?(0,C.t)("Pause the Replay"):(0,C.t)("Play the Replay")}),(0,x.tZ)(k.ZP,{"data-test-id":"replay-forward-10s",size:"xsmall",title:(0,C.t)("Go forward 10 seconds"),icon:(0,x.tZ)(A,{color:"gray500",size:"sm"}),onClick:()=>o(t+1e4),"aria-label":(0,C.t)("Go forward 10 seconds")})]}),(0,x.BX)("span",{children:[F(t)," / ",r?F(r):"??:??"]}),(0,x.tZ)(L,{"data-test-id":"replay-skip-inactive",name:"skip-inactive",label:(0,C.t)("Skip to events"),onChange:()=>m(!i),inline:!1,stacked:!0,hideControlState:!0,value:i}),(0,x.tZ)(E.ZP,{active:String(d),merged:!0,children:c.map((e=>(0,x.BX)(k.ZP,{size:"xsmall",barId:String(e),onClick:()=>l(e),title:(0,C.t)("Set playback speed to %s",`${e}x`),children:[e,"x"]},e)))}),(0,x.tZ)(k.ZP,{"data-test-id":"replay-fullscreen",size:"xsmall",title:n?(0,C.t)("Exit full screen"):(0,C.t)("View in full screen"),"aria-label":n?(0,C.t)("Exit full screen"):(0,C.t)("View in full screen"),icon:(0,x.tZ)(z.Iq,{size:"sm"}),priority:n?"primary":void 0,onClick:p})]})]})};B.displayName="ReplayControls";const $=(0,s.Z)(P.s_,{target:"e1ryc6sl5"})("width:100%;",(e=>e.isFullscreen?"margin-bottom: 0;":""),";"),_=(0,s.Z)(P.N,{target:"e1ryc6sl4"})({name:"120xdle",styles:"display:grid;flex-direction:column"}),A=(0,s.Z)(z.tr,{target:"e1ryc6sl3"})({name:"13fmgtn",styles:"transform:scaleX(-1)"}),D=(0,s.Z)("div",{target:"e1ryc6sl2"})("display:grid;grid-column-gap:",(0,R.Z)(1),";grid-template-columns:max-content auto max-content max-content max-content;align-items:center;"),O=(0,s.Z)(j.Z,{target:"e1ryc6sl1"})("flex-grow:1;margin-top:",(0,R.Z)(1),";"),L=(0,s.Z)(S.Z,{target:"e1ryc6sl0"})("flex-direction:row;column-gap:",(0,R.Z)(.5),";align-items:center;padding-bottom:0;label{margin-bottom:0;}");function X(e){let{toggleFullscreen:t=(()=>{}),speedOptions:r=[.5,1,2,4]}=e;const{isFullscreen:n}=T();return(0,x.tZ)(w,{children:e=>{let{currentTime:s,duration:a,isPlaying:i,setCurrentTime:o,setSpeed:l,skipInactive:d,speed:c,togglePlayPause:p,toggleSkipInactive:u}=e;return(0,x.tZ)($,{isFullscreen:n,children:(0,x.tZ)(_,{withPadding:!0,children:(0,x.tZ)(B,{currentTime:s,duration:a,isFullscreen:n,isPlaying:i,isSkippingInactive:d,setCurrentTime:o,setSpeed:l,speed:c,speedOptions:r,toggleFullscreen:t,togglePlayPause:p,toggleSkipInactive:u})})})}})}X.displayName="ReplayController";var G=r("../node_modules/@react-aria/utils/dist/module.js");function J(e){let{className:t,flexibleHeight:r,initRoot:n,videoDimensions:s}=e;const i=(0,a.useRef)(null),o=(0,a.useRef)(null),[l,d]=(0,a.useState)();(0,a.useEffect)((()=>n(o.current)),[o.current]);const c=(0,a.useCallback)((()=>{var e,t;return d({width:null===(e=i.current)||void 0===e?void 0:e.clientWidth,height:null===(t=i.current)||void 0===t?void 0:t.clientHeight})}),[i.current]);return(0,G.yU)({ref:i,onResize:c}),(0,a.useEffect)((()=>{void 0===window.ResizeObserver&&c()}),[c]),(0,a.useEffect)((()=>{if(o.current){const e=r?Math.min(((null==l?void 0:l.width)||0)/s.width,1):Math.min(((null==l?void 0:l.width)||0)/s.width,((null==l?void 0:l.height)||0)/s.height,1);e&&(o.current.style["transform-origin"]="top left",o.current.style.transform=`scale(${e})`,o.current.style.width=s.width*e+"px",o.current.style.height=s.height*e+"px")}}),[l,s]),(0,x.tZ)(q,{ref:i,"data-test-id":"replay-window",children:(0,x.tZ)("div",{ref:o,"data-test-id":"replay-view",className:t})})}J.displayName="BasePlayerRoot";const U=(0,s.Z)(P.s_,{target:"elabtru3"})((e=>e.isFullscreen?"border: none; background: transparent;":"")," iframe{border-radius:",(e=>e.theme.borderRadius),";}"),q=(0,s.Z)("div",{target:"elabtru2"})({name:"15ze7y8",styles:"width:100%;height:100%;background:transparent;display:flex;align-items:center;justify-content:center"}),V=(0,s.Z)(J,{target:"elabtru1"})({name:"r9ei49",styles:".replayer-wrapper>.replayer-mouse-tail{position:absolute;pointer-events:none;}.replayer-wrapper>iframe{border:none;}"}),H=(0,s.Z)(V,{target:"elabtru0"})(".replayer-mouse{position:absolute;width:32px;height:32px;transition:left 0.05s linear,top 0.05s linear;background-size:contain;background-repeat:no-repeat;background-image:url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTkiIHZpZXdCb3g9IjAgMCAxMiAxOSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTAgMTZWMEwxMS42IDExLjZINC44TDQuNCAxMS43TDAgMTZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNOS4xIDE2LjdMNS41IDE4LjJMMC43OTk5OTkgNy4xTDQuNSA1LjZMOS4xIDE2LjdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNC42NzQ1MSA4LjYxODUxTDIuODMwMzEgOS4zOTI3MUw1LjkyNzExIDE2Ljc2OTVMNy43NzEzMSAxNS45OTUzTDQuNjc0NTEgOC42MTg1MVoiIGZpbGw9ImJsYWNrIi8+CjxwYXRoIGQ9Ik0xIDIuNFYxMy42TDQgMTAuN0w0LjQgMTAuNkg5LjJMMSAyLjRaIiBmaWxsPSJibGFjayIvPgo8L3N2Zz4K');border-color:transparent;}.replayer-mouse:after{content:'';display:inline-block;width:32px;height:32px;background:",(e=>e.theme.purple300),";border-radius:100%;transform:translate(-50%, -50%);opacity:0.3;}.replayer-mouse.active:after{animation:click 0.2s ease-in-out 1;}.replayer-mouse.touch-device{background-image:none;width:70px;height:70px;border-radius:100%;margin-left:-37px;margin-top:-37px;border:4px solid rgba(73, 80, 246, 0);transition:left 0s linear,top 0s linear,border-color 0.2s ease-in-out;}.replayer-mouse.touch-device.touch-active{border-color:",(e=>e.theme.purple200),";transition:left 0.25s linear,top 0.25s linear,border-color 0.2s ease-in-out;}.replayer-mouse.touch-device:after{opacity:0;}.replayer-mouse.touch-device.active:after{animation:touch-click 0.2s ease-in-out 1;}@keyframes click{0%{opacity:0.3;width:20px;height:20px;}50%{opacity:0.5;width:10px;height:10px;}}@keyframes touch-click{0%{opacity:0;width:20px;height:20px;}50%{opacity:0.5;width:10px;height:10px;}}");function W(e){let{className:t}=e;const{isFullscreen:r}=T();return(0,x.tZ)(w,{children:e=>{let{initRoot:n,dimensions:s}=e;return(0,x.tZ)(U,{isFullscreen:r,children:(0,x.tZ)(H,{className:t,flexibleHeight:!r,initRoot:n,videoDimensions:s})})}})}W.displayName="ReplayPlayer";var Q=r("./app/components/tagsTable.tsx"),Y=r("./app/styles/organization.tsx"),K=r("./app/utils/events.tsx"),ee=r("./app/utils/withOrganization.tsx"),te=r("./app/views/asyncView.tsx"),re=r("../node_modules/@sentry/minimal/esm/index.js"),ne=r("./app/utils/discover/eventView.tsx"),se=r("./app/utils/discover/urls.tsx"),ae=r("./app/utils/useApi.tsx"),ie=r("./app/types/event.tsx");function oe(e){return e.type===ie.UZ.BREADCRUMBS}function le(e){return e.type===ie.UZ.SPANS}const de=/rrweb-[0-9]{13}.json/;function ce(e){return de.test(e.name)}const pe=function(e){let{eventSlug:t,location:r,orgId:n}=e;const[s,i]=t.split(":"),o=(0,ae.Z)(),[l,d]=(0,a.useState)(!1),[c,p]=(0,a.useState)({fetchError:void 0,fetching:!0,breadcrumbEntry:void 0,event:void 0,replayEvents:void 0,rrwebEvents:void 0,mergedReplayEvent:void 0});async function u(){const e=(await o.requestPromise(`/projects/${n}/${s}/events/${i}/attachments/`)).filter(ce);return(await Promise.all(e.map((async e=>{const t=await o.requestPromise(`/api/0/projects/${n}/${s}/events/${i}/attachments/${e.id}/?download`);return JSON.parse(t).events})))).flat()}async function m(){const e=ne.ZP.fromSavedQuery({id:"",name:"",version:2,fields:["timestamp","replayId"],orderby:"timestamp",projects:[],range:"14d",query:"transaction:sentry-replay-event"});e.additionalConditions.addFilterValues("replayId",[i]);const t=e.getEventsAPIPayload(r),s=await o.requestPromise(`/organizations/${n}/eventsv2/`,{query:t});return Promise.all(s.data.map((e=>o.requestPromise(`/organizations/${n}/events/${(0,se.JE)(e)}/`))))}(0,a.useEffect)((()=>{!async function(){d(!1),p({fetchError:void 0,fetching:!0,breadcrumbEntry:void 0,event:void 0,replayEvents:void 0,rrwebEvents:void 0,mergedReplayEvent:void 0});try{const[e,r,s]=await Promise.all([o.requestPromise(`/organizations/${n}/events/${t}/`),u(),m()]),a=function(e){const t=e.flatMap((e=>e.entries.filter(oe))).flatMap((e=>e.data.values)).map((e=>JSON.stringify(e))),r=new Set(t);return{type:ie.UZ.BREADCRUMBS,data:{values:Array.from(r).map((e=>JSON.parse(e)))}}}(s||[]),i=function(e){var t;const r=e.flatMap((e=>{var t;return null===(t=e.entries.find(le))||void 0===t?void 0:t.data}));return{...e[0],entries:[{type:ie.UZ.SPANS,data:r}],endTimestamp:null===(t=r[r.length-1])||void 0===t?void 0:t.timestamp}}(s||[]);p({...c,fetchError:void 0,fetching:!1,event:e,mergedReplayEvent:i,replayEvents:s,rrwebEvents:r,breadcrumbEntry:a})}catch(e){re.Tb(e),p({fetchError:e,fetching:!1,breadcrumbEntry:void 0,event:void 0,replayEvents:void 0,rrwebEvents:void 0,mergedReplayEvent:void 0})}}()}),[n,t,l]);const g=(0,a.useCallback)((()=>{d(!0)}),[]);return{fetchError:c.fetchError,fetching:c.fetching,onRetry:g,breadcrumbEntry:c.breadcrumbEntry,event:c.event,replayEvents:c.replayEvents,rrwebEvents:c.rrwebEvents,mergedReplayEvent:c.mergedReplayEvent}},ue=e=>{let{event:t}=e;const r=(0,K.FC)(t);return(0,x.BX)(ve,{"data-test-id":"event-header",children:[(0,x.BX)(Ze,{children:[(0,x.tZ)(d.Z,{data:t})," ",(0,x.tZ)(u.Z,{type:"alpha"})]}),r&&(0,x.tZ)(xe,{children:(0,x.tZ)(p.Z,{message:r})})]})};ue.displayName="EventHeader";class me extends te.Z{constructor(){super(...arguments),(0,n.Z)(this,"state",{loading:!0,reloading:!1,error:!1,errors:{}})}getTitle(){return this.state.event?`${this.state.event.id} - Replays - ${this.props.params.orgId}`:`Replays - ${this.props.params.orgId}`}renderLoading(){return(0,x.tZ)(Y.JH,{children:super.renderLoading()})}renderBody(){const{location:e,router:t,route:r,organization:n,params:{eventSlug:s,orgId:a}}=this.props;return(0,x.tZ)(ye,{eventSlug:s,location:e,orgId:a,organization:n,router:t,route:r})}}function ge(e){return e.projectSlug||e["project.name"]}const he=(0,s.Z)("div",{target:"erh0irb4"})((e=>e.isFullscreen?`\n    display: grid;\n    grid-template-rows: auto max-content;\n    background: ${e.theme.gray500};`:""),";");function ye(e){const t=e.orgId,{ref:r,isFullscreen:n,toggle:s}=T(),{fetchError:d,fetching:p,onRetry:u,breadcrumbEntry:h,event:y,replayEvents:v,rrwebEvents:Z,mergedReplayEvent:b}=pe(e);return console.log({fetchError:d,fetching:p,onRetry:u,event:y,replayEvents:v,rrwebEvents:Z,mergedReplayEvent:b}),(0,x.BX)(be,{children:[(0,x.tZ)(m.h4,{children:(0,x.BX)(m.oB,{children:[(0,x.tZ)(i.Z,{crumbs:[{to:`/organizations/${t}/replays/`,label:(0,C.t)("Replays")},{label:(0,C.t)("Replay Details")}]}),y?(0,x.tZ)(ue,{event:y}):null]})}),(0,x.BX)(m.uT,{children:[(0,x.tZ)(m.or,{children:p?(0,x.tZ)(g.Z,{}):y?!Z||Z.length<2?(0,x.tZ)(o.Z,{onRetry:u,hideSupportLinks:!0,heading:(0,C.t)("Expected two or more replay events"),message:(0,x.BX)(a.Fragment,{children:[(0,x.tZ)("p",{children:(0,C.t)("This Replay may not have captured any user actions.")}),(0,x.tZ)("p",{children:(0,C.t)("Or there may be an issue loading the actions from the server, click to try loading the Replay again.")})]})}):(0,x.BX)(a.Fragment,{children:[(0,x.tZ)(f,{events:Z,children:(0,x.BX)(he,{isFullscreen:n,ref:r,children:[(0,x.tZ)(W,{}),(0,x.tZ)(X,{toggleFullscreen:s})]})}),h&&(0,x.tZ)(c.Z,{projectSlug:ge(y),organization:e.organization,event:y,entry:h,route:e.route,router:e.router}),b&&(0,x.tZ)(c.Z,{projectSlug:ge(b),organization:e.organization,event:b,entry:b.entries[0],route:e.route,router:e.router},`${b.id}`)]}):(0,x.tZ)(l.Z,{})}),(0,x.tZ)(m.MF,{children:y?(0,x.tZ)(Q.Z,{generateUrl:()=>"",event:y,query:""}):null})]})]})}ye.displayName="ReplayLoader";const ve=(0,s.Z)("div",{target:"erh0irb3"})("max-width:",(e=>e.theme.breakpoints[0]),";"),Ze=(0,s.Z)("div",{target:"erh0irb2"})("font-size:",(e=>e.theme.headerFontSize),";margin-top:20px;"),xe=(0,s.Z)("div",{target:"erh0irb1"})("margin-top:",(0,R.Z)(1),";"),be=(0,s.Z)(Y.JH,{target:"erh0irb0"})({name:"1hcx8jb",styles:"padding:0"}),fe=(0,ee.Z)(me)}}]);
//# sourceMappingURL=../sourcemaps/app_views_replays_details_tsx.cc53765023ffc9ecd1efb1fd03df502a.js.map