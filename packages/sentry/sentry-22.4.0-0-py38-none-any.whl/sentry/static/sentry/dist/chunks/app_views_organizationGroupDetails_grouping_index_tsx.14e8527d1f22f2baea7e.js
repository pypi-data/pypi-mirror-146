"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_organizationGroupDetails_grouping_index_tsx"],{"./app/views/organizationGroupDetails/grouping/index.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>ie});var i=n("./app/components/acl/feature.tsx"),r=n("./app/components/alert.tsx"),o=n("./app/locale.tsx"),a=n("./app/styles/organization.tsx"),s=n("./app/utils/withOrganization.tsx"),l=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),d=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/react/index.js")),u=n("../node_modules/react-router/es/index.js"),p=n("../node_modules/lodash/debounce.js"),c=n.n(p),g=n("./app/components/forms/controls/rangeSlider/index.tsx"),m=n("./app/components/forms/controls/rangeSlider/slider.tsx"),h=n("./app/components/layouts/thirds.tsx"),Z=n("./app/components/links/externalLink.tsx"),f=n("./app/components/loadingIndicator.tsx"),v=n("./app/components/pagination.tsx"),y=n("./app/components/panels/index.tsx"),b=n("./app/constants/index.tsx"),x=n("./app/icons/index.tsx"),w=n("./app/styles/space.tsx"),k=n("./app/utils.tsx"),j=n("./app/utils/parseLinkHeader.tsx"),S=n("./app/utils/withApi.tsx"),_=n("./app/components/button.tsx"),z=n("./app/components/buttonBar.tsx"),B=n("./app/components/featureBadge.tsx"),T=n("./app/components/loadingError.tsx"),$=n("./app/views/settings/components/emptyMessage.tsx"),C=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function E(e){var t;let{error:n,groupId:i,onRetry:a,orgSlug:s,projSlug:l,hasProjectWriteAccess:u}=e;if("string"==typeof n)return(0,C.tZ)(r.Z,{type:"warning",children:n});if(403===n.status&&null!==(t=n.responseJSON)&&void 0!==t&&t.detail){const{code:e,message:t}=n.responseJSON.detail,{action:r,title:a,subTitle:p,leftAligned:c}=function(e){switch(e){case"merged_issues":return{title:(0,o.t)("Grouping breakdown is not available in this issue"),subTitle:(0,o.t)("This issue needs to be fully unmerged before grouping breakdown is available"),action:(0,C.tZ)(_.ZP,{priority:"primary",to:`/organizations/${s}/issues/${i}/merged/?${location.search}`,children:(0,o.t)("Unmerge issue")})};case"missing_feature":return{title:(0,o.t)("This project does not have the grouping breakdown available. Is your organization still an early adopter?")};case"no_events":return{title:(0,o.t)("This issue has no events")};case"issue_not_hierarchical":return{title:(0,o.t)("Grouping breakdown is not available in this issue"),subTitle:(0,o.t)("Only new issues with the latest grouping strategy have this feature available")};case"project_not_hierarchical":return{title:(0,C.BX)(d.Fragment,{children:[(0,o.t)("Update your Grouping Config"),(0,C.tZ)(B.Z,{type:"beta"})]}),subTitle:(0,C.BX)(d.Fragment,{children:[(0,C.tZ)("p",{children:(0,o.t)("Enable advanced grouping insights and functionality by updating this project to the latest Grouping Config:")}),(0,C.BX)("ul",{children:[(0,C.tZ)("li",{children:(0,o._N)("[strong:Breakdowns:] Explore events in this issue by call hierarchy.",{strong:(0,C.tZ)("strong",{})})}),(0,C.tZ)("li",{children:(0,o._N)("[strong:Stack trace annotations:] See important frames Sentry uses to group issues directly in the stack trace.",{strong:(0,C.tZ)("strong",{})})})]})]}),leftAligned:!0,action:(0,C.BX)(z.ZP,{gap:1,children:[(0,C.tZ)(_.ZP,{priority:"primary",to:`/settings/${s}/projects/${l}/issue-grouping/#upgrade-grouping`,disabled:!u,title:u?void 0:(0,o.t)("You do not have permission to update this project"),children:(0,o.t)("Upgrade Grouping Strategy")}),(0,C.tZ)(_.ZP,{href:"https://docs.sentry.io/product/data-management-settings/event-grouping/grouping-breakdown/",children:(0,o.t)("Read the docs")})]})};default:return{}}}(e);return(0,C.tZ)(y.s_,{children:(0,C.tZ)($.Z,{size:"large",title:null!=a?a:t,description:p,action:r,leftAligned:c})})}return(0,C.tZ)(T.Z,{message:(0,o.t)("Unable to load grouping levels, please try again later"),onRetry:a})}E.displayName="ErrorMessage";const G=E;var N=n("./app/components/eventOrGroupHeader.tsx"),X=n("./app/components/timeSince.tsx");function q(e){let{sampleEvent:t,eventCount:n,organization:i}=e;return(0,C.BX)(d.Fragment,{children:[(0,C.BX)(R,{children:[(0,C.tZ)(N.Z,{data:t,organization:i,grouping:!0,hideIcons:!0,hideLevel:!0}),(0,C.tZ)(A,{children:(0,C.BX)(F,{children:[(0,C.tZ)(P,{size:"11px"}),(0,C.tZ)(X.Z,{date:t.dateCreated?t.dateCreated:t.dateReceived,suffix:(0,o.t)("old")})]})})]}),(0,C.tZ)(L,{children:n})]})}q.displayName="NewIssue";const I=q,R=(0,l.Z)("div",{target:"ebu51d34"})({name:"1eiwmge",styles:"overflow:hidden;line-height:1.1"}),A=(0,l.Z)("div",{target:"ebu51d33"})("display:grid;grid-auto-flow:column;gap:",(0,w.Z)(2),";justify-content:flex-start;"),F=(0,l.Z)("div",{target:"ebu51d32"})("display:grid;gap:",(0,w.Z)(.5),";grid-template-columns:max-content 1fr;align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";"),L=(0,l.Z)("div",{target:"ebu51d31"})({name:"1ewtsvq",styles:"align-items:center;font-variant-numeric:tabular-nums;line-height:1.1"}),P=(0,l.Z)(x.jo,{target:"ebu51d30"})("color:",(e=>e.theme.subText),";");function U(){return(0,C.tZ)(J,{children:(0,C.BX)(Z.Z,{href:`mailto:grouping@sentry.io?subject=${encodeURIComponent("Grouping Feedback")}&body=${encodeURIComponent(`URL: ${window.location.href}\n\nThanks for taking the time to provide us feedback. What's on your mind?`)}`,children:[(0,C.tZ)(W,{})," ",(0,o.t)("Give Feedback")]})})}function H(e){var t,n;let{api:i,groupId:r,location:a,organization:s,router:l,projSlug:p}=e;const{cursor:g,level:m}=a.query,[Z,v]=(0,d.useState)(!1),[y,x]=(0,d.useState)(!1),[w,S]=(0,d.useState)(void 0),[_,z]=(0,d.useState)([]),[B,T]=(0,d.useState)(void 0),[$,E]=(0,d.useState)([]),[N,X]=(0,d.useState)("");function q(e){return e.pathname===a.pathname||e.pathname!==a.pathname&&void 0===e.query.cursor&&void 0===e.query.level||(u.browserHistory.replace({pathname:e.pathname,query:{...e.query,cursor:void 0,level:void 0}}),!1)}(0,d.useEffect)((()=>(A(),u.browserHistory.listen(q))),[]),(0,d.useEffect)((()=>{!function(){if(_.length)if((0,k.ri)(m)){if(!(0,k.ri)(_[m]))return void S((0,o.t)("The level you were looking for was not found."));if(m===B)return;T(m)}else _.length>1?T(_[1].id):T(_[0].id)}()}),[_]),(0,d.useEffect)((()=>{(0,k.ri)(B)&&m!==B&&l.replace({pathname:a.pathname,query:{...a.query,cursor:void 0,level:B}})}),[B]),(0,d.useEffect)((()=>{!async function(){if(_.length&&(0,k.ri)(B)){x(!0),S(void 0);try{var e;const[t,,n]=await i.requestPromise(`/issues/${r}/grouping/levels/${B}/new-issues/`,{method:"GET",includeAllArgs:!0,query:{...a.query,per_page:10}}),o=null==n||null===(e=n.getResponseHeader)||void 0===e?void 0:e.call(n,"Link");X(null!=o?o:""),E(Array.isArray(t)?t:[t]),x(!1)}catch(e){x(!1),S(e)}}}()}),[B,g]);const R=c()((e=>{T(Number(e))}),b.Dk);async function A(){v(!0),S(void 0);try{const e=await i.requestPromise(`/issues/${r}/grouping/levels/`);v(!1),z(e.levels)}catch(e){v(!1),S(e)}}if(Z)return(0,C.tZ)(f.Z,{});if(w)return(0,C.tZ)(d.Fragment,{children:(0,C.tZ)(h.uT,{children:(0,C.BX)(h.or,{fullWidth:!0,children:[(0,C.tZ)(G,{onRetry:A,groupId:r,error:w,projSlug:p,orgSlug:s.slug,hasProjectWriteAccess:s.access.includes("project:write")}),(0,C.tZ)(U,{})]})})});if(!$.length)return(0,C.tZ)(f.Z,{});const F=(0,j.Z)(N),L=(null===(t=F.previous)||void 0===t?void 0:t.results)||(null===(n=F.next)||void 0===n?void 0:n.results),P=$.length;return(0,C.tZ)(h.uT,{children:(0,C.tZ)(h.or,{fullWidth:!0,children:(0,C.BX)(D,{children:[(0,C.tZ)(M,{children:(0,o.t)("This issue is an aggregate of multiple events that sentry determined originate from the same root-cause. Use this page to explore more detailed groupings that exist within this issue.")}),(0,C.BX)(Y,{children:[(0,C.BX)(ee,{children:[(0,o.t)("Fewer issues"),(0,C.tZ)(te,{name:"grouping-level",allowedValues:_.map((e=>Number(e.id))),value:null!=B?B:0,onChange:R,showLabel:!1}),(0,o.t)("More issues")]}),(0,C.BX)(Q,{isReloading:y,children:[(0,C.tZ)(K,{headers:["",(0,o.t)("Events")],children:$.map((e=>{let{hash:t,title:n,metadata:i,latestEvent:r,eventCount:o}=e;return(0,C.tZ)(I,{sampleEvent:{...r,metadata:{...i||r.metadata,current_level:B},title:n||r.title},eventCount:o,organization:s},t)}))}),(0,C.tZ)(V,{pageLinks:N,disabled:y,caption:(0,o._N)("Showing [current] of [total] [result]",{result:L?(0,o.t)("results"):(0,o.tn)("result","results",P),current:P,total:L?`${P}+`:P})})]})]}),(0,C.tZ)(U,{})]})})})}U.displayName="LinkFooter",H.displayName="Grouping";const O=(0,S.Z)(H),W=(0,l.Z)(x.I8,{target:"e1m7ctwt9"})("margin-right:",(0,w.Z)(.5),";"),D=(0,l.Z)("div",{target:"e1m7ctwt8"})("flex:1;display:grid;align-content:flex-start;margin:-",(0,w.Z)(3)," -",(0,w.Z)(4),";padding:",(0,w.Z)(3)," ",(0,w.Z)(4),";"),M=(0,l.Z)("p",{target:"e1m7ctwt7"})("&&{margin-bottom:",(0,w.Z)(2),";}"),J=(0,l.Z)("p",{target:"e1m7ctwt6"})("&&{margin-top:",(0,w.Z)(2),";}"),Y=(0,l.Z)("div",{target:"e1m7ctwt5"})("display:grid;gap:",(0,w.Z)(3),";"),K=(0,l.Z)(y.KB,{target:"e1m7ctwt4"})("grid-template-columns:1fr minmax(60px, auto);>*{padding:",(0,w.Z)(1.5)," ",(0,w.Z)(2),";:nth-child(-n + 2){padding:",(0,w.Z)(2),";}:nth-child(2n){display:flex;text-align:right;justify-content:flex-end;}}@media (min-width: ",(e=>e.theme.breakpoints[3]),"){grid-template-columns:1fr minmax(80px, auto);}"),V=(0,l.Z)(v.Z,{target:"e1m7ctwt3"})({name:"1i9vogi",styles:"margin-top:0"}),Q=(0,l.Z)("div",{target:"e1m7ctwt2"})((e=>e.isReloading&&`\n      ${K}, ${V} {\n        opacity: 0.5;\n        pointer-events: none;\n      }\n    `),";"),ee=(0,l.Z)("div",{target:"e1m7ctwt1"})("display:grid;gap:",(0,w.Z)(1.5),";grid-template-columns:max-content max-content;justify-content:space-between;align-items:flex-start;position:relative;font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.subText),";padding-bottom:",(0,w.Z)(2),";@media (min-width: 700px){grid-template-columns:max-content minmax(270px, auto) max-content;align-items:center;justify-content:flex-start;padding-bottom:0;}"),te=(0,l.Z)(g.Z,{target:"e1m7ctwt0"})(m.Z,"{background:transparent;margin-top:0;margin-bottom:0;::-ms-thumb{box-shadow:0 0 0 3px ",(e=>e.theme.backgroundSecondary),";}::-moz-range-thumb{box-shadow:0 0 0 3px ",(e=>e.theme.backgroundSecondary),";}::-webkit-slider-thumb{box-shadow:0 0 0 3px ",(e=>e.theme.backgroundSecondary),";}}position:absolute;bottom:0;left:",(0,w.Z)(1.5),";right:",(0,w.Z)(1.5),";@media (min-width: 700px){position:static;left:auto;right:auto;}");function ne(e){let{organization:t,location:n,group:s,router:l,project:d}=e;return(0,C.tZ)(i.Z,{features:["grouping-tree-ui"],organization:t,renderDisabled:()=>(0,C.tZ)(a.JH,{children:(0,C.tZ)(r.Z,{type:"warning",children:(0,o.t)("You don't have access to this feature")})}),children:(0,C.tZ)(O,{location:n,groupId:s.id,organization:t,router:l,projSlug:d.slug})})}ne.displayName="GroupingContainer";const ie=(0,s.Z)(ne)}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_grouping_index_tsx.89c4808af71cbd5c9e106d652a33d2b6.js.map