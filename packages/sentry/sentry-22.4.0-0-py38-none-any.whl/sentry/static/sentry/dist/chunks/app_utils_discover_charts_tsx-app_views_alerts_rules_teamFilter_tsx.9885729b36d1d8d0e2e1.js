"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_discover_charts_tsx-app_views_alerts_rules_teamFilter_tsx"],{"./app/utils/discover/charts.tsx":(e,t,n)=>{n.d(t,{CX:()=>a,gu:()=>l});var s=n("./app/locale.tsx"),o=n("./app/utils.tsx"),i=n("./app/utils/discover/fields.tsx"),r=n("./app/utils/formatters.tsx");function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!(0,o.ri)(e))return"â€”";switch((0,i.Px)(t)){case"integer":case"number":return e.toLocaleString();case"percentage":return(0,r.rl)(e,2);case"duration":return(0,r.g9)(e/1e3,2,!0);default:return e.toString()}}function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch((0,i.Px)(t)){case"integer":case"number":return n?(0,r.Du)(e):e.toLocaleString();case"percentage":return(0,r.rl)(e,0);case"duration":return d(e);default:return e.toString()}}function d(e){if(0===e)return"0";if(e>=r.ps){const t=(e/r.ps).toFixed(0);return(0,s.t)("%swk",t)}if(e>=r.x4){const t=(e/r.x4).toFixed(0);return(0,s.t)("%sd",t)}if(e>=r.kr){const t=(e/r.kr).toFixed(0);return(0,s.t)("%shr",t)}if(e>=r.EB){const t=(e/r.EB).toFixed(0);return(0,s.t)("%smin",t)}if(e>=r.sh){const t=(e/r.sh).toFixed(0);return(0,s.t)("%ss",t)}const t=e.toFixed(0);return(0,s.t)("%sms",t)}},"./app/views/alerts/rules/teamFilter.tsx":(e,t,n)=>{n.d(t,{Z:()=>B});var s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),i=n("../node_modules/lodash/debounce.js"),r=n.n(i),a=n("./app/components/forms/controls/input.tsx"),l=n("./app/components/loadingIndicator.tsx"),d=n("./app/constants/index.tsx"),c=n("./app/locale.tsx"),p=n("./app/styles/space.tsx"),u=n("./app/utils/isActiveSuperuser.tsx"),h=n("./app/utils/useTeams.tsx"),m=n("./app/components/badge.tsx"),g=n("./app/components/checkboxFancy/checkboxFancy.tsx"),x=n("./app/components/dropdownButton.tsx"),f=n("./app/components/dropdownControl.tsx"),b=n("./app/icons/index.tsx"),w=n("./app/styles/overflowEllipsis.tsx"),Z=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function k(e){let{id:t,label:n,items:s,toggleSection:i,toggleFilter:r}=e;const a=s.filter((e=>e.checked)).length;return(0,Z.BX)(o.Fragment,{children:[(0,Z.BX)(S,{children:[(0,Z.tZ)("span",{children:n}),(0,Z.tZ)(g.Z,{isChecked:a===s.length,isIndeterminate:a>0&&a!==s.length,onClick:e=>{e.stopPropagation(),i(t)}})]}),s.filter((e=>!e.filtered)).map((e=>(0,Z.BX)(T,{isChecked:e.checked,onClick:n=>{n.stopPropagation(),r(t,e.value)},children:[(0,Z.tZ)(_,{children:e.label}),(0,Z.tZ)(g.Z,{isChecked:e.checked})]},e.value)))]})}function v(e){let{onFilterChange:t,header:n,dropdownSections:s,showMyTeamsDescription:o,fullWidth:i=!1}=e;function r(e,n){const o=s.find((t=>t.id===e)),i=new Set(o.items.filter((e=>e.checked)).map((e=>e.value)));i.has(n)?i.delete(n):i.add(n),t(e,i)}function a(e){const n=s.find((t=>t.id===e)),o=n.items.filter((e=>e.checked)),i=n.items.length===o.length?new Set:new Set(n.items.map((e=>e.value)));t(e,i)}const l=s.map((e=>e.items)).flat().filter((e=>e.checked));let d=o?(0,c.t)("My Teams"):(0,c.t)("All Teams");return l.length>0&&(d=l[0].label),(0,Z.tZ)(f.ZP,{menuWidth:"240px",fullWidth:i,blendWithActor:!0,alwaysRenderMenu:!1,button:e=>{let{isOpen:t,getActorProps:n}=e;return(0,Z.BX)(F,{...n(),isOpen:t,icon:(0,Z.tZ)(b.qO,{}),priority:"default","data-test-id":"filter-button",fullWidth:i,children:[(0,Z.tZ)(C,{fullWidth:i,children:d}),l.length>1&&(0,Z.tZ)(z,{text:"+"+(l.length-1)})]})},children:e=>{let{isOpen:t,getMenuProps:o}=e;return(0,Z.tZ)(y,{...o(),isOpen:t,blendCorner:!0,alignMenu:"left",width:"240px",detached:!0,children:(0,Z.BX)(M,{children:[n,s.map((e=>(0,Z.tZ)(k,{...e,toggleSection:a,toggleFilter:r},e.id)))]})})}})}k.displayName="FilterSection",v.displayName="Filter";const y=(0,s.Z)(f.VY,{target:"e18owixo7"})({name:"uoed0r",styles:"max-height:290px;overflow-y:auto"}),S=(0,s.Z)("div",{target:"e18owixo6"})("display:grid;grid-template-columns:auto min-content;grid-column-gap:",(0,p.Z)(1),";align-items:center;margin:0;background-color:",(e=>e.theme.backgroundSecondary),";color:",(e=>e.theme.gray300),";font-weight:normal;font-size:",(e=>e.theme.fontSizeMedium),";padding:",(0,p.Z)(1)," ",(0,p.Z)(2),";border-bottom:1px solid ",(e=>e.theme.border),";"),F=(0,s.Z)(x.Z,{target:"e18owixo5"})("white-space:nowrap;display:flex;align-items:center;z-index:",(e=>e.theme.zIndex.dropdown),";",(e=>e.fullWidth?"\n      width: 100%\n  ":"max-width: 200px"),";"),C=(0,s.Z)("span",{target:"e18owixo4"})("white-space:nowrap;text-overflow:ellipsis;overflow:hidden;flex:1;@media (max-width: ",(e=>e.theme.breakpoints[0]),"){text-align:",(e=>e.fullWidth&&"start"),";}"),z=(0,s.Z)(m.Z,{target:"e18owixo3"})({name:"ozd7xs",styles:"flex-shrink:0"}),M=(0,s.Z)("ul",{target:"e18owixo2"})({name:"z06qs",styles:"list-style:none;margin:0;padding:0"}),T=(0,s.Z)("li",{target:"e18owixo1"})("display:grid;grid-template-columns:1fr max-content;grid-column-gap:",(0,p.Z)(1),";align-items:center;padding:",(0,p.Z)(1)," ",(0,p.Z)(2),";border-bottom:1px solid ",(e=>e.theme.border),";:hover{background-color:",(e=>e.theme.backgroundSecondary),";}",g.Z,"{opacity:",(e=>e.isChecked?1:.3),";}&:hover ",g.Z,"{opacity:1;}&:hover span{color:",(e=>e.theme.blue300),";text-decoration:underline;}"),_=(0,s.Z)("div",{target:"e18owixo0"})("font-size:",(e=>e.theme.fontSizeMedium),";",w.Z,";"),j=v;function W(e){let{selectedTeams:t,showStatus:n=!1,selectedStatus:s=new Set,handleChangeFilter:i,fullWidth:a=!1,showIsMemberTeams:l=!1,showMyTeamsAndUnassigned:p=!0,showMyTeamsDescription:m=!1}=e;const{teams:g,onSearch:x,fetching:f}=(0,h.Z)(),b=r()(x,d.Dk),[w,k]=(0,o.useState)(),v=(0,u.M)(),y=[{label:(0,c.t)("Unresolved"),value:"open",checked:s.has("open"),filtered:!1},{label:(0,c.t)("Resolved"),value:"closed",checked:s.has("closed"),filtered:!1}],S=[{label:(0,c.t)("My Teams"),value:"myteams",checked:t.has("myteams"),filtered:!1},{label:(0,c.t)("Unassigned"),value:"unassigned",checked:t.has("unassigned"),filtered:!1}],F=g.filter((e=>e.isMember)),C=(v?g:l?F:g).map((e=>{let{id:n,slug:s}=e;return{label:s,value:n,filtered:!!w&&!s.toLowerCase().includes(w.toLowerCase()),checked:t.has(n)}}));return(0,Z.tZ)(j,{fullWidth:a,showMyTeamsDescription:m,header:(0,Z.BX)(P,{children:[(0,Z.tZ)(X,{autoFocus:!0,placeholder:(0,c.t)("Filter teams"),onClick:e=>{e.stopPropagation()},onChange:e=>{const t=e.target.value;k(t),b(t)},value:w||""}),f&&(0,Z.tZ)(A,{size:16,mini:!0})]}),onFilterChange:i,dropdownSections:[...n?[{id:"status",label:(0,c.t)("Status"),items:y}]:[],{id:"teams",label:(0,c.t)("Teams"),items:p?[...S,...C]:[...C]}]})}W.displayName="TeamFilter";const B=W,P=(0,s.Z)("div",{target:"e1jkzz582"})({name:"bjn8wh",styles:"position:relative"}),X=(0,s.Z)(a.Z,{target:"e1jkzz581"})("border:none;border-radius:0;border-bottom:solid 1px ",(e=>e.theme.border),";font-size:",(e=>e.theme.fontSizeMedium),";"),A=(0,s.Z)(l.Z,{target:"e1jkzz580"})("position:absolute;right:0;top:",(0,p.Z)(.75),";")}}]);
//# sourceMappingURL=../sourcemaps/app_utils_discover_charts_tsx-app_views_alerts_rules_teamFilter_tsx.d5d9710c6950674dd1eb6489bc0a9c27.js.map