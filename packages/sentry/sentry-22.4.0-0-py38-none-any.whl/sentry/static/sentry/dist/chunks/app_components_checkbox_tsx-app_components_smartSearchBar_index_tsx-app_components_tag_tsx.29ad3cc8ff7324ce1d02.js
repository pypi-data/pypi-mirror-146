"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_checkbox_tsx-app_components_smartSearchBar_index_tsx-app_components_tag_tsx","app_components_tag_tsx"],{"./app/actionCreators/savedSearches.tsx":(e,t,s)=>{s.d(t,{bG:()=>l,C2:()=>d,VH:()=>p,cB:()=>h,YO:()=>m,k0:()=>f,g_:()=>v,k9:()=>x});var r=s("./app/actionCreators/indicator.tsx"),o=s("./app/actions/savedSearchesActions.tsx"),n=s("./app/constants/index.tsx"),a=s("./app/locale.tsx"),i=s("./app/types/index.tsx"),c=s("./app/utils/handleXhrErrorResponse.tsx");function l(){o.Z.resetSavedSearches()}function d(e,t){const s=`/organizations/${t}/searches/`;o.Z.startFetchSavedSearches();const n=e.requestPromise(s,{method:"GET"});return n.then((e=>{o.Z.fetchSavedSearchesSuccess(e)})).catch((e=>{o.Z.fetchSavedSearchesError(e),(0,r.Iw)((0,a.t)("Unable to load saved searches"))})),n}const u=e=>`/organizations/${e}/recent-searches/`;function p(e,t,s,r){const o=u(t),n=e.requestPromise(o,{method:"POST",data:{query:r,type:s}});return n.catch((0,c.Z)("Unable to save a recent search")),n}function h(e,t,s,r,n){const a=e.requestPromise(`/organizations/${t}/searches/`,{method:"POST",data:{type:i.L4.ISSUE,query:r,name:s,sort:n}});return a.then((e=>{o.Z.createSavedSearchSuccess(e)})),a}function m(e,t,s,r){const o=u(t),a=e.requestPromise(o,{query:{query:r,type:s,limit:n.x}});return a.catch((e=>{401!==e.status&&403!==e.status&&(0,c.Z)("Unable to fetch recent searches")(e)})),a}const g=e=>`/organizations/${e}/pinned-searches/`;function f(e,t,s,r,n){const a=g(t);o.Z.pinSearch(s,r,n);const i=e.requestPromise(a,{method:"PUT",data:{query:r,type:s,sort:n}});return i.then(o.Z.pinSearchSuccess),i.catch((0,c.Z)("Unable to pin search")),i.catch((()=>{o.Z.unpinSearch(s)})),i}function v(e,t,s,r){const n=g(t);o.Z.unpinSearch(s);const a=e.requestPromise(n,{method:"DELETE",data:{type:s}});return a.catch((0,c.Z)("Unable to un-pin search")),a.catch((()=>{const{type:e,query:t}=r;o.Z.pinSearch(e,t)})),a}function x(e,t,s){const r=`/organizations/${t}/searches/${s.id}/`;return e.requestPromise(r,{method:"DELETE"}).then((()=>o.Z.deleteSavedSearchSuccess(s))).catch((0,c.Z)("Unable to delete a saved search"))}},"./app/actions/savedSearchesActions.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});const r=(0,s("../node_modules/reflux/src/index.js").createActions)(["resetSavedSearches","startFetchSavedSearches","fetchSavedSearchesSuccess","fetchSavedSearchesError","createSavedSearchSuccess","deleteSavedSearchSuccess","pinSearch","pinSearchSuccess","unpinSearch"])},"./app/components/acl/access.tsx":(e,t,s)=>{s.d(t,{Z:()=>p});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/react/index.js"),n=s("./app/components/alert.tsx"),a=s("./app/locale.tsx"),i=s("./app/utils/isRenderFunc.tsx"),c=s("./app/utils/withConfig.tsx"),l=s("./app/utils/withOrganization.tsx");const d=(0,s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js").tZ)(n.Z,{type:"error",showIcon:!0,children:(0,a.t)("You do not have sufficient permissions to access this.")});class u extends o.Component{render(){const{organization:e,config:t,access:s,requireAll:r,isSuperuser:o,renderNoAccessMessage:n,children:a}=this.props,{access:c}=e||{access:[]},l=!s||s[r?"every":"some"]((e=>c.includes(e))),u=!(!t.user||!t.user.isSuperuser),p={hasAccess:l,hasSuperuser:u},h=l&&(!o||u);return h||"function"!=typeof n?!h&&n?d:(0,i.l)(a)?a(p):h?a:null:n(p)}}u.displayName="Access",(0,r.Z)(u,"defaultProps",{renderNoAccessMessage:!1,isSuperuser:!1,requireAll:!0,access:[]});const p=(0,l.Z)((0,c.Z)(u))},"./app/components/checkbox.tsx":(e,t,s)=>{s.d(t,{Z:()=>n}),s("../node_modules/react/index.js");var r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const o=e=>(0,r.tZ)("input",{type:"checkbox",...e});o.displayName="Checkbox",o.defaultProps={checked:!1};const n=o},"./app/components/dropdownLink.tsx":(e,t,s)=>{s.d(t,{Z:()=>p}),s("../node_modules/react/index.js");var r=s("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),o=s("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),n=s("../node_modules/classnames/index.js"),a=s.n(n),i=s("./app/components/dropdownMenu.tsx"),c=s("./app/icons/index.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d=e=>(0,r.iv)(".dropdown-menu{&>li>a{color:",e.textColor,";&:hover,&:focus{color:inherit;background-color:",e.hover,";}}& .disabled{cursor:not-allowed;&:hover{background:inherit;color:inherit;}}}.dropdown-submenu:hover>span{color:",e.textColor,";background:",e.hover,";}","");function u(e){let{anchorMiddle:t,title:s,customTitle:r,children:n,menuClasses:u,className:p,topLevelClasses:h,anchorRight:m=!1,disabled:g=!1,caret:f=!0,alwaysRenderMenu:v=!0,...x}=e;const y=(0,o.u)();return(0,l.tZ)(i.Z,{alwaysRenderMenu:v,...x,children:e=>{let{isOpen:o,getRootProps:i,getActorProps:x,getMenuProps:S}=e;const b=v||o,Z=a()("dropdown-actor",p,{"dropdown-menu-right":m,"dropdown-toggle":!0,hover:o,disabled:g}),T=a()("dropdown",h,{"pull-right":m,"anchor-right":m,"anchor-middle":t,open:o}),{onClick:w,...k}=x({className:Z});return(0,l.BX)("span",{css:d(y),...i({className:T}),"data-test-id":"dropdown-link",children:[(0,l.tZ)("a",{onClick:g?void 0:w,...k,children:r||(0,l.BX)("div",{className:"dropdown-actor-title",children:[s,f&&(0,l.tZ)(c.g6,{direction:o?"up":"down",size:"xs"})]})}),b&&(0,l.tZ)("ul",{...S({className:a()(u,"dropdown-menu")}),children:n})]})}})}u.displayName="DropdownLink";const p=u},"./app/components/forms/controls/radioBoolean.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});var r=s("../node_modules/react/index.js"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const n=r.forwardRef((function(e,t){let{name:s,disabled:r,label:n,value:a,checked:i,onChange:c}=e;return(0,o.tZ)("div",{className:"radio",children:(0,o.BX)("label",{style:{fontWeight:"normal"},children:[(0,o.tZ)("input",{ref:t,type:"radio",value:a,name:s,checked:i,onChange:function(e){const t="true"===e.target.value;null==c||c(t,e)},disabled:r})," ",n]})})})),a=r.forwardRef((function(e,t){let{disabled:s,name:r,onChange:a,value:i,yesFirst:c=!0,yesLabel:l="Yes",noLabel:d="No"}=e;const u=(0,o.tZ)(n,{ref:t,value:"true",checked:!0===i,name:r,disabled:s,label:l,onChange:a}),p=(0,o.tZ)(n,{value:"false",checked:!1===i,name:r,disabled:s,label:d,onChange:a});return(0,o.BX)("div",{children:[c?u:p,c?p:u]})}))},"./app/components/forms/index.tsx":(e,t,s)=>{s.d(t,{sB:()=>r.Z,Ig:()=>o.Z,ji:()=>n.Z,s8:()=>d.Z,Ff:()=>u.Z,l0:()=>p.Z,UP:()=>c.Z,eM:()=>f,mg:()=>v.Z,nv:()=>x.Z});var r=s("./app/components/forms/apiForm.tsx"),o=s("./app/components/forms/booleanField.tsx"),n=s("./app/components/forms/checkboxField.tsx"),a=(s("./app/components/forms/choiceMapperField.tsx"),s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js"),s("../node_modules/moment/moment.js"),s("./app/components/dropdownMenu.tsx"),s("./app/components/loadingIndicator.tsx"),s("./app/components/placeholder.tsx"),s("./app/icons/index.tsx"),s("./app/styles/input.tsx")),i=s("./app/styles/space.tsx"),c=s("./app/components/forms/inputField.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");a.T,(0,i.Z)(1),s("./app/components/forms/dateTimeField.tsx");var d=s("./app/components/forms/emailField.tsx"),u=s("./app/components/forms/fieldFromConfig.tsx"),p=(s("./app/components/forms/fieldSeparator.tsx"),s("./app/components/forms/form.tsx")),h=(s("./app/components/forms/formPanel.tsx"),s("./app/components/forms/hiddenField.tsx"),s("./app/components/forms/jsonForm.tsx"),s("./app/components/forms/numberField.tsx"),s("../node_modules/lodash/omit.js")),m=s.n(h),g=s("./app/components/forms/controls/radioBoolean.tsx");function f(e){return(0,l.tZ)(c.Z,{...e,field:e=>(0,l.tZ)(g.Z,{...m()(e,["onKeyDown","children"])})})}f.displayName="RadioBooleanField",s("./app/components/forms/rangeField.tsx");var v=s("./app/components/forms/selectField.tsx"),x=(s("./app/components/forms/textareaField.tsx"),s("./app/components/forms/textCopyInput.tsx"),s("./app/components/forms/textField.tsx"))},"./app/components/forms/textCopyInput.tsx":(e,t,s)=>{s.d(t,{Z:()=>x});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),a=s("../node_modules/react-dom/profiling.js"),i=s("./app/components/button.tsx"),c=s("./app/components/clipboard.tsx"),l=s("./app/icons/index.tsx"),d=s("./app/styles/input.tsx"),u=s("./app/utils/selectText.tsx"),p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const h=(0,o.Z)("div",{target:"etk0cn13"})({name:"zjik7",styles:"display:flex"}),m=(0,o.Z)("input",{target:"etk0cn12"})(d.T,";background-color:",(e=>e.theme.backgroundSecondary),";border-right-width:0;border-top-right-radius:0;border-bottom-right-radius:0;direction:",(e=>e.rtl?"rtl":"ltr"),";&:hover,&:focus{background-color:",(e=>e.theme.backgroundSecondary),";border-right-width:0;}"),g=(0,o.Z)("div",{target:"etk0cn11"})({name:"1u4yjkc",styles:"flex-grow:1;border:none"}),f=(0,o.Z)(i.ZP,{target:"etk0cn10"})({name:"1tz1tsa",styles:"flex-shrink:1;border-radius:0 0.25em 0.25em 0;box-shadow:none"});class v extends n.Component{constructor(){super(...arguments),(0,r.Z)(this,"textRef",n.createRef()),(0,r.Z)(this,"handleCopyClick",(e=>{if(!this.textRef.current)return;const{onCopy:t,children:s}=this.props;this.handleSelectText(),null==t||t(s,e),e.stopPropagation()})),(0,r.Z)(this,"handleSelectText",(()=>{const{rtl:e}=this.props;if(!this.textRef.current)return;const t=(0,a.findDOMNode)(this.textRef.current);t&&t instanceof HTMLElement&&(e&&t instanceof HTMLInputElement?t.setSelectionRange(1,t.value.length-1):(0,u.e)(t))}))}render(){const{style:e,children:t,rtl:s}=this.props,r=s?"‪"+t+"‬":t;return(0,p.BX)(h,{children:[(0,p.tZ)(g,{children:(0,p.tZ)(m,{readOnly:!0,ref:this.textRef,style:e,value:r,onClick:this.handleSelectText,rtl:s})}),(0,p.tZ)(c.Z,{hideUnsupported:!0,value:t,children:(0,p.tZ)(f,{type:"button",onClick:this.handleCopyClick,children:(0,p.tZ)(l.vU,{})})})]})}}v.displayName="TextCopyInput";const x="app"==s.j?v:null},"./app/components/smartSearchBar/actions.tsx":(e,t,s)=>{s.d(t,{Kk:()=>R,DL:()=>A,lZ:()=>C,b9:()=>_});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react-router/es/index.js"),n=s("./app/actionCreators/modal.tsx"),a=s("./app/actionCreators/savedSearches.tsx"),i=s("./app/components/acl/access.tsx"),c=s("./app/components/button.tsx"),l=s("./app/components/menuItem.tsx"),d=s("./app/icons/index.tsx"),u=s("./app/locale.tsx"),p=s("./app/types/index.tsx"),h=s("./app/utils/analytics.tsx"),m=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),g=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),f=s("./app/actionCreators/indicator.tsx"),v=s("./app/components/alert.tsx"),x=s("./app/components/forms/index.tsx"),y=s("./app/utils/withApi.tsx"),S=s("./app/views/issueList/utils.tsx"),b=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const Z=[S.qh.DATE,S.qh.NEW,S.qh.FREQ,S.qh.PRIORITY,S.qh.USER];class T extends g.Component{constructor(){super(...arguments),(0,m.Z)(this,"state",{isSaving:!1,error:null}),(0,m.Z)(this,"handleSubmit",((e,t,s,r)=>{const{api:o,organization:n}=this.props,i=this.validateSortOption(e.sort);r.preventDefault(),this.setState({isSaving:!0}),(0,f.E3)((0,u.t)("Saving Changes")),(0,a.cB)(o,n.slug,e.name,e.query,i).then((s=>{this.props.closeModal(),this.setState({error:null,isSaving:!1}),(0,f.B8)(),t(e)})).catch((e=>{let t=(0,u.t)("Unable to save your changes.");e.responseJSON&&e.responseJSON.detail&&(t=e.responseJSON.detail),this.setState({error:t,isSaving:!1}),(0,f.B8)(),s(t)}))}))}validateSortOption(e){return this.sortOptions().find((t=>t===e))?e:S.qh.DATE}sortOptions(){var e;const{organization:t}=this.props,s=[...Z];return null!=t&&null!==(e=t.features)&&void 0!==e&&e.includes("issue-list-trend-sort")&&s.push(S.qh.TREND),s}render(){const{error:e}=this.state,{Header:t,Body:s,closeModal:r,query:o,sort:n}=this.props,a=this.sortOptions().map((e=>({value:e,label:(0,S._k)(e)}))),i={name:"",query:o,sort:this.validateSortOption(n)};return(0,b.BX)(x.l0,{onSubmit:this.handleSubmit,onCancel:r,saveOnBlur:!1,initialData:i,submitLabel:(0,u.t)("Save"),children:[(0,b.tZ)(t,{children:(0,b.tZ)("h4",{children:(0,u.t)("Save Current Search")})}),(0,b.BX)(s,{children:[this.state.error&&(0,b.tZ)(v.Z,{type:"error",children:e}),(0,b.tZ)("p",{children:(0,u.t)("All team members will now have access to this search.")}),(0,b.tZ)(x.nv,{name:"name",label:(0,u.t)("Name"),placeholder:"e.g. My Search Results",inline:!1,stacked:!0,flexibleControlStateSize:!0,required:!0},"name"),(0,b.tZ)(x.nv,{name:"query",label:(0,u.t)("Query"),inline:!1,stacked:!0,flexibleControlStateSize:!0,required:!0},"query"),(0,b.tZ)(x.mg,{name:"sort",label:(0,u.t)("Sort By"),options:a,required:!0,clearable:!1,inline:!1,stacked:!0,flexibleControlStateSize:!0},"sort")]})]})}}T.displayName="CreateSavedSearchModal";const w=(0,y.Z)(T);var k=s("./app/components/smartSearchBar/utils.tsx");function A(e){let{pinnedSearch:t,sort:s}=e;return{key:"pinSearch",Action:(0,o.withRouter)((e=>{let{menuItemVariant:r,savedSearchType:n,organization:i,api:c,query:m,location:g}=e;const f=async e=>{var r;if(e.preventDefault(),e.stopPropagation(),void 0===n)return;const{cursor:l,page:d,...u}=g.query;if((0,h.ec)({eventKey:"search.pin",eventName:"Search: Pin",organization_id:i.id,action:t?"unpin":"pin",search_type:n===p.L4.ISSUE?"issues":"events",query:null!==(r=null==t?void 0:t.query)&&void 0!==r?r:m}),t)return void(0,a.g_)(c,i.slug,n,t).then((()=>{o.browserHistory.push({...g,pathname:`/organizations/${i.slug}/issues/`,query:{...u,query:t.query,sort:t.sort}})}));const f=await(0,a.k0)(c,i.slug,n,(0,k.WF)(m),s);f&&f.id&&o.browserHistory.push({...g,pathname:`/organizations/${i.slug}/issues/searches/${f.id}/`,query:u})},v=t?(0,u.t)("Unpin this search"):(0,u.t)("Pin this search");return r?(0,b.tZ)(l.Z,{withBorder:!0,"data-test-id":"pin-icon",icon:(0,b.tZ)(d.Dg,{isSolid:!!t,size:"xs"}),onClick:f,children:t?(0,u.t)("Unpin Search"):(0,u.t)("Pin Search")}):(0,b.tZ)(R,{title:v,disabled:!m,"aria-label":v,onClick:f,isActive:!!t,"data-test-id":"pin-icon",icon:(0,b.tZ)(d.Dg,{isSolid:!!t,size:"xs"})})}))}}function C(e){let{sort:t}=e;return{key:"saveSearch",Action:e=>{let{menuItemVariant:s,query:r,organization:o}=e;const a=()=>(0,n.openModal)((e=>(0,b.tZ)(w,{...e,organization:o,query:r,sort:t})));return(0,b.tZ)(i.Z,{organization:o,access:["org:write"],children:s?(0,b.tZ)(l.Z,{withBorder:!0,icon:(0,b.tZ)(d.N_,{size:"xs"}),onClick:a,children:(0,u.t)("Create Saved Search")}):(0,b.tZ)(R,{onClick:a,"data-test-id":"save-current-search",icon:(0,b.tZ)(d.N_,{size:"xs"}),title:(0,u.t)("Add to organization saved searches"),"aria-label":(0,u.t)("Add to organization saved searches")})})}}}function _(e){let{onSidebarToggle:t}=e;return{key:"searchBuilder",Action:e=>{let{menuItemVariant:s}=e;return s?(0,b.tZ)(l.Z,{withBorder:!0,icon:(0,b.tZ)(d.OP,{size:"xs"}),onClick:t,children:(0,u.t)("Toggle sidebar")}):(0,b.tZ)(R,{title:(0,u.t)("Toggle search builder"),tooltipProps:{containerDisplayMode:"inline-flex"},"aria-label":(0,u.t)("Toggle search builder"),onClick:t,icon:(0,b.tZ)(d.OP,{size:"xs"})})}}}const R=(0,r.Z)(c.ZP,{target:"e491rhv0"})("color:",(e=>e.isActive?e.theme.blue300:e.theme.gray300),";width:18px;&,&:hover,&:focus{background:transparent;}&:hover{color:",(e=>e.theme.gray400),";}");R.defaultProps={type:"button",borderless:!0,size:"zero"}},"./app/components/smartSearchBar/index.tsx":(e,t,s)=>{s.d(t,{Z:()=>ee});var r=s("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js")),i=s("../node_modules/react-autosize-textarea/lib/index.js"),c=s("../node_modules/react-router/es/index.js"),l=s("../node_modules/@emotion/is-prop-valid/dist/is-prop-valid.browser.esm.js"),d=s("../node_modules/@sentry/minimal/esm/index.js"),u=s("../node_modules/lodash/debounce.js"),p=s.n(u),h=s("./app/actionCreators/indicator.tsx"),m=s("./app/actionCreators/savedSearches.tsx"),g=s("./app/components/buttonBar.tsx"),f=s("./app/components/dropdownLink.tsx"),v=s("./app/components/organizations/pageFilters/parse.tsx"),x=s("./app/components/searchSyntax/parser.tsx"),y=s("./app/components/searchSyntax/renderer.tsx"),S=s("./app/components/searchSyntax/utils.tsx"),b=s("./app/constants/index.tsx"),Z=s("./app/icons/index.tsx"),T=s("./app/locale.tsx"),w=s("./app/stores/memberListStore.tsx"),k=s("./app/styles/space.tsx"),A=s("./app/types/index.tsx"),C=s("./app/utils.tsx"),_=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),R=s("./app/utils/callIfFunction.tsx"),q=s("./app/utils/withApi.tsx"),I=s("./app/utils/withOrganization.tsx"),j=s("./app/components/smartSearchBar/actions.tsx"),E=s("./app/components/loadingIndicator.tsx"),z=s("./app/styles/overflowEllipsis.tsx"),P=s("./app/components/smartSearchBar/types.tsx"),O=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class F extends a.PureComponent{constructor(){super(...arguments),(0,o.Z)(this,"renderDescription",(e=>{const t=this.props.searchSubstring;if(!t)return e.desc;const s=e.desc;if(!s)return null;const r=s.toLowerCase().indexOf(t.toLowerCase());return-1===r?e.desc:(0,O.BX)("span",{children:[s.substr(0,r),(0,O.tZ)("strong",{children:s.substr(r,t.length)}),s.substr(r+t.length)]})})),(0,o.Z)(this,"renderHeaderItem",(e=>(0,O.tZ)(U,{children:(0,O.BX)($,{children:[e.icon,e.title&&e.title,e.desc&&(0,O.tZ)("span",{children:e.desc})]})},e.title))),(0,o.Z)(this,"renderItem",(e=>(0,O.tZ)(M,{className:e.active?"active":void 0,"data-test-id":"search-autocomplete-item",onClick:this.props.onClick.bind(this,e.value,e),ref:t=>{var s;return e.active&&(null==t||null===(s=t.scrollIntoView)||void 0===s?void 0:s.call(t,{block:"nearest"}))},children:(0,O.BX)(Q,{children:[e.title&&e.title+" · ",(0,O.tZ)(H,{children:this.renderDescription(e)})]})},e.value||e.desc)))}render(){const{className:e,loading:t,items:s}=this.props;return(0,O.tZ)(B,{className:e,children:t?(0,O.tZ)(G,{"data-test-id":"search-autocomplete-loading",children:(0,O.tZ)(E.Z,{mini:!0})},"loading"):(0,O.tZ)(L,{children:s.map((e=>{const t=e.children&&!e.children.length,s=e.type===P.q.INVALID_TAG;return(0,O.BX)(a.Fragment,{children:[s&&(0,O.tZ)(N,{children:(0,T.t)("Invalid tag")}),"header"===e.type&&this.renderHeaderItem(e),e.children&&e.children.map(this.renderItem),t&&!s&&(0,O.tZ)(N,{children:(0,T.t)("No items found")})]},e.title)}))})})}}F.displayName="SearchDropdown",(0,o.Z)(F,"defaultProps",{searchSubstring:"",onClick:function(){}});const V=F,B=(0,n.Z)("div",{target:"e7s74sr9"})("position:absolute;top:100%;left:-1px;right:-1px;z-index:",(e=>e.theme.zIndex.dropdown),";overflow:hidden;margin-top:",(0,k.Z)(1),";background:",(e=>e.theme.background),";box-shadow:",(e=>e.theme.dropShadowHeavy),";border:1px solid ",(e=>e.theme.border),";border-radius:",(e=>e.theme.borderRadius),";"),G=(0,n.Z)("div",{target:"e7s74sr8"})("display:flex;justify-content:center;padding:",(0,k.Z)(1),";"),N=(0,n.Z)("div",{target:"e7s74sr7"})("display:flex;padding:",(0,k.Z)(1)," ",(0,k.Z)(2),";font-size:",(e=>e.theme.fontSizeLarge),";color:",(e=>e.theme.gray300),";&:not(:last-child){border-bottom:1px solid ",(e=>e.theme.innerBorder),";}"),D=(0,n.Z)("li",{target:"e7s74sr6"})("&:not(:last-child){border-bottom:1px solid ",(e=>e.theme.innerBorder),";}"),U=(0,n.Z)(D,{target:"e7s74sr5"})(""),$=(0,n.Z)("header",{target:"e7s74sr4"})("display:flex;align-items:center;background-color:",(e=>e.theme.backgroundSecondary),";color:",(e=>e.theme.gray300),";font-weight:normal;font-size:",(e=>e.theme.fontSizeMedium),";margin:0;padding:",(0,k.Z)(1)," ",(0,k.Z)(2),";&>svg{margin-right:",(0,k.Z)(1),";}"),L=(0,n.Z)("ul",{target:"e7s74sr3"})({name:"nfj5ll",styles:"padding-left:0;list-style:none;margin-bottom:0"}),M=(0,n.Z)(D,{target:"e7s74sr2"})("scroll-margin:40px 0;font-size:",(e=>e.theme.fontSizeLarge),";padding:",(0,k.Z)(1)," ",(0,k.Z)(2),";cursor:pointer;&:hover,&.active{background:",(e=>e.theme.hover),";}"),Q=(0,n.Z)("div",{target:"e7s74sr1"})("color:",(e=>e.theme.textColor),";font-weight:normal;font-size:",(e=>e.theme.fontSizeMedium),";margin:0;line-height:",(e=>e.theme.text.lineHeightHeading),";",z.Z,";"),H=(0,n.Z)("span",{target:"e7s74sr0"})("font-size:",(e=>e.theme.fontSizeSmall),";font-family:",(e=>e.theme.text.familyMono),";");var W=s("./app/components/smartSearchBar/utils.tsx");const K=e=>({query:e,parsedQuery:(0,x.UG)(e)}),X=(e,t)=>{const s=(0,W.th)(t);return{searchItems:e.map((e=>s[e])),recentSearchItems:void 0,tagName:"",type:P.q.TAG_OPERATOR}};class Y extends a.Component{constructor(){var e,t;super(...arguments),(0,o.Z)(this,"state",{query:this.initialQuery,parsedQuery:(0,x.UG)(this.initialQuery),searchTerm:"",searchGroups:[],flatSearchItems:[],activeSearchItem:-1,tags:{},inputHasFocus:!1,loading:!1,numActionsVisible:null!==(e=null===(t=this.props.actionBarItems)||void 0===t?void 0:t.length)&&void 0!==e?e:0}),(0,o.Z)(this,"blurTimeout",void 0),(0,o.Z)(this,"searchInput",a.createRef()),(0,o.Z)(this,"containerRef",a.createRef()),(0,o.Z)(this,"inputResizeObserver",null),(0,o.Z)(this,"updateActionsVisible",(e=>{var t,s;if(0===e.length)return;const r=e[0],{width:o}=r.contentRect,n=null!==(t=null===(s=this.props.actionBarItems)||void 0===s?void 0:s.length)&&void 0!==t?t:0,a=Math.min(n,Math.floor(Math.max(0,o-400)/75));this.state.numActionsVisible!==a&&this.setState({numActionsVisible:a})})),(0,o.Z)(this,"onSubmit",(e=>{e.preventDefault(),this.doSearch()})),(0,o.Z)(this,"clearSearch",(()=>this.setState(K(""),(()=>(0,R.g)(this.props.onSearch,this.state.query))))),(0,o.Z)(this,"onQueryFocus",(()=>this.setState({inputHasFocus:!0}))),(0,o.Z)(this,"onQueryBlur",(e=>{window.clearTimeout(this.blurTimeout),this.blurTimeout=window.setTimeout((()=>{this.blurTimeout=void 0,this.setState({inputHasFocus:!1}),(0,R.g)(this.props.onBlur,e.target.value)}),200)})),(0,o.Z)(this,"onQueryChange",(e=>{const t=e.target.value.replace("\n","");this.setState(K(t),this.updateAutoCompleteItems),(0,R.g)(this.props.onChange,e.target.value,e)})),(0,o.Z)(this,"onPaste",(e=>{e.preventDefault();const t=e.clipboardData.getData("text/plain").replace("\n","").trim(),s=this.state.query,r=this.searchInput.current.selectionStart,o=this.searchInput.current.selectionEnd,n=s.substring(0,r),a=s.substring(o,s.length),i=`${n}${t}${a}`;this.setState(K(i),(()=>{this.updateAutoCompleteItems();const e=r+t.length;this.searchInput.current.selectionStart=e,this.searchInput.current.selectionEnd=e})),(0,R.g)(this.props.onChange,i,e)})),(0,o.Z)(this,"onInputClick",(()=>this.updateAutoCompleteItems())),(0,o.Z)(this,"onKeyDown",(e=>{const{onKeyDown:t}=this.props,{key:s}=e;(0,R.g)(t,e);const r=this.state.searchGroups.length>0,o=-1!==this.state.activeSearchItem;if(("ArrowDown"===s||"ArrowUp"===s)&&r){var n;e.preventDefault();const{flatSearchItems:t,activeSearchItem:r}=this.state,c=[...this.state.searchGroups],[l,d]=o?(0,W.iO)(c,r):[];var a,i;void 0!==l&&void 0!==d&&null!==(a=c[l])&&void 0!==a&&null!==(i=a.children)&&void 0!==i&&i[d]&&delete c[l].children[d].active;const u=o?r:0,p=t.length,h="ArrowUp"===s?(u-1+p)%p:o?(u+1)%p:0,[m,g]=(0,W.iO)(c,h);void 0!==m&&void 0!==g&&null!==(n=c[m])&&void 0!==n&&n.children&&(c[m].children[g]={...c[m].children[g],active:!0}),this.setState({searchGroups:c,activeSearchItem:h})}if(("Tab"===s||"Enter"===s)&&o&&r){e.preventDefault();const{activeSearchItem:t,searchGroups:s}=this.state,[r,o]=(0,W.iO)(s,t),n=void 0!==r&&void 0!==o&&s[r].children[o];return void(n&&this.onAutoComplete(n.value,n))}if("Enter"===s&&!o)return void this.doSearch();const c=this.cursorToken;if("["===s&&(null==c?void 0:c.type)===x.WU.Filter&&0===c.value.text.length&&(0,S._R)(c.value,this.cursorPosition)){const{query:t}=this.state;e.preventDefault();let s=null,r=null;const o="[]",n=c.value.location;s=c.key.location.end.offset+1,r=n.end.offset+1;const a=t.substring(0,s);let i=t.substring(r);i&&(i=` ${i}`);const l=`${a}${o}${i}`;this.updateQuery(l,a.length+o.length-1)}})),(0,o.Z)(this,"onKeyUp",(e=>{if("ArrowLeft"!==e.key&&"ArrowRight"!==e.key||this.updateAutoCompleteItems(),"Escape"!==e.key)return;e.preventDefault();const t=this.state.activeSearchItem>-1;if(!t)return void this.blur();const{searchGroups:s,activeSearchItem:r}=this.state,[o,n]=t?(0,W.iO)(s,r):[];void 0!==o&&void 0!==n&&delete s[o].children[n].active,this.setState({activeSearchItem:-1,searchGroups:[...this.state.searchGroups]})})),(0,o.Z)(this,"getTagValues",p()((async(e,t)=>{if(t=t.replace(/"/g,"").trim(),!this.props.onGetTagValues)return[];if(void 0!==this.state.noValueQuery&&t.startsWith(this.state.noValueQuery))return[];const{location:s}=this.props,r=(0,v.fK)(s.query);this.setState({loading:!0});let o=[];try{o=await this.props.onGetTagValues(e,t,r),this.setState({loading:!1})}catch(e){return this.setState({loading:!1}),d.Tb(e),[]}"release:"!==e.key||o.includes("latest")||o.unshift("latest");const n=0===o.length&&t.length>0?t:void 0;return this.setState({noValueQuery:n}),o.map((e=>{const t=e.includes(" ")||e.includes('"')?`"${e.replace(/"/g,'\\"')}"`:e;return{value:t,desc:t,type:P.q.TAG_VALUE}}))}),b.Dk,{leading:!0})),(0,o.Z)(this,"getPredefinedTagValues",((e,t)=>{var s;return(null!==(s=e.values)&&void 0!==s?s:[]).filter((e=>e.indexOf(t)>-1)).map(((t,s)=>({value:t,desc:t,type:P.q.TAG_VALUE,ignoreMaxSearchItems:!!e.maxSuggestedValues&&s<e.maxSuggestedValues})))})),(0,o.Z)(this,"getRecentSearches",p()((async()=>{const{savedSearchType:e,hasRecentSearches:t,onGetRecentSearches:s}=this.props;if(!(0,C.ri)(e)||!t)return[];const r=s||this.fetchRecentSearches;return await r(this.state.query)}),b.Dk,{leading:!0})),(0,o.Z)(this,"fetchRecentSearches",(async e=>{const{api:t,organization:s,savedSearchType:r}=this.props;if(void 0===r)return[];try{return(await(0,m.YO)(t,s.slug,r,e)).map((e=>({desc:e.query,value:e.query,type:P.q.RECENT_SEARCH})))}catch(e){d.Tb(e)}return[]})),(0,o.Z)(this,"getReleases",p()((async(e,t)=>{const s=this.fetchReleases(t);return[...this.getPredefinedTagValues(e,t).map((e=>({...e,type:P.q.FIRST_RELEASE}))),...(await s).map((e=>({value:e.shortVersion,desc:e.shortVersion,type:P.q.FIRST_RELEASE})))]}),b.Dk,{leading:!0})),(0,o.Z)(this,"fetchReleases",(async e=>{const{api:t,location:s,organization:r}=this.props,o=s&&s.query?s.query.projectId:void 0,n=`/organizations/${r.slug}/releases/`,a={per_page:b.vK};e&&(a.query=e),o&&(a.project=o);try{return await t.requestPromise(n,{method:"GET",query:a})}catch(e){(0,h.Iw)((0,T.t)("Unable to fetch releases")),d.Tb(e)}return[]})),(0,o.Z)(this,"generateValueAutocompleteGroup",(async(e,t)=>{var s;const{prepareQuery:r,excludeEnvironment:o}=this.props,n=null!==(s=this.props.supportedTags)&&void 0!==s?s:{},a="function"==typeof r?r(t):t,i=a?this.state.searchGroups.filter((e=>e.value&&-1!==e.value.indexOf(a))):this.state.searchGroups;this.setState({searchTerm:t,searchGroups:i});const c=n[e];if(!c)return{searchItems:[],recentSearchItems:[],tagName:e,type:P.q.INVALID_TAG};if(o&&"environment"===e)return null;const l="firstRelease"===c.key?this.getReleases:c.predefined?this.getPredefinedTagValues:this.getTagValues,[d,u]=await Promise.all([l(c,a),this.getRecentSearches()]);return{searchItems:null!=d?d:[],recentSearchItems:null!=u?u:[],tagName:c.key,type:P.q.TAG_VALUE}})),(0,o.Z)(this,"showDefaultSearches",(async()=>{const{query:e}=this.state,[t,s]=this.props.defaultSearchItems;if(t.length)this.setState({searchTerm:""}),this.updateAutoCompleteState(t,s,"",P.q.DEFAULT);else{this.setState({searchTerm:e});const[t,s]=this.getTagKeys(""),r=await this.getRecentSearches();this.updateAutoCompleteState(t,null!=r?r:[],"",s)}})),(0,o.Z)(this,"updateAutoCompleteFromAst",(async()=>{const e=this.cursorPosition,t=this.cursorToken;if(t)if(t.type!==x.WU.Filter){if(t.type===x.WU.FreeText){var s;const e=(null!==(s=t.text.trim().split(" ").pop())&&void 0!==s?s:"").replace(new RegExp(`^${b.c$}`),""),r=[await this.generateTagAutocompleteGroup(e)];return this.setState({searchTerm:e}),void this.updateAutoCompleteStateMultiHeader(r)}}else{const s=(0,S.Ck)(t.key,{aggregateWithArgs:!0});if((0,S._R)(t.value,e)){var r;const o=t.value,n=this.cursorValue;let a=null!==(r=null==n?void 0:n.text)&&void 0!==r?r:o.text;"[]"!==a&&null!==n||(a="");const i=await this.generateValueAutocompleteGroup(s,a),c=i?[i]:[];if(e===o.location.start.offset){const e=X((0,W.Um)(t),s);c.unshift(e)}return void this.updateAutoCompleteStateMultiHeader(c)}if((0,S._R)(t.key,e)){const r=t.key,o=[await this.generateTagAutocompleteGroup(s)];if(e===r.location.end.offset){const e=X((0,W.Um)(t),s);o.unshift(e)}return this.setState({searchTerm:s}),void this.updateAutoCompleteStateMultiHeader(o)}const o=X((0,W.Um)(t),s);this.updateAutoCompleteStateMultiHeader([o])}else this.showDefaultSearches()})),(0,o.Z)(this,"updateAutoCompleteItems",(async()=>{window.clearTimeout(this.blurTimeout),this.blurTimeout=void 0,this.updateAutoCompleteFromAst()})),(0,o.Z)(this,"updateAutoCompleteStateMultiHeader",(e=>{const{hasRecentSearches:t,maxSearchItems:s,maxQueryLength:r}=this.props,{query:o}=this.state,n=r&&o?r-o.length:void 0,a=e.map((e=>{let{searchItems:r,recentSearchItems:o,tagName:a,type:i}=e;return(0,W.oe)(r,t?o:void 0,a,i,s,n)})).reduce(((e,t)=>({searchGroups:[...e.searchGroups,...t.searchGroups],flatSearchItems:[...e.flatSearchItems,...t.flatSearchItems],activeSearchItem:-1})),{searchGroups:[],flatSearchItems:[],activeSearchItem:-1});this.setState(a)})),(0,o.Z)(this,"updateQuery",((e,t)=>this.setState(K(e),(()=>{var s,r;this.searchInput.current&&(this.searchInput.current.focus(),t&&(this.searchInput.current.selectionStart=t,this.searchInput.current.selectionEnd=t)),this.updateAutoCompleteItems(),null===(s=(r=this.props).onChange)||void 0===s||s.call(r,e,new MouseEvent("click"))})))),(0,o.Z)(this,"onAutoCompleteFromAst",((e,t)=>{const s=this.cursorPosition,{query:r}=this.state,o=this.cursorToken;if(!o)return void this.updateQuery(`${r}${e}`);let n=null,a=null,i=e;if(o.type===x.WU.Filter)if(t.type===P.q.TAG_OPERATOR){(0,_.Z)("search.operator_autocompleted",{organization:this.props.organization,query:(0,W.WF)(r),search_operator:e,search_type:0===this.props.savedSearchType?"issues":"events"});const t=o.value.location;n=o.location.start.offset,a=t.start.offset,i="!:"===e?`!${o.key.text}:`:`${o.key.text}${e}`}else if((0,S._R)(o.value,s)){var c;const t=null!==(c=this.cursorValue)&&void 0!==c?c:o.value,s=t.location;if(o.filter===x.vA.TextIn){const e=null===this.cursorValue;n=e?this.cursorPosition:t.location.start.offset,a=e?this.cursorPosition:t.location.end.offset}else n=o.key.location.end.offset+1,a=s.end.offset+1,"user"===(0,S.Ck)(o.key)&&(i=`"${e.trim()}"`),"[]"===t.text?(n+=1,a-=2):i+=" "}else if((0,S._R)(o.key,s)){const e=o.key.location;n=e.start.offset,a=e.end.offset+1}if(o.type===x.WU.FreeText){const e=o.location.start.offset;n=o.text.startsWith(b.c$)?e+1:e,a=o.location.end.offset}if(null!==n&&null!==a){const e=r.substring(0,n),t=`${e}${i}${r.substring(a)}`;this.updateQuery(t,e.length+i.length)}})),(0,o.Z)(this,"onAutoComplete",((e,t)=>{if(t.type===P.q.RECENT_SEARCH)return(0,_.Z)("search.searched",{organization:this.props.organization,query:e,search_type:0===this.props.savedSearchType?"issues":"events",search_source:"recent_search"}),void this.setState(K(e),(()=>{this.doSearch()}));this.onAutoCompleteFromAst(e,t)}))}componentDidMount(){window.ResizeObserver&&null!==this.containerRef.current&&(this.inputResizeObserver=new ResizeObserver(this.updateActionsVisible),this.inputResizeObserver.observe(this.containerRef.current))}componentDidUpdate(e){const{query:t}=this.props,{query:s}=e;t!==s&&((0,C.ri)(t)||(0,C.ri)(s))&&this.setState(K((0,W.be)(null!=t?t:void 0)))}componentWillUnmount(){var e;null===(e=this.inputResizeObserver)||void 0===e||e.disconnect(),window.clearTimeout(this.blurTimeout)}get initialQuery(){const{query:e,defaultQuery:t}=this.props;return null!==e?(0,W.be)(e):null!=t?t:""}blur(){this.searchInput.current&&this.searchInput.current.blur()}async doSearch(){if(this.blur(),!this.hasValidSearch)return;const e=(0,W.WF)(this.state.query),{onSearch:t,onSavedRecentSearch:s,api:r,organization:o,savedSearchType:n,searchSource:a}=this.props;if((0,_.Z)("search.searched",{organization:o,query:e,search_type:0===n?"issues":"events",search_source:a}),(0,R.g)(t,e),void 0!==n&&e)try{await(0,m.VH)(r,o.slug,n,e),s&&s(e)}catch(e){d.Tb(e)}}get hasValidSearch(){const{parsedQuery:e}=this.state;return null===e||(0,S.ly)({tree:e,noResultValue:!0,visitorTest:e=>{let{token:t,returnResult:s,skipToken:r}=e;return t.type!==x.WU.Filter?null:t.invalid?s(!1):r}})}get cursorToken(){const e=[x.WU.Filter,x.WU.FreeText];return this.findTokensAtCursor(e)}get cursorValue(){const e=[x.WU.ValueText];return this.findTokensAtCursor(e)}get cursorPosition(){var e;return this.searchInput.current&&this.state.inputHasFocus&&null!==(e=this.searchInput.current.selectionStart)&&void 0!==e?e:-1}findTokensAtCursor(e){const{parsedQuery:t}=this.state;if(null===t)return null;const s=this.cursorPosition;return(0,S.ly)({tree:t,noResultValue:null,visitorTest:t=>{let{token:r,returnResult:o,skipToken:n}=t;return e.includes(r.type)?(0,S._R)(r,s)?o(r):n:null}})}getTagKeys(e){var t;const{prepareQuery:s,supportedTagType:r}=this.props,o=null!==(t=this.props.supportedTags)&&void 0!==t?t:{};let n=Object.keys(o).map((e=>`${e}:`));if(e){const t="function"==typeof s?s(e):e;n=n.filter((e=>e.indexOf(t)>-1))}return this.props.excludeEnvironment&&(n=n.filter((e=>"environment:"!==e))),[n.map((e=>({value:e,desc:e}))),null!=r?r:P.q.TAG_KEY]}async generateTagAutocompleteGroup(e){const[t,s]=this.getTagKeys(e),r=await this.getRecentSearches();return{searchItems:t,recentSearchItems:null!=r?r:[],tagName:e,type:s}}updateAutoCompleteState(e,t,s,r){const{hasRecentSearches:o,maxSearchItems:n,maxQueryLength:a}=this.props,{query:i}=this.state,c=a&&i?a-i.length:void 0;this.setState((0,W.oe)(e,o?t:void 0,s,r,n,c))}render(){const{api:e,className:t,savedSearchType:s,dropdownClassName:o,actionBarItems:n,organization:a,placeholder:i,disabled:c,useFormWrapper:l,inlineLabel:d,maxQueryLength:u}=this.props,{query:p,parsedQuery:h,searchGroups:m,searchTerm:g,inputHasFocus:v,numActionsVisible:x,loading:S}=this.state,b=(0,O.tZ)(ne,{type:"text",placeholder:i,id:"smart-search-input","data-test-id":"smart-search-input",name:"query",ref:this.searchInput,autoComplete:"off",value:p,onFocus:this.onQueryFocus,onBlur:this.onQueryBlur,onKeyUp:this.onKeyUp,onKeyDown:this.onKeyDown,onChange:this.onQueryChange,onClick:this.onInputClick,onPaste:this.onPaste,disabled:c,maxLength:u,spellCheck:!1}),w=null!=n?n:[],k={api:e,organization:a,query:p,savedSearchType:s},A=w.slice(0,x).map((e=>{let{key:t,Action:s}=e;return(0,O.tZ)(s,{...k},t)})),C=w.slice(x).map((e=>{let{key:t,Action:s}=e;return(0,O.tZ)(s,{...k,menuItemVariant:!0},t)})),_=this.cursorPosition;return(0,O.BX)(te,{ref:this.containerRef,className:t,inputHasFocus:v,children:[(0,O.BX)(se,{htmlFor:"smart-search-input","aria-label":(0,T.t)("Search events"),children:[(0,O.tZ)(Z.jV,{}),d]}),(0,O.BX)(re,{children:[(0,O.tZ)(oe,{children:null!==h?(0,O.tZ)(y.Z,{parsedQuery:h,cursorPosition:-1===_?void 0:_}):p}),l?(0,O.tZ)("form",{onSubmit:this.onSubmit,children:b}):b]}),(0,O.BX)(ae,{gap:.5,children:[""!==p&&(0,O.tZ)(j.Kk,{onClick:this.clearSearch,icon:(0,O.tZ)(Z.bM,{size:"xs"}),title:(0,T.t)("Clear search"),"aria-label":(0,T.t)("Clear search")}),A,C.length>0&&(0,O.tZ)(f.Z,{anchorRight:!0,caret:!1,title:(0,O.tZ)(j.Kk,{"aria-label":(0,T.t)("Show more"),icon:(0,O.tZ)(ie,{size:"xs"})}),children:C})]}),(S||m.length>0)&&(0,O.tZ)(V,{css:(0,r.iv)({display:v?"block":"none"},"",""),className:o,items:m,onClick:this.onAutoComplete,loading:S,searchSubstring:g})]})}}Y.displayName="SmartSearchBar",(0,o.Z)(Y,"defaultProps",{defaultQuery:"",query:null,onSearch:function(){},excludeEnvironment:!1,placeholder:(0,T.t)("Search for events, users, tags, and more"),supportedTags:{},defaultSearchItems:[[],[]],useFormWrapper:!0,savedSearchType:A.L4.ISSUE});class J extends a.Component{constructor(){super(...arguments),(0,o.Z)(this,"state",{members:w.Z.getAll()}),(0,o.Z)(this,"unsubscribe",w.Z.listen((e=>this.setState({members:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){return(0,O.tZ)(Y,{...this.props,members:this.state.members})}}J.displayName="SmartSearchBarContainer";const ee=(0,q.Z)((0,c.withRouter)((0,I.Z)(J))),te=(0,n.Z)("div",{target:"e1e683cn6"})("border:1px solid ",(e=>e.theme.border),";box-shadow:inset ",(e=>e.theme.dropShadowLight),";background:",(e=>e.theme.background),";padding:7px ",(0,k.Z)(1),";position:relative;display:grid;grid-template-columns:max-content 1fr max-content;gap:",(0,k.Z)(1),";align-items:start;border-radius:",(e=>e.theme.borderRadius),";.show-sidebar &{background:",(e=>e.theme.backgroundSecondary),";}",(e=>e.inputHasFocus&&`\n    border-color: ${e.theme.focusBorder};\n    box-shadow: 0 0 0 1px ${e.theme.focusBorder};\n  `),";"),se=(0,n.Z)("label",{target:"e1e683cn5"})("display:flex;padding:",(0,k.Z)(.5)," 0;margin:0;color:",(e=>e.theme.gray300),";"),re=(0,n.Z)("div",{target:"e1e683cn4"})({name:"bjn8wh",styles:"position:relative"}),oe=(0,n.Z)("div",{target:"e1e683cn3"})("position:absolute;top:0;left:0;right:0;bottom:0;user-select:none;white-space:pre-wrap;word-break:break-word;line-height:25px;font-size:",(e=>e.theme.fontSizeSmall),";font-family:",(e=>e.theme.text.familyMono),";"),ne=(0,n.Z)(function(e){let{value:t}=e;return t}({value:i.Z,fixed:"textarea"}),{shouldForwardProp:e=>"string"==typeof e&&(0,l.Z)(e),target:"e1e683cn2"})("position:relative;display:flex;resize:none;outline:none;border:0;width:100%;padding:0;line-height:25px;margin-bottom:-1px;background:transparent;font-size:",(e=>e.theme.fontSizeSmall),";font-family:",(e=>e.theme.text.familyMono),";caret-color:",(e=>e.theme.subText),";color:transparent;&::selection{background:rgba(0, 0, 0, 0.2);}&::placeholder{color:",(e=>e.theme.formPlaceholder),";}[disabled]{color:",(e=>e.theme.disabled),";}"),ae=(0,n.Z)(g.ZP,{target:"e1e683cn1"})("height:",(0,k.Z)(2),";margin:",(0,k.Z)(.5)," 0;"),ie=(0,n.Z)(Z.YR,{target:"e1e683cn0"})({name:"jbgpyq",styles:"transform:rotate(90deg)"})},"./app/components/smartSearchBar/types.tsx":(e,t,s)=>{let r;s.d(t,{q:()=>r}),function(e){e.DEFAULT="default",e.TAG_KEY="tag-key",e.TAG_VALUE="tag-value",e.TAG_OPERATOR="tag-operator",e.FIRST_RELEASE="first-release",e.INVALID_TAG="invalid-tag",e.RECENT_SEARCH="recent-search",e.PROPERTY="property"}(r||(r={}))},"./app/components/smartSearchBar/utils.tsx":(e,t,s)=>{s.d(t,{be:()=>c,WF:()=>l,oe:()=>p,iO:()=>h,th:()=>m,Um:()=>g}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("./app/components/searchSyntax/parser.tsx"),o=s("./app/icons/index.tsx"),n=s("./app/locale.tsx"),a=s("./app/components/smartSearchBar/types.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return 0!==e.length&&" "!==e[e.length-1]?e+" ":e}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return" "===e[e.length-1]?e.slice(0,e.length-1):e}function d(e){return e===a.q.TAG_VALUE?(0,n.t)("Tag Values"):e===a.q.RECENT_SEARCH?(0,n.t)("Recent Searches"):e===a.q.DEFAULT?(0,n.t)("Common Search Terms"):e===a.q.TAG_OPERATOR?(0,n.t)("Operator Helpers"):e===a.q.PROPERTY?(0,n.t)("Properties"):(0,n.t)("Tags")}function u(e,t){if(e===a.q.RECENT_SEARCH)return(0,i.tZ)(o.jo,{size:"xs"});if(e===a.q.DEFAULT)return(0,i.tZ)(o.GK,{size:"xs"});switch(t){case"is":return(0,i.tZ)(o.oe,{size:"xs"});case"assigned":case"bookmarks":return(0,i.tZ)(o.qO,{size:"xs"});case"firstSeen":case"lastSeen":case"event.timestamp":return(0,i.tZ)(o.jo,{size:"xs"});default:return(0,i.tZ)(o.Ah,{size:"xs"})}}function p(e,t,s,r,c,l){c&&c>0&&(e=e.filter(((e,t)=>t<c||e.ignoreMaxSearchItems))),(l||0===l)&&(e=e.filter((e=>e.value.length<=l)),t&&(t=t.filter((e=>e.value.length<=l))));const p={title:d(r),type:r===a.q.INVALID_TAG?r:"header",icon:u(r,s),children:[...e]},h=t&&{title:(0,n.t)("Recent Searches"),type:"header",icon:(0,i.tZ)(o.jo,{size:"xs"}),children:[...t]};return p.children&&p.children.length&&(p.children[0]={...p.children[0]}),{searchGroups:[p,...h?[h]:[]],flatSearchItems:[...e,...t||[]],activeSearchItem:-1}}function h(e,t){let s=t,r=[void 0,void 0];return e.find(((e,t)=>{let{children:o}=e;return!(!o||!o.length||(s<o.length?(r=[t,s],0):(s-=o.length,1)))})),r}function m(e){return{[r.oV.Default]:{type:a.q.TAG_OPERATOR,value:":",desc:`${e}:${(0,n.t)("[value] is equal to")}`},[r.oV.GreaterThanEqual]:{type:a.q.TAG_OPERATOR,value:":>=",desc:`${e}:${(0,n.t)(">=[value] is greater than or equal to")}`},[r.oV.LessThanEqual]:{type:a.q.TAG_OPERATOR,value:":<=",desc:`${e}:${(0,n.t)("<=[value] is less than or equal to")}`},[r.oV.GreaterThan]:{type:a.q.TAG_OPERATOR,value:":>",desc:`${e}:${(0,n.t)(">[value] is greater than")}`},[r.oV.LessThan]:{type:a.q.TAG_OPERATOR,value:":<",desc:`${e}:${(0,n.t)("<[value] is less than")}`},[r.oV.Equal]:{type:a.q.TAG_OPERATOR,value:":=",desc:`${e}:${(0,n.t)("=[value] is equal to")}`},[r.oV.NotEqual]:{type:a.q.TAG_OPERATOR,value:"!:",desc:`!${e}:${(0,n.t)("[value] is not equal to")}`}}}function g(e){var t,s;const o=null!==(t=null===(s=e.invalid)||void 0===s?void 0:s.expectedType)&&void 0!==t?t:[e.filter],n=o.map((e=>{var t;return null!==(t=r.J$[e])&&void 0!==t?t:[]})),a=[...new Set([...o,...n.flat()])];return[...new Set(a.map((e=>r.iq[e].validOps)).flat())]}},"./app/components/tag.tsx":(e,t,s)=>{s.d(t,{A:()=>y,Z:()=>T});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react/index.js"),n=s("./app/components/button.tsx"),a=s("./app/components/links/externalLink.tsx"),i=s("./app/components/links/link.tsx"),c=s("./app/components/tooltip.tsx"),l=s("./app/icons/index.tsx"),d=s("./app/locale.tsx"),u=s("./app/styles/space.tsx"),p=s("./app/utils.tsx"),h=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),m=s("./app/utils/theme.tsx"),g=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const f="20px";function v(e){let{type:t="default",icon:s,tooltipText:r,to:n,onClick:u,href:f,onDismiss:v,children:T,textMaxWidth:w=150,...k}=e;const A={size:"11px",color:m.ZP.tag[t].iconColor},C=(0,g.tZ)(c.ZP,{title:r,containerDisplayMode:"inline-flex",children:(0,g.BX)(y,{type:t,children:[o.isValidElement(s)?(0,g.tZ)(S,{children:o.cloneElement(s,{...A})}):((0,p.ri)(f)||(0,p.ri)(n))&&void 0===s?(0,g.tZ)(S,{children:(0,g.tZ)(l.V$,{...A})}):null,(0,g.tZ)(b,{type:t,maxWidth:w,children:T}),(0,p.ri)(v)&&(0,g.tZ)(Z,{onClick:function(e){e.preventDefault(),null==v||v()},size:"zero",priority:"link","aria-label":(0,d.t)("Dismiss"),children:(0,g.tZ)(l.bM,{isCircled:!0,...A})})]})});return(0,g.tZ)(x,{...k,onClick:()=>{(0,h.Z)("tag.clicked",{is_clickable:(0,p.ri)(u)||(0,p.ri)(n)||(0,p.ri)(f),organization:null})},children:(0,p.ri)(f)?(0,g.tZ)(a.Z,{href:f,children:C}):(0,p.ri)(n)&&(0,p.ri)(u)?(0,g.tZ)(i.Z,{to:n,onClick:u,children:C}):(0,p.ri)(n)?(0,g.tZ)(i.Z,{to:n,children:C}):C})}v.displayName="Tag";const x=(0,r.Z)("span",{target:"e8jgvoh4"})("font-size:",(e=>e.theme.fontSizeSmall),";"),y=(0,r.Z)("div",{target:"e8jgvoh3"})("display:inline-flex;align-items:center;height:",f,";border-radius:",f,";background-color:",(e=>e.theme.tag[e.type].background),";border:solid 1px ",(e=>e.theme.tag[e.type].border),";padding:0 ",(0,u.Z)(1),";"),S=(0,r.Z)("span",{target:"e8jgvoh2"})("margin-right:",(0,u.Z)(.5),";display:inline-flex;"),b=(0,r.Z)("span",{target:"e8jgvoh1"})("color:",(e=>["black","white"].includes(e.type)?e.theme.tag[e.type].iconColor:e.theme.textColor),";max-width:",(e=>e.maxWidth),"px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;line-height:",f,";"),Z=(0,r.Z)(n.ZP,{target:"e8jgvoh0"})("margin-left:",(0,u.Z)(.5),";border:none;"),T=v},"./app/utils/withConfig.tsx":(e,t,s)=>{s.d(t,{Z:()=>i}),s("../node_modules/react/index.js");var r=s("./app/stores/configStore.tsx"),o=s("./app/stores/useLegacyStore.tsx"),n=s("./app/utils/getDisplayName.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=function(e){const t=t=>{const s={config:(0,o.X)(r.Z),...t};return(0,a.tZ)(e,{...s})};return t.displayName=`withConfig(${(0,n.Z)(e)})`,t}}}]);
//# sourceMappingURL=../sourcemaps/app_components_checkbox_tsx-app_components_smartSearchBar_index_tsx-app_components_tag_tsx.03dc9b6ab753f3e0fdd3e5f8a86de33d.js.map