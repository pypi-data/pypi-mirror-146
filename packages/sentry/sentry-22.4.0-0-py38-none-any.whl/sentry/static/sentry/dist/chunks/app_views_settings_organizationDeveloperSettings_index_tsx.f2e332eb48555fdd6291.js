(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_organizationDeveloperSettings_index_tsx"],{"./app/components/confirmDelete.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var n=s("../node_modules/react/index.js"),o=s("./app/components/alert.tsx"),i=s("./app/components/confirm.tsx"),r=s("./app/components/forms/controls/input.tsx"),a=s("./app/components/forms/field/index.tsx"),l=s("./app/locale.tsx"),p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d=e=>{let{message:t,confirmInput:s,...d}=e;return(0,p.tZ)(i.Z,{...d,bypass:!1,disableConfirmButton:!0,renderMessage:e=>{let{disableConfirmButton:i}=e;return(0,p.BX)(n.Fragment,{children:[(0,p.tZ)(o.Z,{type:"error",children:t}),(0,p.tZ)(a.Z,{flexibleControlStateSize:!0,inline:!1,label:(0,l.t)("Please enter %s to confirm the deletion",(0,p.tZ)("code",{children:s})),children:(0,p.tZ)(r.Z,{type:"text",placeholder:s,onChange:e=>i(e.target.value!==s)})})]})}})};d.displayName="ConfirmDelete";const c=d},"./app/components/sentryAppIcon.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var n=s("./app/components/avatar/sentryAppAvatar.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=e=>{let{sentryApp:t,size:s}=e;return(0,o.tZ)(n.Z,{sentryApp:t,size:s,isColor:!0})};i.displayName="SentryAppIcon";const r=i},"./app/utils/routeTitle.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n=function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0;const o=`${e} - ${t}`,i=n?`${o} - ${n}`:o;return s?`${i} - Sentry`:i}},"./app/views/asyncView.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r}),s("../node_modules/react/index.js");var n=s("./app/components/asyncComponent.tsx"),o=s("./app/components/sentryDocumentTitle.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class r extends n.Z{getTitle(){return""}render(){return(0,i.tZ)(o.Z,{title:this.getTitle(),children:this.renderComponent()})}}r.displayName="AsyncView"},"./app/views/settings/organizationDeveloperSettings/index.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Y});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./app/actionCreators/indicator.tsx")),i=s("./app/locale.tsx"),r=s("./app/components/acl/access.tsx"),a=s("./app/components/alert.tsx"),l=s("./app/components/button.tsx"),p=s("./app/components/links/externalLink.tsx"),d=s("./app/components/panels/index.tsx"),c=s("./app/icons/index.tsx"),u=s("./app/utils/routeTitle.tsx"),h=s("./app/utils/withOrganization.tsx"),m=s("./app/views/asyncView.tsx"),g=s("./app/views/settings/components/emptyMessage.tsx"),Z=s("./app/views/settings/components/settingsPageHeader.tsx"),x=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),b=s("../node_modules/react/index.js"),y=s("./app/actionCreators/modal.tsx"),f=s("./app/components/links/link.tsx"),w=(s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/lodash/intersection.js")),v=s.n(w),_=s("./app/components/forms/form.tsx"),j=s("./app/components/forms/jsonForm.tsx"),k=s("./app/components/forms/model.tsx"),z=s("./app/constants/index.tsx"),S=s("./app/styles/space.tsx"),P=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class I extends k.Z{getTransformedData(){const e=this.getData();return{questionnaire:Array.from(this.fieldDescriptor.values()).map((t=>({question:t.meta||t.label,answer:e[t.name]})))}}}class A extends b.Component{constructor(){super(...arguments),(0,n.Z)(this,"form",new I),(0,n.Z)(this,"handleSubmitSuccess",(()=>{(0,o.S9)((0,i.t)("Request to publish %s successful.",this.props.app.slug)),this.props.closeModal()})),(0,n.Z)(this,"handleSubmitError",(e=>{var t;(0,o.Iw)((0,i._N)("Request to publish [app] fails. [detail]",{app:this.props.app.slug,detail:null==e||null===(t=e.responseJSON)||void 0===t?void 0:t.detail}))}))}get formFields(){const{app:e}=this.props,t=(e=>{const t=[];for(const s of z.yh){let n;for(const t in s.choices){const o=s.choices[t],i=v()(o.scopes,e);i.length>0&&i.length===o.scopes.length&&(!n||i.length>n.scopes.length)&&(n=o)}if(n){const e=n.label.replace("Read & Write","Write");t.push(`${s.resource} ${e}`)}}return t})(e.scopes),s="Please justify why you are requesting each of the following permissions: ",n=`${s}${t.join(", ")}.`,o=(0,P.BX)(b.Fragment,{children:[(0,P.tZ)(D,{children:s}),t.map(((e,t)=>(0,P.BX)(b.Fragment,{children:[t>0&&", "," ",(0,P.tZ)(q,{children:e})]},e))),"."]}),i=[{type:"textarea",required:!0,label:"What does your integration do? Please be as detailed as possible.",autosize:!0,rows:1,inline:!1,name:"question0"},{type:"textarea",required:!0,label:"What value does it offer customers?",autosize:!0,rows:1,inline:!1,name:"question1"},{type:"textarea",required:!0,label:"Do you operate the web service your integration communicates with?",autosize:!0,rows:1,inline:!1,name:"question2"}];return t.length>0&&i.push({type:"textarea",required:!0,label:o,autosize:!0,rows:1,inline:!1,meta:n,name:"question3"}),i}render(){const{app:e,Header:t,Body:s}=this.props,n=`/sentry-apps/${e.slug}/publish-request/`,o=[{title:(0,i.t)("Questions to answer"),fields:this.formFields}];return(0,P.BX)(b.Fragment,{children:[(0,P.tZ)(t,{children:(0,i.t)("Publish Request Questionnaire")}),(0,P.BX)(s,{children:[(0,P.tZ)(C,{children:(0,i.t)("Please fill out this questionnaire in order to get your integration evaluated for publication.\n              Once your integration has been approved, users outside of your organization will be able to install it.")}),(0,P.tZ)(_.Z,{allowUndo:!0,apiMethod:"POST",apiEndpoint:n,onSubmitSuccess:this.handleSubmitSuccess,onSubmitError:this.handleSubmitError,model:this.form,submitLabel:(0,i.t)("Request Publication"),onCancel:()=>this.props.closeModal(),children:(0,P.tZ)(j.Z,{forms:o})})]})]})}}A.displayName="SentryAppPublishRequestModal";const C=(0,x.Z)("div",{target:"e14x9wf02"})("margin:",(0,S.Z)(1.5)," 0px;font-size:18px;"),D=(0,x.Z)("span",{target:"e14x9wf01"})({name:"1gt2cgk",styles:"line-height:24px"}),q=(0,x.Z)("code",{target:"e14x9wf00"})({name:"1gt2cgk",styles:"line-height:24px"});var B=s("./app/components/sentryAppIcon.tsx"),R=s("./app/components/confirmDelete.tsx");const $=e=>{let{org:t,app:s,showPublish:n,showDelete:o,onPublish:r,onDelete:a,disablePublishReason:l,disableDeleteReason:p}=e;const d=(0,P.tZ)(T,{size:"xsmall",icon:(0,P.tZ)(c.BW,{}),to:`/settings/${t.slug}/developer-settings/${s.slug}/dashboard/`,children:(0,i.t)("Dashboard")}),u=n?(0,P.tZ)(T,{disabled:!!l,title:l,icon:(0,P.tZ)(c.XK,{}),size:"xsmall",onClick:r,children:(0,i.t)("Publish")}):null,h=(0,i.t)(`Deleting ${s.slug} will also delete any and all of its installations.          This is a permanent action. Do you wish to continue?`),m=o?p?(0,P.tZ)(T,{disabled:!0,title:p,size:"xsmall",icon:(0,P.tZ)(c.Fz,{}),"aria-label":"Delete"}):a&&(0,P.tZ)(R.Z,{message:h,confirmInput:s.slug,priority:"danger",onConfirm:()=>a(s),children:(0,P.tZ)(T,{size:"xsmall",icon:(0,P.tZ)(c.Fz,{}),"aria-label":"Delete"})}):null;return(0,P.BX)(N,{children:[d,u,m]})};$.displayName="ActionButtons";const N=(0,x.Z)("div",{target:"eg64e9n1"})("flex-direction:row;display:flex;&>*{margin-left:",(0,S.Z)(.5),";}"),T=(0,x.Z)(l.ZP,{target:"eg64e9n0"})("color:",(e=>e.theme.subText),";"),X=$,E=e=>{let{organization:t,app:s,onClickRemove:n,onClickPublish:o}=e;const a="internal"===s.status;return(0,P.tZ)(r.Z,{access:["org:admin"],children:e=>{let{hasAccess:r}=e,l="",p="";return"published"===s.status?(l=(0,i.t)("Published integrations cannot be re-published."),p=(0,i.t)("Published integrations cannot be removed.")):r||(l=(0,i.t)("Organization owner permissions are required for this action."),p=(0,i.t)("Organization owner permissions are required for this action.")),(0,P.tZ)(X,{org:t,app:s,showPublish:!a,showDelete:!0,onPublish:o,onDelete:n,disablePublishReason:l,disableDeleteReason:p})}})};E.displayName="SentryApplicationRowButtons";const M=E;class O extends b.PureComponent{constructor(){super(...arguments),(0,n.Z)(this,"handlePublish",(()=>{const{app:e}=this.props;(0,y.openModal)((t=>(0,P.tZ)(A,{app:e,...t})))}))}get isInternal(){return"internal"===this.props.app.status}hideStatus(){return this.isInternal}renderStatus(){const{app:e}=this.props;return this.hideStatus()?null:(0,P.tZ)(K,{status:e.status})}render(){const{app:e,organization:t,onRemoveApp:s}=this.props;return(0,P.tZ)(V,{"data-test-id":e.slug,children:(0,P.BX)(W,{children:[(0,P.tZ)(B.Z,{sentryApp:e,size:36}),(0,P.BX)(H,{children:[(0,P.tZ)(Q,{hideStatus:this.hideStatus(),children:(0,P.tZ)(f.Z,{to:`/settings/${t.slug}/developer-settings/${e.slug}/`,children:e.name})}),(0,P.tZ)(U,{children:this.renderStatus()})]}),(0,P.tZ)(L,{children:(0,P.tZ)(M,{organization:t,app:e,onClickRemove:s,onClickPublish:this.handlePublish})})]})})}}O.displayName="SentryApplicationRow";const F=(0,x.Z)("div",{target:"e1go2kpk8"})({name:"zjik7",styles:"display:flex"}),L=(0,x.Z)("div",{target:"e1go2kpk7"})(""),V=(0,x.Z)(d.Lv,{target:"e1go2kpk6"})({name:"ehbzc8",styles:"flex-direction:column;padding:5px"}),W=(0,x.Z)(F,{target:"e1go2kpk5"})({name:"1yplio6",styles:"justify-content:center;padding:10px"}),H=(0,x.Z)("div",{target:"e1go2kpk4"})({name:"3mxc9l",styles:"padding-left:15px;padding-right:15px;flex:1"}),U=(0,x.Z)(F,{target:"e1go2kpk3"})({name:"p4xtjg",styles:"align-items:center;margin-top:6px;font-size:0.8em"}),Q=(0,x.Z)("div",{target:"e1go2kpk2"})("margin-top:",(e=>e.hideStatus?"10px":"0px"),";"),J=(0,x.Z)(F,{target:"e1go2kpk1"})({name:"1h3rtzg",styles:"align-items:center"}),K=(0,x.Z)((e=>{let{status:t,...s}=e;return(0,P.tZ)(J,{children:(0,P.tZ)("div",{...s,children:(0,i.t)(`${t}`)})})}),{target:"e1go2kpk0"})("color:",(e=>"published"===e.status?e.theme.success:e.theme.gray300),";font-weight:light;margin-right:",(0,S.Z)(.75),";");class G extends m.Z{constructor(){super(...arguments),(0,n.Z)(this,"removeApp",(e=>{const t=this.state.applications.filter((t=>t.slug!==e.slug));(function(e,t){(0,o.E3)();const s=e.requestPromise(`/sentry-apps/${t.slug}/`,{method:"DELETE"});return s.then((()=>{(0,o.S9)((0,i.t)("%s successfully removed.",t.slug))}),(()=>{(0,o.B8)(),(0,o.Iw)((0,i.t)("Unable to remove %s integration",t.slug))})),s})(this.api,e).then((()=>{this.setState({applications:t})}),(()=>{}))})),(0,n.Z)(this,"renderApplicationRow",(e=>{const{organization:t}=this.props;return(0,P.tZ)(O,{app:e,organization:t,onRemoveApp:this.removeApp},e.uuid)}))}getTitle(){const{orgId:e}=this.props.params;return(0,u.Z)((0,i.t)("Developer Settings"),e,!1)}getEndpoints(){const{orgId:e}=this.props.params;return[["applications",`/organizations/${e}/sentry-apps/`]]}renderInternalIntegrations(){const{orgId:e}=this.props.params,{organization:t}=this.props,s=this.state.applications.filter((e=>"internal"===e.status)),n=0===s.length,o=(0,i.t)("Manager or Owner permissions required to add an internal integration."),a=(0,P.tZ)(r.Z,{organization:t,access:["org:write"],children:t=>{let{hasAccess:s}=t;return(0,P.tZ)(l.ZP,{priority:"primary",disabled:!s,title:s?void 0:o,size:"xsmall",to:`/settings/${e}/developer-settings/new-internal/`,icon:(0,P.tZ)(c.N_,{size:"xs",isCircled:!0}),children:(0,i.t)("New Internal Integration")})}});return(0,P.BX)(d.s_,{children:[(0,P.BX)(d.V9,{hasButtons:!0,children:[(0,i.t)("Internal Integrations"),a]}),(0,P.tZ)(d.N,{children:n?(0,P.tZ)(g.Z,{children:(0,i.t)("No internal integrations have been created yet.")}):s.map(this.renderApplicationRow)})]})}renderExternalIntegrations(){const{orgId:e}=this.props.params,{organization:t}=this.props,s=this.state.applications.filter((e=>"internal"!==e.status)),n=0===s.length,o=(0,i.t)("Manager or Owner permissions required to add a public integration."),a=(0,P.tZ)(r.Z,{organization:t,access:["org:write"],children:t=>{let{hasAccess:s}=t;return(0,P.tZ)(l.ZP,{priority:"primary",disabled:!s,title:s?void 0:o,size:"xsmall",to:`/settings/${e}/developer-settings/new-public/`,icon:(0,P.tZ)(c.N_,{size:"xs",isCircled:!0}),children:(0,i.t)("New Public Integration")})}});return(0,P.BX)(d.s_,{children:[(0,P.BX)(d.V9,{hasButtons:!0,children:[(0,i.t)("Public Integrations"),a]}),(0,P.tZ)(d.N,{children:n?(0,P.tZ)(g.Z,{children:(0,i.t)("No public integrations have been created yet.")}):s.map(this.renderApplicationRow)})]})}renderBody(){return(0,P.BX)("div",{children:[(0,P.tZ)(Z.Z,{title:(0,i.t)("Developer Settings"),body:(0,i.t)("Create integrations that interact with Sentry using the REST API and webhooks."),action:(0,P.tZ)(l.ZP,{size:"small",external:!0,href:"https://docs.sentry.io/product/integrations/integration-platform/",children:(0,i.t)("View Docs")})}),(0,P.tZ)(a.Z,{type:"info",children:(0,i._N)("Integrations can now detect when a comment on an issue is added or changes.  [link:Learn more].",{link:(0,P.tZ)(p.Z,{href:"https://docs.sentry.io/product/integrations/integration-platform/webhooks/#comments"})})}),this.renderExternalIntegrations(),this.renderInternalIntegrations()]})}}const Y=(0,h.Z)(G)},"../node_modules/lodash/_baseIntersection.js":(e,t,s)=>{var n=s("../node_modules/lodash/_SetCache.js"),o=s("../node_modules/lodash/_arrayIncludes.js"),i=s("../node_modules/lodash/_arrayIncludesWith.js"),r=s("../node_modules/lodash/_arrayMap.js"),a=s("../node_modules/lodash/_baseUnary.js"),l=s("../node_modules/lodash/_cacheHas.js"),p=Math.min;e.exports=function(e,t,s){for(var d=s?i:o,c=e[0].length,u=e.length,h=u,m=Array(u),g=1/0,Z=[];h--;){var x=e[h];h&&t&&(x=r(x,a(t))),g=p(x.length,g),m[h]=!s&&(t||c>=120&&x.length>=120)?new n(h&&x):void 0}x=e[0];var b=-1,y=m[0];e:for(;++b<c&&Z.length<g;){var f=x[b],w=t?t(f):f;if(f=s||0!==f?f:0,!(y?l(y,w):d(Z,w,s))){for(h=u;--h;){var v=m[h];if(!(v?l(v,w):d(e[h],w,s)))continue e}y&&y.push(w),Z.push(f)}}return Z}},"../node_modules/lodash/_castArrayLikeObject.js":(e,t,s)=>{var n=s("../node_modules/lodash/isArrayLikeObject.js");e.exports=function(e){return n(e)?e:[]}},"../node_modules/lodash/intersection.js":(e,t,s)=>{var n=s("../node_modules/lodash/_arrayMap.js"),o=s("../node_modules/lodash/_baseIntersection.js"),i=s("../node_modules/lodash/_baseRest.js"),r=s("../node_modules/lodash/_castArrayLikeObject.js"),a=i((function(e){var t=n(e,r);return t.length&&t[0]===e[0]?o(t):[]}));e.exports=a}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationDeveloperSettings_index_tsx.f44664d7cbf92b525b952a5e1b98105a.js.map