"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_replays_replays_tsx"],{"./app/utils/discover/discoverQuery.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var r=s("./app/utils/withApi.tsx"),i=s("./app/utils/discover/genericDiscoverQuery.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e,t){return e.transactionName!==t.transactionName||e.transactionThreshold!==t.transactionThreshold||e.transactionThresholdMetric!==t.transactionThresholdMetric}function a(e){return(0,n.tZ)(i.ZP,{route:"eventsv2",shouldRefetchData:o,...e})}a.displayName="DiscoverQuery";const l=(0,r.Z)(a)},"./app/utils/discover/genericDiscoverQuery.tsx":(e,t,s)=>{s.d(t,{o:()=>d,AA:()=>m,ZP:()=>h});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),n=s("./app/locale.tsx"),o=s("./app/utils/discover/eventView.tsx"),a=s("./app/utils/performance/contexts/performanceEventViewContext.tsx"),l=s("./app/utils/useOrganization.tsx"),p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class d{constructor(e,t){(0,r.Z)(this,"message",void 0),(0,r.Z)(this,"originalError",void 0),this.message=e,this.originalError=t}getOriginalError(){return this.originalError}}class c extends i.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{isLoading:!0,tableFetchID:void 0,error:null,tableData:null,pageLinks:null}),(0,r.Z)(this,"_shouldRefetchData",(e=>{const t=this.getPayload(this.props),s=this.getPayload(e);return!(0,o.ze)(t,s)||e.limit!==this.props.limit||e.route!==this.props.route||e.cursor!==this.props.cursor})),(0,r.Z)(this,"_parseError",(e=>{var t;if(this.props.parseError)return this.props.parseError(e);if(!e)return null;const s=null===(t=e.responseJSON)||void 0===t?void 0:t.detail;if("string"==typeof s)return new d(s,e);const r=null==s?void 0:s.message;return new d("string"==typeof r?r:(0,n.t)("An unknown error occurred."),e)})),(0,r.Z)(this,"fetchData",(async()=>{const{api:e,beforeFetch:t,afterFetch:s,didFetch:r,eventView:i,orgSlug:n,route:o,setError:a}=this.props;if(!i.isValid())return;const l=`/organizations/${n}/${o}/`,p=Symbol("tableFetchID"),d=this.getPayload(this.props);this.setState({isLoading:!0,tableFetchID:p}),null==a||a(void 0),null==t||t(e),e.clear();try{const[t,,i]=await m(e,l,d);if(this.state.tableFetchID!==p)return;const n=s?s(t,this.props):t;null==r||r(n),this.setState((e=>{var t;return{isLoading:!1,tableFetchID:void 0,error:null,pageLinks:null!==(t=null==i?void 0:i.getResponseHeader("Link"))&&void 0!==t?t:e.pageLinks,tableData:n}}))}catch(e){const t=this._parseError(e);this.setState({isLoading:!1,tableFetchID:void 0,error:t,tableData:null}),a&&a(null!=t?t:void 0)}}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){const t=this._shouldRefetchData(e),s=!1===e.eventView.isValid()&&this.props.eventView.isValid(),r=!!this.props.shouldRefetchData&&this.props.shouldRefetchData(e,this.props);(t||s||r)&&this.fetchData()}getPayload(e){var t;const{cursor:s,limit:r,noPagination:i,referrer:n}=e,o=this.props.getRequestPayload?this.props.getRequestPayload(e):e.eventView.getEventsAPIPayload(e.location);return s&&(o.cursor=s),r&&(o.per_page=r),i&&(o.noPagination=i),n&&(o.referrer=n),Object.assign(o,null!==(t=e.queryExtras)&&void 0!==t?t:{}),o}render(){const{isLoading:e,error:t,tableData:s,pageLinks:r}=this.state,i={isLoading:e,error:t,tableData:s,pageLinks:r},n=this.props.children;return null==n?void 0:n(i)}}function u(e){var t,s;const r=null!==(t=e.orgSlug)&&void 0!==t?t:(0,l.Z)().slug,i=null!==(s=e.eventView)&&void 0!==s?s:(0,a.wj)(),n={...e,orgSlug:r,eventView:i};return(0,p.tZ)(c,{...n})}async function m(e,t,s){return e.requestPromise(t,{method:"GET",includeAllArgs:!0,query:{...s}})}c.displayName="_GenericDiscoverQuery",u.displayName="GenericDiscoverQuery";const h=u},"./app/utils/performance/contexts/performanceEventViewContext.tsx":(e,t,s)=>{s.d(t,{bq:()=>i,wj:()=>o}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("./app/utils/performance/contexts/utils.tsx");const[i,n]=(0,r.n)({name:"PerformanceEventViewContext"});function o(){return n().eventView}},"./app/utils/performance/contexts/utils.tsx":(e,t,s)=>{s.d(t,{n:()=>i});var r=s("../node_modules/react/index.js");function i(e){const{strict:t=!0,errorMessage:s=`useContext for "${e.name}" must be inside a Provider with a value`,name:i}=e,n=r.createContext(void 0);return n.displayName=i,[n.Provider,function(){const e=r.useContext(n);if(!e&&t)throw new Error(s);return e},n]}},"./app/views/replays/replays.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>z});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("../node_modules/react/index.js"),n=s("../node_modules/react-router/es/index.js"),o=s("./app/components/featureBadge.tsx"),a=s("./app/components/idBadge/userBadge.tsx"),l=s("./app/components/links/link.tsx"),p=s("./app/components/organizations/pageFilters/container.tsx"),d=s("./app/components/pageHeading.tsx"),c=s("./app/components/pagination.tsx"),u=s("./app/components/panels/index.tsx"),m=s("./app/components/timeSince.tsx"),h=s("./app/icons/index.tsx"),g=s("./app/locale.tsx"),v=s("./app/styles/organization.tsx"),y=s("./app/styles/space.tsx"),x=s("./app/utils/discover/discoverQuery.tsx"),f=s("./app/utils/discover/eventView.tsx"),w=s("./app/utils/discover/urls.tsx"),Z=s("./app/utils/withOrganization.tsx"),b=s("./app/utils/withPageFilters.tsx"),D=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class j extends i.Component{getEventView(){const{location:e,selection:t}=this.props,s={id:"",name:"",version:2,fields:["eventID","timestamp","replayId","user.display","url"],orderby:"-timestamp",environment:t.environments,projects:t.projects,query:"transaction:sentry-replay"};return t.datetime.period&&(s.range=t.datetime.period),f.ZP.fromNewQueryWithLocation(s,e)}getTitle(){return`Replays - ${this.props.params.orgId}`}renderTable(e){const{organization:t}=this.props;return null==e?void 0:e.map((e=>{var s;return(0,D.BX)(i.Fragment,{children:[(0,D.tZ)(l.Z,{to:`/organizations/${t.slug}/replays/${(0,w.JE)({project:e["project.name"],id:e.id})}/`,children:(0,D.tZ)(_,{avatarSize:32,displayName:e["user.display"],user:{username:e["user.display"],id:e["user.display"],ip_address:e["user.display"],name:e["user.display"],email:e["user.display"]},displayEmail:(null===(s=e.url)||void 0===s?void 0:s.split("?")[0])||""})}),(0,D.tZ)("div",{children:(0,D.BX)(P,{children:[(0,D.tZ)(V,{color:"gray500",size:"sm"}),(0,D.tZ)(m.Z,{date:e.timestamp})]})})]},e.id)}))}render(){const{organization:e}=this.props;return(0,D.tZ)(p.Z,{showEnvironmentSelector:!1,resetParamsOnChange:["cursor"],children:(0,D.BX)(v.JH,{children:[(0,D.tZ)(v.mr,{children:(0,D.tZ)(E,{children:(0,D.BX)("div",{children:[(0,g.t)("Replays")," ",(0,D.tZ)(o.Z,{type:"alpha"})]})})}),(0,D.tZ)(x.Z,{eventView:this.getEventView(),location:this.props.location,orgSlug:e.slug,children:e=>{var t;return(0,D.BX)(i.Fragment,{children:[(0,D.tZ)(u.KB,{isLoading:e.isLoading,isEmpty:0===(null===(t=e.tableData)||void 0===t?void 0:t.data.length),headers:[(0,g.t)("Session"),(0,g.t)("Timestamp")],children:e.tableData?this.renderTable(e.tableData.data):null}),(0,D.tZ)(c.Z,{pageLinks:e.pageLinks})]})}})]})})}}j.displayName="Replays";const E=(0,r.Z)(d.Z,{target:"e23fllz3"})({name:"1npqnnc",styles:"display:flex;align-items:center;justify-content:space-between;flex:1"}),_=(0,r.Z)(a.Z,{target:"e23fllz2"})("font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.linkColor),";"),P=(0,r.Z)("div",{target:"e23fllz1"})("display:grid;grid-template-columns:repeat(2, minmax(auto, max-content));align-items:center;gap:",(0,y.Z)(1.5),";"),V=(0,r.Z)(h.jt,{target:"e23fllz0"})({name:"hbxqi1",styles:"position:relative;top:-1px"}),z=(0,n.withRouter)((0,b.Z)((0,Z.Z)(j)))}}]);
//# sourceMappingURL=../sourcemaps/app_views_replays_replays_tsx.d80787f587630d27141c31d38eb4a81d.js.map