"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_discover_charts_tsx-app_utils_discover_genericDiscoverQuery_tsx-app_views_performan-510bef"],{"./app/utils/discover/charts.tsx":(e,t,r)=>{r.d(t,{CX:()=>a,gu:()=>l});var n=r("./app/locale.tsx"),s=r("./app/utils.tsx"),o=r("./app/utils/discover/fields.tsx"),i=r("./app/utils/formatters.tsx");function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!(0,s.ri)(e))return"â€”";switch((0,o.Px)(t)){case"integer":case"number":return e.toLocaleString();case"percentage":return(0,i.rl)(e,2);case"duration":return(0,i.g9)(e/1e3,2,!0);default:return e.toString()}}function l(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch((0,o.Px)(t)){case"integer":case"number":return r?(0,i.Du)(e):e.toLocaleString();case"percentage":return(0,i.rl)(e,0);case"duration":return u(e);default:return e.toString()}}function u(e){if(0===e)return"0";if(e>=i.ps){const t=(e/i.ps).toFixed(0);return(0,n.t)("%swk",t)}if(e>=i.x4){const t=(e/i.x4).toFixed(0);return(0,n.t)("%sd",t)}if(e>=i.kr){const t=(e/i.kr).toFixed(0);return(0,n.t)("%shr",t)}if(e>=i.EB){const t=(e/i.EB).toFixed(0);return(0,n.t)("%smin",t)}if(e>=i.sh){const t=(e/i.sh).toFixed(0);return(0,n.t)("%ss",t)}const t=e.toFixed(0);return(0,n.t)("%sms",t)}},"./app/utils/discover/genericDiscoverQuery.tsx":(e,t,r)=>{r.d(t,{o:()=>c,AA:()=>m,ZP:()=>f});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),o=r("./app/locale.tsx"),i=r("./app/utils/discover/eventView.tsx"),a=r("./app/utils/performance/contexts/performanceEventViewContext.tsx"),l=r("./app/utils/useOrganization.tsx"),u=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class c{constructor(e,t){(0,n.Z)(this,"message",void 0),(0,n.Z)(this,"originalError",void 0),this.message=e,this.originalError=t}getOriginalError(){return this.originalError}}class d extends s.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{isLoading:!0,tableFetchID:void 0,error:null,tableData:null,pageLinks:null}),(0,n.Z)(this,"_shouldRefetchData",(e=>{const t=this.getPayload(this.props),r=this.getPayload(e);return!(0,i.ze)(t,r)||e.limit!==this.props.limit||e.route!==this.props.route||e.cursor!==this.props.cursor})),(0,n.Z)(this,"_parseError",(e=>{var t;if(this.props.parseError)return this.props.parseError(e);if(!e)return null;const r=null===(t=e.responseJSON)||void 0===t?void 0:t.detail;if("string"==typeof r)return new c(r,e);const n=null==r?void 0:r.message;return new c("string"==typeof n?n:(0,o.t)("An unknown error occurred."),e)})),(0,n.Z)(this,"fetchData",(async()=>{const{api:e,beforeFetch:t,afterFetch:r,didFetch:n,eventView:s,orgSlug:o,route:i,setError:a}=this.props;if(!s.isValid())return;const l=`/organizations/${o}/${i}/`,u=Symbol("tableFetchID"),c=this.getPayload(this.props);this.setState({isLoading:!0,tableFetchID:u}),null==a||a(void 0),null==t||t(e),e.clear();try{const[t,,s]=await m(e,l,c);if(this.state.tableFetchID!==u)return;const o=r?r(t,this.props):t;null==n||n(o),this.setState((e=>{var t;return{isLoading:!1,tableFetchID:void 0,error:null,pageLinks:null!==(t=null==s?void 0:s.getResponseHeader("Link"))&&void 0!==t?t:e.pageLinks,tableData:o}}))}catch(e){const t=this._parseError(e);this.setState({isLoading:!1,tableFetchID:void 0,error:t,tableData:null}),a&&a(null!=t?t:void 0)}}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){const t=this._shouldRefetchData(e),r=!1===e.eventView.isValid()&&this.props.eventView.isValid(),n=!!this.props.shouldRefetchData&&this.props.shouldRefetchData(e,this.props);(t||r||n)&&this.fetchData()}getPayload(e){var t;const{cursor:r,limit:n,noPagination:s,referrer:o}=e,i=this.props.getRequestPayload?this.props.getRequestPayload(e):e.eventView.getEventsAPIPayload(e.location);return r&&(i.cursor=r),n&&(i.per_page=n),s&&(i.noPagination=s),o&&(i.referrer=o),Object.assign(i,null!==(t=e.queryExtras)&&void 0!==t?t:{}),i}render(){const{isLoading:e,error:t,tableData:r,pageLinks:n}=this.state,s={isLoading:e,error:t,tableData:r,pageLinks:n},o=this.props.children;return null==o?void 0:o(s)}}function p(e){var t,r;const n=null!==(t=e.orgSlug)&&void 0!==t?t:(0,l.Z)().slug,s=null!==(r=e.eventView)&&void 0!==r?r:(0,a.wj)(),o={...e,orgSlug:n,eventView:s};return(0,u.tZ)(d,{...o})}async function m(e,t,r){return e.requestPromise(t,{method:"GET",includeAllArgs:!0,query:{...r}})}d.displayName="_GenericDiscoverQuery",p.displayName="GenericDiscoverQuery";const f=p},"./app/utils/performance/contexts/performanceEventViewContext.tsx":(e,t,r)=>{r.d(t,{bq:()=>s,wj:()=>i}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=r("./app/utils/performance/contexts/utils.tsx");const[s,o]=(0,n.n)({name:"PerformanceEventViewContext"});function i(){return o().eventView}},"./app/utils/performance/contexts/utils.tsx":(e,t,r)=>{r.d(t,{n:()=>s});var n=r("../node_modules/react/index.js");function s(e){const{strict:t=!0,errorMessage:r=`useContext for "${e.name}" must be inside a Provider with a value`,name:s}=e,o=n.createContext(void 0);return o.displayName=s,[o.Provider,function(){const e=n.useContext(o);if(!e&&t)throw new Error(r);return e},o]}},"./app/views/performance/trends/types.tsx":(e,t,r)=>{let n,s,o;r.d(t,{ER:()=>n,Z2:()=>s,A2:()=>o}),function(e){e.IMPROVED="improved",e.REGRESSION="regression"}(n||(n={})),function(e){e.P50="p50",e.P75="p75",e.P95="p95",e.P99="p99",e.AVG="avg"}(s||(s={})),function(e){e.DURATION="transaction.duration",e.LCP="measurements.lcp",e.FCP="measurements.fcp",e.FID="measurements.fid",e.CLS="measurements.cls",e.SPANS_DB="spans.db",e.SPANS_HTTP="spans.http",e.SPANS_BROWSER="spans.browser",e.SPANS_RESOURCE="spans.resource"}(o||(o={}))},"./app/views/performance/trends/utils.tsx":(e,t,r)=>{r.d(t,{_1:()=>f,bg:()=>g,T1:()=>h,cs:()=>v,es:()=>E,vt:()=>R,Ws:()=>y,CE:()=>b,IO:()=>P,ed:()=>_,Kt:()=>N,_H:()=>w,kM:()=>D,iF:()=>F,wx:()=>A,RP:()=>O,j_:()=>V,P4:()=>C,HF:()=>I,vq:()=>L}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=r("../node_modules/downsample/methods/ASAP.js"),s=r("../node_modules/moment/moment.js"),o=r.n(s),i=r("./app/components/charts/utils.tsx"),a=r("./app/locale.tsx"),l=r("./app/utils/discover/fields.tsx"),u=r("./app/utils/queryString.tsx"),c=r("./app/utils/theme.tsx"),d=r("./app/utils/tokenizeSearch.tsx"),p=r("./app/views/performance/utils.tsx"),m=r("./app/views/performance/trends/types.tsx");const f="14d",g="15min",h=[{label:"p50",field:m.Z2.P50,alias:"percentile_range",legendLabel:"p50"},{label:"p75",field:m.Z2.P75,alias:"percentile_range",legendLabel:"p75"},{label:"p95",field:m.Z2.P95,alias:"percentile_range",legendLabel:"p95"},{label:"p99",field:m.Z2.P99,alias:"percentile_range",legendLabel:"p99"},{label:"average",field:m.Z2.AVG,alias:"avg_range",legendLabel:"average"}],v=[{label:"Duration",column:m.A2.DURATION},{label:"LCP",column:m.A2.LCP},{label:"FCP",column:m.A2.FCP},{label:"FID",column:m.A2.FID},{label:"CLS",column:m.A2.CLS},{label:"Spans (http)",column:m.A2.SPANS_HTTP},{label:"Spans (db)",column:m.A2.SPANS_DB},{label:"Spans (browser)",column:m.A2.SPANS_BROWSER},{label:"Spans (resource)",column:m.A2.SPANS_RESOURCE}],E={[m.ER.IMPROVED]:{lighter:c.ZP.green200,default:c.ZP.green300},[m.ER.REGRESSION]:{lighter:c.ZP.red200,default:c.ZP.red300}},S={[m.ER.IMPROVED]:"improvedSelected",[m.ER.REGRESSION]:"regressionSelected"},x={[m.ER.IMPROVED]:"improvedUnselectedSeries",[m.ER.REGRESSION]:"regressionUnselectedSeries"},R={[m.ER.IMPROVED]:"improvedCursor",[m.ER.REGRESSION]:"regressionCursor"};function y(){const e={};return Object.values(R).forEach((t=>e[t]=void 0)),e}function b(e,t){var r;const n=null!=t?t:(0,u.ro)(null==e||null===(r=e.query)||void 0===r?void 0:r.trendFunction);return h.find((e=>{let{field:t}=e;return t===n}))||h[0]}function P(e,t,r){var n;const s=(0,u.ro)(null==e||null===(n=e.query)||void 0===n?void 0:n.trendParameter),o=v.find((e=>{let{label:t}=e;return t===s}));return o||function(e,t){return function(e){switch(e){case p.iy.FRONTEND:return{label:"LCP",column:m.A2.LCP};case p.iy.ANY:case p.iy.BACKEND:case p.iy.FRONTEND_OTHER:default:return{label:"Duration",column:m.A2.DURATION}}}((0,p.Bh)(e,t))}(t,r)}function _(e,t){return(0,l.sN)({kind:"function",function:[e,t,void 0,void 0]})}function N(e,t){return{fromSeconds:e/1e3,toSeconds:t/1e3,showDigits:e>1e3||t>1e3||e<10||t<10}}function w(e,t){if(!e.project||!t)return;const r=t.find((t=>t.slug===e.project));return null==r?void 0:r.id}function D(e,t,r,n,s){const o=b(t),a=P(t,n,e.project),l=[...s?[]:["transaction"],"project"].map((e=>({field:e}))),c={field:"trend_percentage()",kind:"asc"};e.trendType=r,r===m.ER.REGRESSION&&(c.kind="desc"),o&&a&&(e.trendFunction=_(o.field,a.column)),e.query=function(e){const t=new d.MY(e);return t.hasFilter("count_percentage()")||t.addFilterValues("count_percentage()",[">0.25","<4"]),t.hasFilter("trend_percentage()")||t.addFilterValues("trend_percentage()",[">0%"]),t.hasFilter("confidence()")||t.addFilterValues("confidence()",[">6"]),t.formatString()}(e.query),e.interval=function(e,t){var r;const n=(0,u.ro)(null==e||null===(r=e.query)||void 0===r?void 0:r.interval),{start:s,end:o,statsPeriod:a}=t,l={start:s||null,end:o||null,period:a},c=(0,i.ZS)(l,"high");return n||c}(t,e),e.sorts=[c],e.fields=l}function F(e,t){const{query:r}=t,n=r.start&&r.end;return r.statsPeriod||n||(e.statsPeriod=f),e}function A(e,t){const r=Math.abs(e);return{seconds:r/1e3,fixedDigits:r>1e3||r<10?1:0,changeLabel:t===m.ER.REGRESSION?(0,a.t)("slower"):(0,a.t)("faster")}}function O(e){const t=o()();return e.map((e=>({...e,received_at:t,transaction:e.transaction})))}function V(e){return S[e]}function C(e){return x[e]}const T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return(0,n.Cl)(e,t)},I=e=>["p50","p75"].find((t=>e.includes(t)));function L(e,t){let r=Number.MAX_SAFE_INTEGER,n=0;if(!e)return{maxValue:n,minValue:r,smoothedResults:void 0};const s=[];for(const o of e){const e=o.data,i=[],a=T(e.map((e=>{let{name:t,value:r}=e;return[Number(t),r]})));for(let e=0;e<a.length;e++){const t=a[e],s=t.y;if(i.push({name:t.x,value:s}),!isNaN(s)){const e=Math.round(s);r=Math.min(e,r),n=Math.max(e,n)}}s.push({seriesName:t||o.seriesName||"Current",data:i,lineStyle:o.lineStyle,color:o.color})}return{minValue:r,maxValue:n,smoothedResults:s}}},"./app/views/performance/utils.tsx":(e,t,r)=>{r.d(t,{U7:()=>f,iy:()=>g,Bh:()=>S,C$:()=>x,Ik:()=>R,iL:()=>y,de:()=>b,Ws:()=>P,Ov:()=>_,R8:()=>N,al:()=>w,m_:()=>D,n4:()=>F,JY:()=>A,YL:()=>O}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=r("../node_modules/react-router/es/index.js"),s=r("./app/constants/pageFilters.tsx"),o=r("./app/data/platformCategories.tsx"),i=r("./app/utils/analytics.tsx"),a=r("./app/utils/dates.tsx"),l=r("./app/utils/discover/fields.tsx"),u=r("./app/utils/formatters.tsx"),c=r("./app/utils/getCurrentSentryReactTransaction.tsx"),d=r("./app/utils/queryString.tsx"),p=r("./app/utils/tokenizeSearch.tsx"),m=r("./app/views/performance/trends/utils.tsx");const f=["environment","project","query","start","end","statsPeriod"];let g;!function(e){e.ANY="any",e.FRONTEND="frontend",e.BACKEND="backend",e.FRONTEND_OTHER="frontend_other",e.MOBILE="mobile"}(g||(g={}));const h=[...o.tQ],v=o.y3.filter((e=>"native"!==e)),E=[...o.ai];function S(e,t){if(0===t.length||t[0]===s.mP)return g.ANY;const r=e.filter((e=>t.includes(parseInt(`${e.id}`,10))));return 0===r.length||r.some((e=>!e.platform))?g.ANY:r.every((e=>h.includes(e.platform)))?g.FRONTEND:r.every((e=>v.includes(e.platform)))?g.BACKEND:r.every((e=>E.includes(e.platform)))?g.MOBILE:g.ANY}function x(e,t){const r=S(e,t.project);return r===g.FRONTEND&&new p.MY(t.query).getFilterValues("!transaction.op").some((e=>"pageload"===e))?g.FRONTEND_OTHER:r}function R(e,t){return x(t,e)===g.FRONTEND}function y(e,t){return x(t,e)===g.FRONTEND||x(t,e)===g.FRONTEND_OTHER}function b(e){return`/organizations/${e.slug}/performance/`}function P(e){return`/organizations/${e.slug}/performance/trends/`}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,d.ro)(e.query.query,t).trim()}function N(e){let{location:t,organization:r}=e;(0,i.ec)({eventKey:"performance_views.change_view",eventName:"Performance Views: Change View",organization_id:parseInt(r.id,10),view_name:"TRENDS"});const s=w({location:t,organization:r});n.browserHistory.push(s)}function w(e){let{location:t,organization:r,initialConditions:n,additionalQuery:s}=e;const o={...t.query,...s},i=(0,d.ro)(t.query.query,""),a=new p.MY(i),l=null!=n?n:new p.MY([]);return a.hasFilter("tpm()")?l.setFilterValues("tpm()",a.getFilterValues("tpm()")):l.setFilterValues("tpm()",[">0.01"]),a.hasFilter("transaction.duration")?l.setFilterValues("transaction.duration",a.getFilterValues("transaction.duration")):l.setFilterValues("transaction.duration",[">0",`<${m.bg}`]),o.query=l.formatString(),{pathname:P(r),query:{...o}}}function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeTagKeys:new Set(["event.type","project"])};return e.getFilterKeys().forEach((r=>{const n=r.startsWith("!")?r.substr(1):r;(n.match(/\w+\(.*\)/)||l.J8.includes(n)||t.excludeTagKeys.has(n))&&e.removeFilter(r)})),e}function F(e){const t=(0,c.Z)(),r=(0,a.Ri)(e.datetime.period,e.datetime.start,e.datetime.end),n=Math.floor(86400*r);null==t||t.setTag("query.period",n.toString());let s=">30d";n<=86400?s="<=1d":n<=604800?s="<=7d":n<=1209600?s="<=14d":n<=2592e3&&(s="<=30d"),null==t||t.setTag("query.period.grouped",s)}function A(e){const{transaction:t}=e.query;return(0,d.ro)(t)}function O(e){return(0,u.g9)(e/1e3,e>1e3?2:0,!0)}}}]);
//# sourceMappingURL=../sourcemaps/app_utils_discover_charts_tsx-app_utils_discover_genericDiscoverQuery_tsx-app_views_performan-510bef.c20fc31fe8fae032d1efc6694bdb16be.js.map